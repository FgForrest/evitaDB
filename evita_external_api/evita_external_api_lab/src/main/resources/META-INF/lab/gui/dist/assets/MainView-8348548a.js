/*
 *
 *                         _ _        ____  ____
 *               _____   _(_) |_ __ _|  _ \| __ )
 *              / _ \ \ / / | __/ _` | | | |  _ \
 *             |  __/\ V /| | || (_| | |_| | |_) |
 *              \___| \_/ |_|\__\__,_|____/|____/
 *
 *   Copyright (c) 2024
 *
 *   Licensed under the Business Source License, Version 1.1 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *   https://github.com/FgForrest/evitaDB/blob/master/LICENSE
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */

var Nt=Object.defineProperty;var xt=(e,l,a)=>l in e?Nt(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a;var ge=(e,l,a)=>(xt(e,typeof l!="symbol"?l+"":l,a),a);import{p as Ce,f as A,s as X,h as R,i as Dt,j as J,k as me,l as Re,n as Rt,g as Ee,q as et,t as fe,v as Be,x as Se,c as $e,V as je,d as b,y as te,z as tt,m as at,A as Et,B as ot,C as Bt,D as $t,E as It,F as Lt,G as At,H as Mt,I as Ut,J as Pt,K as Wt,a as Ht,u as Gt,b as qt,L as Ot,M as Ke,N as Ft,O as Qt,P as zt,Q as Yt,R as jt,S as Kt,T as Xt,U as Ie,W as Jt,X as Zt,Y as j,Z as ea,$ as ta,a0 as W,a1 as Le,a2 as ve,a3 as aa,a4 as K,a5 as q,a6 as Q,a7 as Ae,o as g,e as N,w as i,a8 as he,a9 as be,aa as $,ab as Me,ac as oa,ad as w,ae as Ue,af as G,ag as Te,ah as nt,ai as lt,_ as pe,aj as se,ak as na,al as x,am as _,an as U,ao as oe,ap as Ve,aq as ue,ar as Pe,as as We,at as rt,au as Xe,av as Ne,aw as it,ax as st,ay as He,r as ne,az as ae,aA as de,aB as la,aC as ct,aD as ra,aE as _e,aF as ia,aG as Ge,aH as sa,aI as ca,aJ as ut,aK as xe,aL as dt,aM as De,aN as ua,aO as ke,aP as mt,aQ as vt,aR as pt,aS as da,aT as ma,aU as va,aV as pa,aW as ga,aX as fa,aY as ha,aZ as ba,a_ as ya,a$ as _a,b0 as wa,b1 as Sa,b2 as Va,b3 as Ca,b4 as Ta,b5 as ka,b6 as Na,b7 as xa,b8 as Da,b9 as Ra,ba as Ea,bb as Ba,bc as $a}from"./index-90f44206.js";import{a as gt,u as ft,b as Ia}from"./layout-f07f33b1.js";const La=Ce({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Aa(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:a}=l;let s=0,o=0;const t=A(null),d=X(0),n=X(0),c=X(0),f=X(!1),v=X(!1),r=R(()=>Number(e.scrollThreshold)),u=R(()=>Dt((r.value-d.value)/r.value||0)),T=()=>{const m=t.value;if(!m||a&&!a.value)return;s=d.value,d.value="window"in m?m.pageYOffset:m.scrollTop;const S=m instanceof Window?document.documentElement.scrollHeight:m.scrollHeight;if(o!==S){o=S;return}v.value=d.value<s,c.value=Math.abs(d.value-r.value)};return J(v,()=>{n.value=n.value||d.value}),J(f,()=>{n.value=0}),me(()=>{J(()=>e.scrollTarget,m=>{var I;const S=m?document.querySelector(m):window;S&&S!==t.value&&((I=t.value)==null||I.removeEventListener("scroll",T),t.value=S,t.value.addEventListener("scroll",T,{passive:!0}))},{immediate:!0})}),Re(()=>{var m;(m=t.value)==null||m.removeEventListener("scroll",T)}),a&&J(a,T,{immediate:!0}),{scrollThreshold:r,currentScroll:d,currentThreshold:c,isScrollActive:f,scrollRatio:u,isScrollingUp:v,savedScroll:n}}const Ma=Ce({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Rt(),...gt(),...La(),height:{type:[Number,String],default:64}},"VAppBar"),Ua=Ee()({name:"VAppBar",props:Ma(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:a}=l;const s=A(),o=et(e,"modelValue"),t=R(()=>{var p;const k=new Set(((p=e.scrollBehavior)==null?void 0:p.split(" "))??[]);return{hide:k.has("hide"),fullyHide:k.has("fully-hide"),inverted:k.has("inverted"),collapse:k.has("collapse"),elevate:k.has("elevate"),fadeImage:k.has("fade-image")}}),d=R(()=>{const k=t.value;return k.hide||k.fullyHide||k.inverted||k.collapse||k.elevate||k.fadeImage||!o.value}),{currentScroll:n,scrollThreshold:c,isScrollingUp:f,scrollRatio:v}=Aa(e,{canScroll:d}),r=R(()=>t.value.hide||t.value.fullyHide),u=R(()=>e.collapse||t.value.collapse&&(t.value.inverted?v.value>0:v.value===0)),T=R(()=>e.flat||t.value.fullyHide&&!o.value||t.value.elevate&&(t.value.inverted?n.value>0:n.value===0)),m=R(()=>t.value.fadeImage?t.value.inverted?1-v.value:v.value:void 0),S=R(()=>{var L,D;if(t.value.hide&&t.value.inverted)return 0;const k=((L=s.value)==null?void 0:L.contentHeight)??0,p=((D=s.value)==null?void 0:D.extensionHeight)??0;return r.value?n.value<c.value||t.value.fullyHide?k+p:k:k+p});fe(R(()=>!!e.scrollBehavior),()=>{tt(()=>{r.value?t.value.inverted?o.value=n.value>c.value:o.value=f.value||n.value<c.value:o.value=!0})});const{ssrBootStyles:I}=Be(),{layoutItemStyles:M}=ft({id:e.name,order:R(()=>parseInt(e.order,10)),position:Se(e,"location"),layoutSize:S,elementSize:X(void 0),active:o,absolute:Se(e,"absolute")});return $e(()=>{const k=je.filterProps(e);return b(je,te({ref:s,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...M.value,"--v-toolbar-image-opacity":m.value,height:void 0,...I.value},e.style]},k,{collapse:u.value,flat:T.value}),a)}),{}}});const Pa=Ce({scrollable:Boolean,...at(),...Et(),...ot({tag:"main"})},"VMain"),Wa=Ee()({name:"VMain",props:Pa(),setup(e,l){let{slots:a}=l;const{dimensionStyles:s}=Bt(e),{mainStyles:o}=Ia(),{ssrBootStyles:t}=Be();return $e(()=>b(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[o.value,t.value,s.value,e.style]},{default:()=>{var d,n;return[e.scrollable?b("div",{class:"v-main__scroller"},[(d=a.default)==null?void 0:d.call(a)]):(n=a.default)==null?void 0:n.call(a)]}})),{}}});function Ha(e){let{rootEl:l,isSticky:a,layoutItemStyles:s}=e;const o=X(!1),t=X(0),d=R(()=>{const f=typeof o.value=="boolean"?"top":o.value;return[a.value?{top:"auto",bottom:"auto",height:void 0}:void 0,o.value?{[f]:$t(t.value)}:{top:s.value.top}]});me(()=>{J(a,f=>{f?window.addEventListener("scroll",c,{passive:!0}):window.removeEventListener("scroll",c)},{immediate:!0})}),Re(()=>{window.removeEventListener("scroll",c)});let n=0;function c(){const f=n>window.scrollY?"up":"down",v=l.value.getBoundingClientRect(),r=parseFloat(s.value.top??0),u=window.scrollY-Math.max(0,t.value-r),T=v.height+Math.max(t.value,r)-window.scrollY-window.innerHeight,m=parseFloat(getComputedStyle(l.value).getPropertyValue("--v-body-scroll-y"))||0;v.height<window.innerHeight-r?(o.value="top",t.value=r):f==="up"&&o.value==="bottom"||f==="down"&&o.value==="top"?(t.value=window.scrollY+v.top-m,o.value=!0):f==="down"&&T<=0?(t.value=0,o.value="bottom"):f==="up"&&u<=0&&(m?o.value!=="top"&&(t.value=-u+m+r,o.value="top"):(t.value=v.top+u,o.value="top")),n=window.scrollY}return{isStuck:o,stickyStyles:d}}const Ga=100,qa=20;function Je(e){const l=1.41421356237;return(e<0?-1:1)*Math.sqrt(Math.abs(e))*l}function Ze(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let l=0;for(let a=e.length-1;a>0;a--){if(e[a].t===e[a-1].t)continue;const s=Je(l),o=(e[a].d-e[a-1].d)/(e[a].t-e[a-1].t);l+=(o-s)*Math.abs(o),a===e.length-1&&(l*=.5)}return Je(l)*1e3}function Oa(){const e={};function l(o){Array.from(o.changedTouches).forEach(t=>{(e[t.identifier]??(e[t.identifier]=new It(qa))).push([o.timeStamp,t])})}function a(o){Array.from(o.changedTouches).forEach(t=>{delete e[t.identifier]})}function s(o){var f;const t=(f=e[o])==null?void 0:f.values().reverse();if(!t)throw new Error(`No samples for touch id ${o}`);const d=t[0],n=[],c=[];for(const v of t){if(d[0]-v[0]>Ga)break;n.push({t:v[0],d:v[1].clientX}),c.push({t:v[0],d:v[1].clientY})}return{x:Ze(n),y:Ze(c),get direction(){const{x:v,y:r}=this,[u,T]=[Math.abs(v),Math.abs(r)];return u>T&&v>=0?"right":u>T&&v<=0?"left":T>u&&r>=0?"down":T>u&&r<=0?"up":Fa()}}}return{addMovement:l,endTouch:a,getVelocity:s}}function Fa(){throw new Error}function Qa(e){let{el:l,isActive:a,isTemporary:s,width:o,touchless:t,position:d}=e;me(()=>{window.addEventListener("touchstart",k,{passive:!0}),window.addEventListener("touchmove",p,{passive:!1}),window.addEventListener("touchend",L,{passive:!0})}),Re(()=>{window.removeEventListener("touchstart",k),window.removeEventListener("touchmove",p),window.removeEventListener("touchend",L)});const n=R(()=>["left","right"].includes(d.value)),{addMovement:c,endTouch:f,getVelocity:v}=Oa();let r=!1;const u=X(!1),T=X(0),m=X(0);let S;function I(E,B){return(d.value==="left"?E:d.value==="right"?document.documentElement.clientWidth-E:d.value==="top"?E:d.value==="bottom"?document.documentElement.clientHeight-E:ce())-(B?o.value:0)}function M(E){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const V=d.value==="left"?(E-m.value)/o.value:d.value==="right"?(document.documentElement.clientWidth-E-m.value)/o.value:d.value==="top"?(E-m.value)/o.value:d.value==="bottom"?(document.documentElement.clientHeight-E-m.value)/o.value:ce();return B?Math.max(0,Math.min(1,V)):V}function k(E){if(t.value)return;const B=E.changedTouches[0].clientX,V=E.changedTouches[0].clientY,h=25,y=d.value==="left"?B<h:d.value==="right"?B>document.documentElement.clientWidth-h:d.value==="top"?V<h:d.value==="bottom"?V>document.documentElement.clientHeight-h:ce(),C=a.value&&(d.value==="left"?B<o.value:d.value==="right"?B>document.documentElement.clientWidth-o.value:d.value==="top"?V<o.value:d.value==="bottom"?V>document.documentElement.clientHeight-o.value:ce());(y||C||a.value&&s.value)&&(S=[B,V],m.value=I(n.value?B:V,a.value),T.value=M(n.value?B:V),r=m.value>-20&&m.value<80,f(E),c(E))}function p(E){const B=E.changedTouches[0].clientX,V=E.changedTouches[0].clientY;if(r){if(!E.cancelable){r=!1;return}const y=Math.abs(B-S[0]),C=Math.abs(V-S[1]);(n.value?y>C&&y>3:C>y&&C>3)?(u.value=!0,r=!1):(n.value?C:y)>3&&(r=!1)}if(!u.value)return;E.preventDefault(),c(E);const h=M(n.value?B:V,!1);T.value=Math.max(0,Math.min(1,h)),h>1?m.value=I(n.value?B:V,!0):h<0&&(m.value=I(n.value?B:V,!1))}function L(E){if(r=!1,!u.value)return;c(E),u.value=!1;const B=v(E.changedTouches[0].identifier),V=Math.abs(B.x),h=Math.abs(B.y);(n.value?V>h&&V>400:h>V&&h>3)?a.value=B.direction===({left:"right",right:"left",top:"down",bottom:"up"}[d.value]||ce()):a.value=T.value>.5}const D=R(()=>u.value?{transform:d.value==="left"?`translateX(calc(-100% + ${T.value*o.value}px))`:d.value==="right"?`translateX(calc(100% - ${T.value*o.value}px))`:d.value==="top"?`translateY(calc(-100% + ${T.value*o.value}px))`:d.value==="bottom"?`translateY(calc(100% - ${T.value*o.value}px))`:ce(),transition:"none"}:void 0);return fe(u,()=>{var V,h;const E=((V=l.value)==null?void 0:V.style.transform)??null,B=((h=l.value)==null?void 0:h.style.transition)??null;tt(()=>{var y,C,O,Z;(C=l.value)==null||C.style.setProperty("transform",((y=D.value)==null?void 0:y.transform)||"none"),(Z=l.value)==null||Z.style.setProperty("transition",((O=D.value)==null?void 0:O.transition)||null)}),Lt(()=>{var y,C;(y=l.value)==null||y.style.setProperty("transform",E),(C=l.value)==null||C.style.setProperty("transition",B)})}),{isDragging:u,dragProgress:T,dragStyles:D}}function ce(){throw new Error}const za=["start","end","left","right","top","bottom"],Ya=Ce({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>za.includes(e)},sticky:Boolean,...At(),...at(),...Mt(),...Ut({mobile:null}),...Pt(),...gt(),...Wt(),...ot({tag:"nav"}),...Ht()},"VNavigationDrawer"),ht=Ee()({name:"VNavigationDrawer",props:Ya(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,l){let{attrs:a,emit:s,slots:o}=l;const{isRtl:t}=Gt(),{themeClasses:d}=qt(e),{borderClasses:n}=Ot(e),{backgroundColorClasses:c,backgroundColorStyles:f}=Ke(Se(e,"color")),{elevationClasses:v}=Ft(e),{displayClasses:r,mobile:u}=Qt(e),{roundedClasses:T}=zt(e),m=Yt(),S=et(e,"modelValue",null,Y=>!!Y),{ssrBootStyles:I}=Be(),{scopeId:M}=jt(),k=A(),p=X(!1),{runOpenDelay:L,runCloseDelay:D}=ea(e,Y=>{p.value=Y}),E=R(()=>e.rail&&e.expandOnHover&&p.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),B=R(()=>Kt(e.location,t.value)),V=R(()=>e.persistent),h=R(()=>!e.permanent&&(u.value||e.temporary)),y=R(()=>e.sticky&&!h.value&&B.value!=="bottom");fe(()=>e.expandOnHover&&e.rail!=null,()=>{J(p,Y=>s("update:rail",!Y))}),fe(()=>!e.disableResizeWatcher,()=>{J(h,Y=>!e.permanent&&ta(()=>S.value=!Y))}),fe(()=>!e.disableRouteWatcher&&!!m,()=>{J(m.currentRoute,()=>h.value&&(S.value=!1))}),J(()=>e.permanent,Y=>{Y&&(S.value=!0)}),e.modelValue==null&&!h.value&&(S.value=e.permanent||!u.value);const{isDragging:C,dragProgress:O}=Qa({el:k,isActive:S,isTemporary:h,width:E,touchless:Se(e,"touchless"),position:B}),Z=R(()=>{const Y=h.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):E.value;return C.value?Y*O.value:Y}),le=R(()=>["top","bottom"].includes(e.location)?0:E.value),{layoutItemStyles:z,layoutItemScrimStyles:Ct}=ft({id:e.name,order:R(()=>parseInt(e.order,10)),position:B,layoutSize:Z,elementSize:le,active:R(()=>S.value||C.value),disableTransitions:R(()=>C.value),absolute:R(()=>e.absolute||y.value&&typeof Oe.value!="string")}),{isStuck:Oe,stickyStyles:Tt}=Ha({rootEl:k,isSticky:y,layoutItemStyles:z}),Fe=Ke(R(()=>typeof e.scrim=="string"?e.scrim:null)),kt=R(()=>({...C.value?{opacity:O.value*.2,transition:"none"}:void 0,...Ct.value}));return Xt({VList:{bgColor:"transparent"}}),$e(()=>{const Y=o.image||e.image;return b(j,null,[b(e.tag,te({ref:k,onMouseenter:L,onMouseleave:D,class:["v-navigation-drawer",`v-navigation-drawer--${B.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":p.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":h.value,"v-navigation-drawer--persistent":V.value,"v-navigation-drawer--active":S.value,"v-navigation-drawer--sticky":y.value},d.value,c.value,n.value,r.value,v.value,T.value,e.class],style:[f.value,z.value,I.value,Tt.value,e.style,["top","bottom"].includes(B.value)?{height:"auto"}:{}]},M,a),{default:()=>{var Qe,ze,Ye;return[Y&&b("div",{key:"image",class:"v-navigation-drawer__img"},[o.image?b(Jt,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},o.image):b(Ie,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),o.prepend&&b("div",{class:"v-navigation-drawer__prepend"},[(Qe=o.prepend)==null?void 0:Qe.call(o)]),b("div",{class:"v-navigation-drawer__content"},[(ze=o.default)==null?void 0:ze.call(o)]),o.append&&b("div",{class:"v-navigation-drawer__append"},[(Ye=o.append)==null?void 0:Ye.call(o)])]}}),b(Zt,{name:"fade-transition"},{default:()=>[h.value&&(C.value||S.value)&&!!e.scrim&&b("div",te({class:["v-navigation-drawer__scrim",Fe.backgroundColorClasses.value],style:[kt.value,Fe.backgroundColorStyles.value],onClick:()=>{V.value||(S.value=!1)}},M),null)]})])}),{isStuck:Oe}}});var re=(e=>(e.Explorer="explorer",e))(re||{});const ja="/lab/logo/evitalab-logo-mini.png?raw=true",Ka="/lab/documentation.svg",Xa="/lab/discord.svg";var P=(e=>(e.Keymap="keymap",e.EvitaLabGithub="evitaLabGithub",e.DiscussEvitaLab="discussEvitaLab",e.ReportEvitaLabIssue="reportEvitaLabIssue",e.EvitaDBDocumentation="evitaDBDocumentation",e.EvitaDBGithub="evitaDBGithub",e.DiscussEvitaDB="discussEvitaDB",e.ReportEvitaDBIssue="reportEvitaDBIssue",e))(P||{});const Ja=W({__name:"ManageMenu",setup(e){const l=Le(),a=ve(),s=aa(),o=K(),{t}=q(),d=[{type:"subheader",title:t("panel.manage.manage.title")},{title:t(`panel.manage.manage.item.${P.Keymap}`),value:P.Keymap,command:Q.System_Keymap,props:{prependIcon:"mdi-keyboard-outline"}},{type:"subheader",title:t("panel.manage.evitaLabHelp.title")},{title:t(`panel.manage.evitaLabHelp.item.${P.EvitaLabGithub}`),value:P.EvitaLabGithub,props:{prependIcon:"mdi-github"}},{title:t(`panel.manage.evitaLabHelp.item.${P.DiscussEvitaLab}`),value:P.DiscussEvitaLab,props:{prependIcon:"mdi-forum-outline"}},{title:t(`panel.manage.evitaLabHelp.item.${P.ReportEvitaLabIssue}`),value:P.ReportEvitaLabIssue,props:{prependIcon:"mdi-bug"}},{type:"subheader",title:t("panel.manage.evitaDBHelp.title")},{title:t(`panel.manage.evitaDBHelp.item.${P.EvitaDBDocumentation}`),value:P.EvitaDBDocumentation,props:{prependIcon:"mdi-book-open-variant"}},{title:t(`panel.manage.evitaDBHelp.item.${P.EvitaDBGithub}`),value:P.EvitaDBGithub,props:{prependIcon:"mdi-github"}},{title:t(`panel.manage.evitaDBHelp.item.${P.DiscussEvitaDB}`),value:P.DiscussEvitaDB,props:{prependIcon:"mdi-forum-outline"}},{title:t(`panel.manage.evitaDBHelp.item.${P.ReportEvitaDBIssue}`),value:P.ReportEvitaDBIssue,props:{prependIcon:"mdi-bug"}}];function n(){a.createTab(s.createNew())}function c(f){if(f.length>0)switch(f[0]){case P.Keymap:n();break;case P.EvitaLabGithub:window.open("https://github.com/lukashornych/evitalab","_blank");break;case P.DiscussEvitaLab:window.open("https://discord.gg/VsNBWxgmSw","_blank");break;case P.ReportEvitaLabIssue:window.open("https://github.com/lukashornych/evitalab/issues/new","_blank");break;case P.EvitaDBDocumentation:window.open("https://evitadb.io/documentation","_blank");break;case P.EvitaDBGithub:window.open("https://github.com/FgForrest/evitaDB","_blank");break;case P.DiscussEvitaDB:window.open("https://discord.gg/VsNBWxgmSw","_blank");break;case P.ReportEvitaDBIssue:window.open("https://github.com/FgForrest/evitaDB/issues/new","_blank");break;default:o.error(new lt(`Unknown manage option ${f[0]}`))}}return me(()=>{l.bindGlobal(Q.System_Keymap,n)}),Ae(()=>{l.unbindGlobal(Q.System_Keymap)}),(f,v)=>(g(),N(nt,null,{activator:i(({props:r})=>[b(Me,te(r,{icon:"",variant:"text",class:"manage-button"}),{default:i(()=>[he(f.$slots,"default",{},void 0,!0),b(be,{activator:"parent"},{default:i(()=>[$(" Manage evitaLab ")]),_:1})]),_:2},1040)]),default:i(()=>[b(Te,{items:d,"onUpdate:selected":c},{title:i(({item:r})=>[b(oa,null,{default:i(()=>[$(w(r.title)+" ",1),r.command!=null?(g(),N(Ue,{key:0,command:r.command},{default:i(()=>[$(w(r.title),1)]),_:2},1032,["command"])):G("",!0)]),_:2},1024)]),_:1})]),_:3}))}});const Za=pe(Ja,[["__scopeId","data-v-d2e32f29"]]),eo={class:"lab-nav-links"},to={href:"https://evitadb.io/documentation",target:"_blank"},ao=["alt"],oo={href:"https://discord.gg/VsNBWxgmSw",target:"_blank"},no=["alt"],lo=W({__name:"WorkspacePanel",props:{panel:{}},emits:["update:panel"],setup(e,{emit:l}){const a=e,s=Le(),{t:o}=q(),t=d();function d(){const c=[];return c.push(new se(re.Explorer,o(`panel.item.${re.Explorer}`),"mdi-connection",()=>{},Q.System_Panels_ConnectionsExplorer)),c}function n(c){c.value?l("update:panel",c.id):l("update:panel",null)}return me(()=>{s.bindGlobal(Q.System_Panels_ConnectionsExplorer,()=>{a.panel===re.Explorer?l("update:panel",null):l("update:panel",re.Explorer)})}),Ae(()=>{s.unbindGlobal(Q.System_Panels_ConnectionsExplorer)}),(c,f)=>(g(),N(ht,{permanent:"",rail:"",class:"bg-primary-dark"},{prepend:i(()=>[b(Za,null,{default:i(()=>[b(na,{size:"30px"},{default:i(()=>[b(Ie,{alt:"evitaLab Logo",width:"30px",height:"30px",src:ja})]),_:1})]),_:1})]),append:i(()=>[x("ul",eo,[x("li",null,[x("a",to,[x("img",{src:Ka,alt:_(o)("panel.link.evitaDBDocumentation.icon.alt")},null,8,ao),b(be,{activator:"parent"},{default:i(()=>[$(w(_(o)("panel.link.evitaDBDocumentation.tooltip")),1)]),_:1})])]),x("li",null,[x("a",oo,[x("img",{src:Xa,alt:_(o)("panel.link.discord.icon.alt")},null,8,no),b(be,{activator:"parent"},{default:i(()=>[$(w(_(o)("panel.link.discord.tooltip")),1)]),_:1})])])])]),default:i(()=>[b(Te,{density:"compact",nav:"",selected:[c.panel],"onClick:select":n,class:"navigation-items"},{default:i(()=>[(g(!0),U(j,null,oe(_(t),v=>(g(),N(Ve,{key:v.value,value:v.value},{default:i(()=>[b(ue,null,{default:i(()=>[$(w(v.prependIcon),1)]),_:2},1024),b(Ue,{command:v.command},{default:i(()=>[$(w(v.title),1)]),_:2},1032,["command"])]),_:2},1032,["value"]))),128))]),_:1},8,["selected"])]),_:1}))}});const ro=pe(lo,[["__scopeId","data-v-d2d1dd7a"]]);var F=(e=>(e.Refresh="refresh",e.OpenGraphQLSystemAPIConsole="openGraphQLSystemApiConsole",e.Edit="edit",e.Remove="remove",e.Detail="detail",e.Tasks="tasks",e.JfrRecordings="jfrRecordings",e.ModifySubheader="modifySubheader",e.CatalogsSubheader="catalogsSubheader",e.CreateCatalog="createCatalog",e.CatalogBackups="catalogBackups",e))(F||{});const bt=Symbol("connection");function io(e){Pe(bt,e)}function yt(){return We(bt)}const _t=Symbol("serverStatus");function so(e){Pe(_t,e)}function wt(){return We(_t)}const St=Symbol("catalog");function co(e){Pe(St,e)}function uo(){return We(St)}const mo=e=>(it("data-v-2967730b"),e=e(),st(),e),vo={class:"tree-view-item__content"},po=mo(()=>x("span",{class:"text-disabled"}," No items found ",-1)),go={key:0,class:"tree-view-item__flags"},fo={key:0,class:"tree-view-item__flags"},ho=W({__name:"VTreeViewItem",props:{openable:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},prependIcon:{},loading:{type:Boolean,default:!1},flags:{default:()=>[]},actions:{default:()=>[]}},emits:["click:action"],setup(e,{emit:l}){const a=e,s=A(!1);function o(){a.actions&&a.actions.length>0&&(s.value=!0)}return(t,d)=>(g(),N(Ve,{"prepend-icon":null,"append-icon":null,onContextmenu:Ne(o,["prevent"])},{default:i(()=>[x("div",vo,[t.openable?(g(),N(ue,{key:0},{default:i(()=>[$(w(t.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1})):(g(),N(ue,{key:1})),t.loading?(g(),N(rt,{key:2})):(g(),N(ue,{key:3},{default:i(()=>[$(w(t.prependIcon),1)]),_:1})),b(be,null,{activator:i(({props:n})=>[x("span",te(n,{class:"tree-view-item__text text-truncate"}),[he(t.$slots,"default",{},()=>[po],!0),t.flags.length>0?(g(),U("span",go,[(g(!0),U(j,null,oe(t.flags,c=>(g(),U("span",{key:c.value,class:Xe(["tree-view-item__flag",`tree-view-item__flag--${c.type}`])},w(c.value),3))),128))])):G("",!0)],16)]),default:i(()=>[he(t.$slots,"default",{},void 0,!0),t.flags.length>0?(g(),U("span",fo,[(g(!0),U(j,null,oe(t.flags,n=>(g(),U("span",{key:n.value,class:Xe(["tree-view-item__flag","tree-view-item__lg-flag",`tree-view-item__flag--${n.type}`])},w(n.value),3))),128))])):G("",!0)]),_:3}),t.actions&&t.actions.length>0?(g(),N(nt,{key:4,"menu-items":t.actions,modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=n=>s.value=n)},{activator:i(({props:n})=>[b(ue,te(n,{class:"text-gray-light"}),{default:i(()=>[$(" mdi-dots-vertical ")]),_:2},1040)]),default:i(()=>[b(Te,{density:"compact",items:t.actions,"onClick:select":d[0]||(d[0]=n=>t.$emit("click:action",n.id))},{item:i(({props:n})=>[b(Ve,{"prepend-icon":n.prependIcon,value:n.value,disabled:n.disabled},{default:i(()=>[$(w(n.title),1)]),_:2},1032,["prepend-icon","value","disabled"])]),_:1},8,["items"])]),_:1},8,["menu-items","modelValue"])):G("",!0)])]),_:3},8,["onContextmenu"]))}});const qe=pe(ho,[["__scopeId","data-v-2967730b"]]);var H=(e=>(e.OpenEvitaQLConsole="openEvitaQLConsole",e.OpenGraphQLDataAPIConsole="openGraphQLDataApiConsole",e.OpenGraphQLSchemaAPIConsole="openGraphQLSchemaApiConsole",e.ViewSchema="viewSchema",e.DropCatalog="dropCatalog",e.RenameCatalog="renameCatalog",e.ReplaceCatalog="replaceCatalog",e.SwitchCatalogToAliveState="switchCatalogToAliveState",e.ModifySubheader="modifySubheader",e.CollectionsSubheader="collectionsSubheader",e.JobsSubheader="jobsSubheader",e.CreateCollection="createCollection",e.Jobs="jobs",e))(H||{});const bo={class:"pl-8 text-disabled"},Vt=W({__name:"VTreeViewEmptyItem",setup(e){const{t:l}=q();return(a,s)=>(g(),N(Ve,null,{default:i(()=>[x("span",bo,w(_(l)("common.list.empty")),1)]),_:1}))}});var ee=(e=>(e.ViewEntities="viewEntities",e.ViewSchema="viewSchema",e.ModifySubheader="modifySubheader",e.DropCollection="dropCollection",e.RenameCollection="renameCollection",e))(ee||{});class ye{constructor(l){ge(this,"title");ge(this,"type","subheader");this.title=l}}const yo=W({__name:"DropCollectionDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{},entityType:{}},emits:["update:modelValue","drop"],setup(e,{emit:l}){const a=e,s=He(),o=K(),{t}=q();async function d(){try{return await s.dropCollection(a.connection,a.catalogName,a.entityType)?(o.success(t("explorer.collection.drop.notification.collectionDropped",{entityType:a.entityType})),l("drop")):o.info(t("explorer.collection.drop.notification.collectionNotDropped",{entityType:a.entityType})),!0}catch(n){return o.error(t("explorer.collection.drop.notification.couldNotDropCollection",{entityType:a.entityType,reason:n.message})),!1}}return(n,c)=>{const f=ne("I18nT");return g(),N(ae,{"model-value":n.modelValue,dangerous:"",changed:"","confirm-button-icon":"mdi-delete-outline",confirm:d,"onUpdate:modelValue":c[0]||(c[0]=v=>l("update:modelValue",v))},{title:i(()=>[b(f,{keypath:"explorer.collection.drop.title"},{entityType:i(()=>[x("strong",null,w(n.entityType),1)]),_:1})]),"prepend-form":i(()=>[$(w(_(t)("explorer.collection.drop.question")),1)]),"confirm-button-body":i(()=>[$(w(_(t)("common.button.drop")),1)]),_:1},8,["model-value"])}}}),_o=W({__name:"RenameCollectionDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{},entityType:{}},emits:["update:modelValue","rename"],setup(e,{emit:l}){const a=e,s=He(),o=K(),{t}=q(),d=[r=>r!=null&&r.trim().length>0?!0:t("explorer.collection.rename.form.newName.validations.required"),async r=>{const u=await s.isEntityTypeValid(a.connection,r);return u==null?!0:t(`explorer.collection.rename.form.newName.validations.${u}`)},async r=>r===a.entityType||await s.isEntityTypeAvailable(a.connection,a.catalogName,r)?!0:t("explorer.collection.rename.form.newName.validations.notAvailable")],n=A(a.entityType),c=R(()=>n.value!==a.entityType);function f(){n.value=a.entityType}async function v(){try{return await s.renameCollection(a.connection,a.catalogName,a.entityType,n.value)?(o.success(t("explorer.collection.rename.notification.collectionRenamed",{entityType:a.entityType,newName:n.value})),l("rename")):o.info(t("explorer.collection.rename.notification.collectionNotRenamed",{entityType:a.entityType})),!0}catch(r){return o.error(t("explorer.collection.rename.notification.couldNotRenameCollection",{entityType:a.entityType,reason:r.message})),!1}}return(r,u)=>{const T=ne("I18nT");return g(),N(ae,{"model-value":r.modelValue,changed:c.value,dangerous:"","confirm-button-icon":"mdi-pencil-outline",confirm:v,reset:f,"onUpdate:modelValue":u[1]||(u[1]=m=>l("update:modelValue",m))},{title:i(()=>[b(T,{keypath:"explorer.collection.rename.title"},{entityType:i(()=>[x("strong",null,w(r.entityType),1)]),_:1})]),default:i(()=>[b(de,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=m=>n.value=m),label:_(t)("explorer.collection.rename.form.newName.label"),rules:d,required:""},null,8,["modelValue","label"])]),"confirm-button-body":i(()=>[$(w(_(t)("common.button.rename")),1)]),_:1},8,["model-value","changed"])}}}),wo=W({__name:"CollectionItem",props:{entityCollection:{}},emits:["change"],setup(e,{emit:l}){const a=e,s=ve(),o=la(),t=ct(),{t:d}=q(),n=wt(),c=A(!1),f=A(!1),v=yt(),r=uo(),u=R(()=>I()),T=R(()=>Array.from(u.value.values()));if(r.value==null)throw new lt("Catalog schema is not loaded yet, but collection item is already rendered!");function m(){s.createTab(o.createNew(v,r.value.name,a.entityCollection.entityType,void 0,!0))}function S(k){const p=u.value.get(k);p instanceof se&&p.execute()}function I(){const k=n.value!=null&&!n.value.readOnly,p=new Map;return p.set(ee.ViewEntities,M(ee.ViewEntities,"mdi-table",m)),p.set(ee.ViewSchema,M(ee.ViewSchema,"mdi-file-code-outline",()=>s.createTab(t.createNew(v,new ra(r.value.name,a.entityCollection.entityType))))),p.set(ee.ModifySubheader,new ye(d("explorer.collection.subheader.modify"))),p.set(ee.RenameCollection,M(ee.RenameCollection,"mdi-pencil-outline",()=>f.value=!0,k)),p.set(ee.DropCollection,M(ee.DropCollection,"mdi-delete-outline",()=>c.value=!0,k)),p}function M(k,p,L,D=!0){return new se(k,d(`explorer.collection.actions.${k}`),p,L,void 0,!D)}return(k,p)=>(g(),U("div",null,[b(qe,{"prepend-icon":"mdi-list-box-outline",actions:T.value,onClick:m,"onClick:action":S,class:"text-gray-light"},{default:i(()=>[$(w(k.entityCollection.entityType),1)]),_:1},8,["actions"]),f.value?(g(),N(_o,{key:0,modelValue:f.value,"onUpdate:modelValue":p[0]||(p[0]=L=>f.value=L),connection:_(v),"catalog-name":_(r).name,"entity-type":k.entityCollection.entityType,onRename:p[1]||(p[1]=L=>l("change"))},null,8,["modelValue","connection","catalog-name","entity-type"])):G("",!0),c.value?(g(),N(yo,{key:1,modelValue:c.value,"onUpdate:modelValue":p[2]||(p[2]=L=>c.value=L),connection:_(v),"catalog-name":_(r).name,"entity-type":k.entityCollection.entityType,onDrop:p[3]||(p[3]=L=>l("change"))},null,8,["modelValue","connection","catalog-name","entity-type"])):G("",!0)]))}}),So=W({__name:"RenameCatalogDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","rename"],setup(e,{emit:l}){const a=e,s=_e(),o=K(),{t}=q(),d=[r=>r!=null&&r.trim().length>0?!0:t("explorer.catalog.rename.form.newName.validations.required"),async r=>{const u=await s.isCatalogNameValid(a.connection,r);return u==null?!0:t(`explorer.catalog.rename.form.newName.validations.${u}`)},async r=>r===a.catalogName||await s.isCatalogNameAvailable(a.connection,r)?!0:t("explorer.catalog.rename.form.newName.validations.notAvailable")],n=A(a.catalogName),c=R(()=>a.catalogName!==n.value);function f(){n.value=a.catalogName}async function v(){try{return await s.renameCatalog(a.connection,a.catalogName,n.value)?(o.success(t("explorer.catalog.rename.notification.catalogRenamed",{catalogName:a.catalogName,newName:n.value})),l("rename")):o.info(t("explorer.catalog.rename.notification.catalogNotRenamed",{catalogName:a.catalogName})),!0}catch(r){return o.error(t("explorer.catalog.rename.notification.couldNotRenameCatalog",{catalogName:a.catalogName,reason:r.message})),!1}}return(r,u)=>{const T=ne("I18nT");return g(),N(ae,{"model-value":r.modelValue,changed:c.value,dangerous:"","confirm-button-icon":"mdi-pencil-outline",confirm:v,reset:f,"onUpdate:modelValue":u[1]||(u[1]=m=>l("update:modelValue",m))},{title:i(()=>[b(T,{keypath:"explorer.catalog.rename.title"},{catalogName:i(()=>[x("strong",null,w(r.catalogName),1)]),_:1})]),default:i(()=>[b(de,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=m=>n.value=m),label:_(t)("explorer.catalog.rename.form.newName.label"),rules:d,required:""},null,8,["modelValue","label"])]),"confirm-button-body":i(()=>[$(w(_(t)("common.button.rename")),1)]),_:1},8,["model-value","changed"])}}}),Vo=W({__name:"DropCatalogDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","drop"],setup(e,{emit:l}){const a=e,s=_e(),o=K(),{t}=q();async function d(){try{return await s.dropCatalog(a.connection,a.catalogName)?(o.success(t("explorer.catalog.drop.notification.catalogDropped",{catalogName:a.catalogName})),l("drop")):o.info(t("explorer.catalog.drop.notification.catalogNotDropped",{catalogName:a.catalogName})),!0}catch(n){return o.error(t("explorer.catalog.drop.notification.couldNotDropCatalog",{catalogName:a.catalogName,reason:n.message})),!1}}return(n,c)=>{const f=ne("I18nT");return g(),N(ae,{"model-value":n.modelValue,dangerous:"",changed:"","confirm-button-icon":"mdi-delete-outline",confirm:d,"onUpdate:modelValue":c[0]||(c[0]=v=>l("update:modelValue",v))},{title:i(()=>[b(f,{keypath:"explorer.catalog.drop.title"},{catalogName:i(()=>[x("strong",null,w(n.catalogName),1)]),_:1})]),"prepend-form":i(()=>[$(w(_(t)("explorer.catalog.drop.question")),1)]),"confirm-button-body":i(()=>[$(w(_(t)("common.button.drop")),1)]),_:1},8,["model-value"])}}}),Co=W({__name:"ReplaceCatalogDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","replace"],setup(e,{emit:l}){const a=e,s=_e(),o=K(),{t}=q(),d=[m=>m!=null&&m.trim().length>0?!0:t("explorer.catalog.replace.form.catalogNameToBeReplacedWith.validations.required"),async m=>m===a.catalogName||await s.isCatalogExists(a.connection,m)?!0:t("explorer.catalog.replace.form.catalogNameToBeReplacedWith.validations.notExists")],n=A(),c=R(()=>n.value==null?[]:n.value.map(m=>m.name)),f=A(!1),v=A(),r=R(()=>v.value!=null&&v.value.length>0);s.getCatalogs(a.connection).then(m=>{n.value=m.filter(S=>S.name!==a.catalogName),f.value=!0});function u(){n.value=[],f.value=!1,v.value=""}async function T(){try{return await s.replaceCatalog(a.connection,v.value,a.catalogName)?(o.success(t("explorer.catalog.replace.notification.catalogReplaced",{catalogNameToBeReplaced:a.catalogName,catalogNameToBeReplacedWith:v.value})),l("replace")):o.info(t("explorer.catalog.replace.notification.catalogNotReplaced",{catalogNameToBeReplaced:a.catalogName})),!0}catch(m){return o.error(t("explorer.catalog.replace.notification.couldNotReplaceCatalog",{catalogNameToBeReplaced:a.catalogName,reason:m.message})),!1}}return(m,S)=>{const I=ne("I18nT");return g(),N(ae,{"model-value":m.modelValue,dangerous:"",changed:r.value,"confirm-button-icon":"mdi-file-replace-outline",confirm:T,reset:u,"onUpdate:modelValue":S[1]||(S[1]=M=>l("update:modelValue",M))},{title:i(()=>[b(I,{keypath:"explorer.catalog.replace.title"},{catalogNameToBeReplaced:i(()=>[x("strong",null,w(m.catalogName),1)]),_:1})]),default:i(()=>[b(ia,{modelValue:v.value,"onUpdate:modelValue":S[0]||(S[0]=M=>v.value=M),label:_(t)("explorer.catalog.replace.form.catalogNameToBeReplacedWith.label"),items:c.value,rules:d},null,8,["modelValue","label","items"])]),"append-form":i(()=>[b(Ge,{icon:"mdi-information-outline",type:"info"},{default:i(()=>[b(I,{keypath:"explorer.catalog.replace.info"},sa({catalogNameToBeReplaced:i(()=>[x("strong",null,w(m.catalogName),1)]),_:2},[r.value?{name:"catalogNameToBeReplacedWith",fn:i(()=>[x("strong",null,w(v.value),1)]),key:"0"}:{name:"catalogNameToBeReplacedWith",fn:i(()=>[x("strong",null,"?")]),key:"1"}]),1024)]),_:1})]),"confirm-button-body":i(()=>[$(w(_(t)("common.button.replace")),1)]),_:1},8,["model-value","changed"])}}}),To=W({__name:"CreateCollectionDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","create"],setup(e,{emit:l}){const a=e,s=He(),o=K(),{t}=q(),d=[r=>r!=null&&r.trim().length>0?!0:t("explorer.collection.create.form.entityType.validations.required"),async r=>{const u=await s.isEntityTypeValid(a.connection,r);return u==null?!0:t(`explorer.collection.create.form.entityType.validations.${u}`)},async r=>await s.isEntityTypeAvailable(a.connection,a.catalogName,r)?!0:t("explorer.collection.create.form.entityType.validations.notAvailable")],n=A(""),c=R(()=>n.value.length>0);function f(){n.value=""}async function v(){try{return await s.createCollection(a.connection,a.catalogName,n.value),o.success(t("explorer.collection.create.notification.collectionCreated",{entityType:n.value})),l("create"),!0}catch(r){return o.error(t("explorer.collection.create.notification.couldNotCreateCollection",{entityType:n.value,reason:r.message})),!1}}return(r,u)=>{const T=ne("I18nT");return g(),N(ae,{"model-value":r.modelValue,changed:c.value,"confirm-button-icon":"mdi-plus",confirm:v,reset:f,"onUpdate:modelValue":u[1]||(u[1]=m=>l("update:modelValue",m))},{title:i(()=>[b(T,{keypath:"explorer.collection.create.title"},{catalogName:i(()=>[x("strong",null,w(r.catalogName),1)]),_:1})]),default:i(()=>[b(de,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=m=>n.value=m),label:_(t)("explorer.collection.create.form.entityType.label"),rules:d,required:""},null,8,["modelValue","label"])]),"confirm-button-body":i(()=>[$(w(_(t)("common.button.create")),1)]),_:1},8,["model-value","changed"])}}}),ko=W({__name:"SwitchCatalogToAliveStateDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","switch"],setup(e,{emit:l}){const a=e,s=_e(),o=K(),{t}=q();async function d(){try{return await s.switchCatalogToAliveState(a.connection,a.catalogName)?(o.success(t("explorer.catalog.switchToAliveState.notification.catalogSwitched",{catalogName:a.catalogName})),l("switch")):o.info(t("explorer.catalog.switchToAliveState.notification.catalogNotSwitched",{catalogName:a.catalogName})),!0}catch(n){return o.error(t("explorer.catalog.switchToAliveState.notification.couldNotSwitchCatalog",{catalogName:a.catalogName,reason:n.message})),!1}}return(n,c)=>{const f=ne("I18nT");return g(),N(ae,{"model-value":n.modelValue,dangerous:"",changed:"","confirm-button-icon":"mdi-toggle-switch-outline",confirm:d,"onUpdate:modelValue":c[0]||(c[0]=v=>l("update:modelValue",v))},{title:i(()=>[b(f,{keypath:"explorer.catalog.switchToAliveState.title"},{catalogName:i(()=>[x("strong",null,w(n.catalogName),1)]),_:1})]),"prepend-form":i(()=>[$(w(_(t)("explorer.catalog.switchToAliveState.description")),1)]),"append-form":i(()=>[b(Ge,{icon:"mdi-alert-outline",type:"warning"},{default:i(()=>[$(w(_(t)("explorer.catalog.switchToAliveState.warning")),1)]),_:1})]),"confirm-button-body":i(()=>[$(w(_(t)("common.button.switch")),1)]),_:1},8,["model-value"])}}});var we=(e=>(e.Info="info",e.Warning="warning",e.Error="error",e))(we||{});class ie{constructor(l,a){ge(this,"value");ge(this,"type");this.value=l,this.type=a}static info(l){return new ie(l,we.Info)}static warning(l){return new ie(l,we.Warning)}static error(l){return new ie(l,we.Error)}}const No={key:0},xo=W({__name:"CatalogItem",props:{catalog:{}},emits:["change"],setup(e,{emit:l}){const a=e,s=ve(),o=ca(),t=ut(),d=ct(),{t:n}=q(),c=wt(),f=A(!1),v=A(!1),r=A(!1),u=A(!1),T=A(!1),m=yt(),S=R(()=>{const V=[];return a.catalog.corrupted&&V.push(ie.error(n("explorer.catalog.flag.corrupted"))),a.catalog.isInWarmup&&V.push(ie.warning(n("explorer.catalog.flag.warmingUp"))),V}),I=R(()=>E()),M=R(()=>Array.from(I.value.values())),k=R(()=>a.catalog.entityCollections.sort((V,h)=>V.entityType.localeCompare(h.entityType))),p=A(a.catalog);co(p);const L=A(!1);function D(V){var y;const h=(y=I.value)==null?void 0:y.get(V);h&&h instanceof se&&h.execute()}function E(){const V=c.value!=null&&c.value.apiEnabled(xe.GraphQL),h=!a.catalog.corrupted,y=c.value!=null&&!c.value.readOnly,C=new Map;return C.set(H.OpenEvitaQLConsole,B(H.OpenEvitaQLConsole,"mdi-variable",()=>{s.createTab(o.createNew(m,a.catalog.name))},h)),C.set(H.OpenGraphQLDataAPIConsole,B(H.OpenGraphQLDataAPIConsole,"mdi-graphql",()=>{s.createTab(t.createNew(m,a.catalog.name,De.Data))},h&&V)),C.set(H.OpenGraphQLSchemaAPIConsole,B(H.OpenGraphQLSchemaAPIConsole,"mdi-graphql",()=>{s.createTab(t.createNew(m,a.catalog.name,De.Schema))},h&&V)),C.set(H.ViewSchema,B(H.ViewSchema,"mdi-file-code-outline",()=>{s.createTab(d.createNew(m,new ua(a.catalog.name)))},h)),C.set(H.ModifySubheader,new ye(n("explorer.catalog.subheader.modify"))),C.set(H.RenameCatalog,B(H.RenameCatalog,"mdi-pencil-outline",()=>f.value=!0,h&&y)),C.set(H.ReplaceCatalog,B(H.ReplaceCatalog,"mdi-file-replace-outline",()=>v.value=!0,h&&y)),a.catalog.isInWarmup&&C.set(H.SwitchCatalogToAliveState,B(H.SwitchCatalogToAliveState,"mdi-toggle-switch-outline",()=>r.value=!0,h&&y)),C.set(H.DropCatalog,B(H.DropCatalog,"mdi-delete-outline",()=>u.value=!0,y)),C.set(H.CollectionsSubheader,new ye(n("explorer.catalog.subheader.collections"))),C.set(H.CreateCollection,B(H.CreateCollection,"mdi-plus",()=>T.value=!0,h&&y)),new Map(C)}function B(V,h,y,C=!0){return new se(V,n(`explorer.catalog.actions.${V}`),h,y,void 0,!C)}return(V,h)=>(g(),N(dt,{value:`${_(m).name}|${V.catalog.name}`},{activator:i(({isOpen:y,props:C})=>[b(qe,te(C,{openable:!V.catalog.corrupted,"is-open":y,"prepend-icon":"mdi-menu",loading:L.value,flags:S.value,actions:M.value,"onClick:action":D,class:"text-gray-light"}),{default:i(()=>[$(w(V.catalog.name),1)]),_:2},1040,["openable","is-open","loading","flags","actions"])]),default:i(()=>[V.catalog.corrupted?G("",!0):(g(),U("div",No,[V.catalog.entityCollections.size>0?(g(!0),U(j,{key:0},oe(k.value,y=>(g(),N(wo,{key:y.entityType,"entity-collection":y,onChange:h[0]||(h[0]=C=>l("change"))},null,8,["entity-collection"]))),128)):(g(),N(Vt,{key:1}))])),f.value?(g(),N(So,{key:1,modelValue:f.value,"onUpdate:modelValue":h[1]||(h[1]=y=>f.value=y),connection:_(m),"catalog-name":V.catalog.name,onRename:h[2]||(h[2]=y=>l("change"))},null,8,["modelValue","connection","catalog-name"])):G("",!0),v.value?(g(),N(Co,{key:2,modelValue:v.value,"onUpdate:modelValue":h[3]||(h[3]=y=>v.value=y),connection:_(m),"catalog-name":V.catalog.name,onReplace:h[4]||(h[4]=y=>l("change"))},null,8,["modelValue","connection","catalog-name"])):G("",!0),r.value?(g(),N(ko,{key:3,modelValue:r.value,"onUpdate:modelValue":h[5]||(h[5]=y=>r.value=y),connection:_(m),"catalog-name":V.catalog.name,onSwitch:h[6]||(h[6]=y=>l("change"))},null,8,["modelValue","connection","catalog-name"])):G("",!0),u.value?(g(),N(Vo,{key:4,modelValue:u.value,"onUpdate:modelValue":h[7]||(h[7]=y=>u.value=y),connection:_(m),"catalog-name":V.catalog.name,onDrop:h[8]||(h[8]=y=>l("change"))},null,8,["modelValue","connection","catalog-name"])):G("",!0),T.value?(g(),N(To,{key:5,modelValue:T.value,"onUpdate:modelValue":h[9]||(h[9]=y=>T.value=y),connection:_(m),"catalog-name":V.catalog.name,onCreate:h[10]||(h[10]=y=>l("change"))},null,8,["modelValue","connection","catalog-name"])):G("",!0)]),_:1},8,["value"]))}}),Do=W({__name:"RemoveConnectionDialog",props:{modelValue:{type:Boolean},connection:{}},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,s=ke(),o=K(),{t}=q();async function d(){try{return s.removeConnection(a.connection.id),o.success(t("explorer.connection.remove.notification.connectionRemoved",{connectionName:a.connection.name})),!0}catch(n){return o.error(t("explorer.connection.remove.notification.couldNotRemoveConnection",{connectionName:a.connection.name,reason:n.message})),!1}}return(n,c)=>{const f=ne("I18nT");return g(),N(ae,{"model-value":n.modelValue,dangerous:"",changed:"","confirm-button-icon":"mdi-delete-outline",confirm:d,"onUpdate:modelValue":c[0]||(c[0]=v=>l("update:modelValue",v))},{activator:i(({props:v})=>[he(n.$slots,"activator",mt(vt(v)))]),title:i(()=>[b(f,{keypath:"explorer.connection.remove.title"},{connectionName:i(()=>[x("strong",null,w(n.connection.name),1)]),_:1})]),"prepend-form":i(()=>[$(w(_(t)("explorer.connection.remove.question")),1)]),"confirm-button-body":i(()=>[$(w(_(t)("common.button.remove")),1)]),_:3},8,["model-value"])}}}),Ro=W({__name:"CreateCatalogDialog",props:{modelValue:{type:Boolean},connection:{}},emits:["update:modelValue","create"],setup(e,{emit:l}){const a=e,s=_e(),o=K(),{t}=q(),d=[r=>r!=null&&r.trim().length>0?!0:t("explorer.catalog.create.form.catalogName.validations.required"),async r=>{const u=await s.isCatalogNameValid(a.connection,r);return u==null?!0:t(`explorer.catalog.create.form.catalogName.validations.${u}`)},async r=>await s.isCatalogNameAvailable(a.connection,r)?!0:t("explorer.catalog.create.form.catalogName.validations.notAvailable")],n=A(""),c=R(()=>n.value.length>0);function f(){n.value=""}async function v(){try{return await s.createCatalog(a.connection,n.value),o.success(t("explorer.catalog.create.notification.catalogCreated",{catalogName:n.value})),l("create"),!0}catch(r){return o.error(t("explorer.catalog.create.notification.couldNotCreateCatalog",{catalogName:n.value,reason:r.message})),!1}}return(r,u)=>(g(),N(ae,{"model-value":r.modelValue,changed:c.value,"confirm-button-icon":"mdi-plus",confirm:v,reset:f,"onUpdate:modelValue":u[1]||(u[1]=T=>l("update:modelValue",T))},{title:i(()=>[$(w(_(t)("explorer.catalog.create.title")),1)]),default:i(()=>[b(de,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=T=>n.value=T),label:_(t)("explorer.catalog.create.form.catalogName.label"),rules:d,required:""},null,8,["modelValue","label"])]),"confirm-button-body":i(()=>[$(w(_(t)("common.button.create")),1)]),_:1},8,["model-value","changed"]))}}),Eo={key:0},Bo=W({__name:"ConnectionItem",props:{connection:{}},setup(e){const l=e,a=pt(),s=ve(),o=ke(),t=ut(),d=da(),n=ma(),c=va(),f=pa(),v=K(),{t:r}=q();io(l.connection);const u=A();so(u),D().then();const T=R(()=>{const y=[];return l.connection.preconfigured&&y.push(ie.info(r("explorer.connection.flag.preconfigured"))),y}),m=A();J([()=>l.connection,u],async()=>m.value=await V(),{immediate:!0});const S=R(()=>m.value==null?[]:Array.from(m.value.values())),I=A(),M=A(!1),k=A(!1),p=A(!1);async function L(){M.value=!0;try{I.value=(await o.getCatalogs(l.connection,!0)).sort((y,C)=>y.name.localeCompare(C.name))}catch(y){v.error(r("explorer.connection.notification.couldNotLoadCatalogs",{connectionName:l.connection.name,reason:y.message}))}M.value=!1}async function D(){try{u.value=await o.getServerStatus(l.connection)}catch(y){v.error(y)}}async function E(){await L(),await D()}function B(y){if(m.value==null)return;const C=m.value.get(y);C instanceof se&&C.execute()}async function V(){const y=u.value!=null&&u.value.apiEnabled(xe.GraphQL),C=u.value!=null&&u.value.apiEnabled(xe.Observability),O=!l.connection.preconfigured,Z=!a.readOnly,le=u.value!=null&&!u.value.readOnly,z=new Map;return z.set(F.Refresh,h(F.Refresh,"mdi-refresh",async()=>await E())),z.set(F.OpenGraphQLSystemAPIConsole,h(F.OpenGraphQLSystemAPIConsole,"mdi-graphql",()=>s.createTab(t.createNew(l.connection,"system",De.System)),y)),z.set(F.Detail,h(F.Detail,"mdi-database-outline",()=>s.createTab(d.createNew(l.connection)))),z.set(F.Tasks,h(F.Tasks,"mdi-chart-gantt",()=>{s.createTab(n.createNew(l.connection))},le)),z.set(F.JfrRecordings,h(F.JfrRecordings,"mdi-chart-timeline",()=>{s.createTab(c.createNew(l.connection))},le&&C)),z.set(F.ModifySubheader,new ye(r("explorer.connection.subheader.modify"))),z.set(F.Remove,h(F.Remove,"mdi-delete-outline",()=>k.value=!0,O&&Z)),z.set(F.CatalogsSubheader,new ye(r("explorer.connection.subheader.catalogs"))),z.set(F.CreateCatalog,h(F.CreateCatalog,"mdi-plus",()=>p.value=!0,le)),z.set(F.CatalogBackups,h(F.CatalogBackups,"mdi-cloud-download-outline",()=>{s.createTab(f.createNew(l.connection))},le)),z}function h(y,C,O,Z=!0){return new se(y,r(`explorer.connection.actions.${y}`),C,O,void 0,!Z)}return(y,C)=>(g(),U("div",null,[b(dt,{value:y.connection.name},{activator:i(({isOpen:O,props:Z})=>[b(qe,te(Z,{openable:"","is-open":O,"prepend-icon":"mdi-power-plug-outline",loading:M.value,flags:T.value,actions:S.value,onClick:C[0]||(C[0]=le=>L()),"onClick:action":B}),{default:i(()=>[$(w(y.connection.name),1)]),_:2},1040,["is-open","loading","flags","actions"])]),default:i(()=>[I.value!==void 0?(g(),U("div",Eo,[I.value.size>0?(g(!0),U(j,{key:0},oe(I.value,O=>(g(),N(xo,{key:O.name,catalog:O,onChange:L},null,8,["catalog"]))),128)):(g(),N(Vt,{key:1}))])):G("",!0),k.value?(g(),N(Do,{key:1,modelValue:k.value,"onUpdate:modelValue":C[1]||(C[1]=O=>k.value=O),connection:y.connection},null,8,["modelValue","connection"])):G("",!0),p.value?(g(),N(Ro,{key:2,modelValue:p.value,"onUpdate:modelValue":C[2]||(C[2]=O=>p.value=O),connection:y.connection,onCreate:L},null,8,["modelValue","connection"])):G("",!0)]),_:1},8,["value"])]))}}),$o=W({__name:"ConnectToServerDialog",props:{modelValue:{type:Boolean},connection:{default:void 0}},emits:["update:modelValue"],setup(e,{emit:l}){const a=ke(),s=K(),{t:o}=q(),t=[S=>S?!0:o("explorer.connection.connect.form.connectionName.validations.required"),S=>a.isConnectionExists(S)?o("explorer.connection.connect.form.connectionName.validations.duplicate"):!0],d=[S=>S?!0:o("explorer.connection.connect.form.serverUrl.validations.required"),S=>{try{return new URL(S),!0}catch{return o("explorer.connection.connect.form.serverUrl.validations.invalidUrl")}},async S=>{const I=await u(S);return I==null?(f.value=1,!0):(f.value=2,I)}],n=A(""),c=A(""),f=A(0),v=R(()=>n.value!=null&&n.value.length>0&&c.value!=null&&c.value.length>0),r=R(()=>{switch(f.value){case 0:return"";case 1:return"mdi-check-circle-outline";case 2:return"mdi-close-circle-outline"}});async function u(S){var I,M;try{const k=S.endsWith("/")?S:S+"/",p=await ga.post(`${k}io.evitadb.externalApi.grpc.generated.EvitaManagementService/ServerStatus`,{headers:{"Content-Type":"application/json",Accept:"application/json"},body:"{}"}).json();return p.readiness!=="API_READY"?o("explorer.connection.connect.form.serverUrl.validations.notReady"):((I=p.api.lab)==null?void 0:I.enabled)!==!0?o("explorer.connection.connect.form.serverUrl.validations.labApiMissing"):((M=p.api.gRPC)==null?void 0:M.enabled)!==!0?o("explorer.connection.connect.form.serverUrl.validations.grpcApiMissing"):void 0}catch{return o("explorer.connection.connect.form.serverUrl.validations.unreachable")}}function T(){n.value="",c.value="",f.value=0}async function m(){try{return a.addConnection(fa.user(void 0,n.value,c.value)),s.success(o("explorer.connection.connect.notification.connectionAdded",{connectionName:n.value})),!0}catch(S){return s.error(o("explorer.connection.connect.notification.couldNotAddConnection",{reason:S.message})),!1}}return(S,I)=>(g(),N(ae,{"model-value":S.modelValue,changed:v.value,"confirm-button-icon":"mdi-power-plug-outline",confirm:m,reset:T,"onUpdate:modelValue":I[2]||(I[2]=M=>l("update:modelValue",M))},{activator:i(({props:M})=>[he(S.$slots,"activator",mt(vt({props:M})))]),title:i(()=>[$(w(_(o)("explorer.connection.connect.title")),1)]),default:i(()=>[b(de,{modelValue:n.value,"onUpdate:modelValue":I[0]||(I[0]=M=>n.value=M),label:_(o)("explorer.connection.connect.form.connectionName.label"),placeholder:"evitaDB",rules:t,required:""},null,8,["modelValue","label"]),b(de,{modelValue:c.value,"onUpdate:modelValue":I[1]||(I[1]=M=>c.value=M),label:_(o)("explorer.connection.connect.form.serverUrl.label"),placeholder:"https://{evitadb-server}:5555",hint:_(o)("explorer.connection.connect.form.serverUrl.hint"),required:"",rules:d,"append-inner-icon":r.value},null,8,["modelValue","label","hint","append-inner-icon"])]),"confirm-button-body":i(()=>[$(w(_(o)("explorer.connection.connect.button.connect")),1)]),_:3},8,["model-value","changed"]))}}),Io={key:0,class:"pa-2"},Lo=W({__name:"ConnectionExplorerPanel",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:l}){const a=pt(),s=ke(),{t:o}=q(),t=A(!1),d=R(()=>s.getConnections().sort((n,c)=>n.preconfigured&&!c.preconfigured?-1:c.preconfigured&&!n.preconfigured?1:n.name.localeCompare(c.name)));return(n,c)=>(g(),N(ht,{permanent:"","model-value":n.modelValue,width:325,"onUpdate:modelValue":c[2]||(c[2]=f=>n.$emit("update:modelValue",f)),class:"bg-primary"},{append:i(()=>[_(a).readOnly?G("",!0):(g(),U("div",Io,[b($o,{modelValue:t.value,"onUpdate:modelValue":c[1]||(c[1]=f=>t.value=f)},{activator:i(({props:f})=>[b(Me,te({"prepend-icon":"mdi-power-plug-outline",block:"",variant:"outlined"},f,{onClick:c[0]||(c[0]=v=>t.value=!0)}),{default:i(()=>[$(w(_(o)("explorer.button.connect")),1)]),_:2},1040)]),_:1},8,["modelValue"])]))]),default:i(()=>[b(Te,{density:"compact",nav:""},{default:i(()=>[b(ha,{class:"text-gray-light text-sm-body-2 font-weight-medium"},{default:i(()=>[$(w(_(o)("explorer.title")),1)]),_:1}),(g(!0),U(j,null,oe(d.value,f=>(g(),N(Bo,{key:f.name,connection:f},null,8,["connection"]))),128))]),_:1})]),_:1},8,["model-value"]))}});function Ao(e,l){return e.length<=l?e:e.substring(0,l-3)+"..."}const Mo={class:"loading-screen"},Uo={class:"loading-screen-info"},Po=W({__name:"TabLoadingScreen",setup(e){const{t:l}=q();return(a,s)=>(g(),U("div",Mo,[x("div",Uo,[b(rt,{size:48}),x("span",null,w(_(l)("tab.placeholder.loading")),1)])]))}});const Wo=pe(Po,[["__scopeId","data-v-b23d11da"]]),Ho=W({__name:"TabWindow",props:{component:{},componentProps:{}},emits:["dataUpdate"],setup(e,{emit:l}){const a=A(!1);return(s,o)=>(g(),U(j,null,[(g(),N(wa,null,[ba((g(),N(_a(s.component),te(s.componentProps,{onReady:o[0]||(o[0]=t=>a.value=!0),onDataUpdate:o[1]||(o[1]=t=>l("dataUpdate",t))}),null,16)),[[ya,a.value]])],1024)),a.value?G("",!0):(g(),N(Wo,{key:0}))],64))}}),Go="/lab/logo/evitalab-logo-representative.svg",qo=e=>(it("data-v-70fa2ac3"),e=e(),st(),e),Oo={class:"editor-welcome-screen"},Fo={class:"editor-welcome-screen-hero"},Qo={class:"editor-welcome-screen-hero__header"},zo={class:"editor-welcome-screen-hero__title"},Yo={class:"font-weight-bold mb-2",style:{"font-size":"4.375rem"}},jo={class:"text-white",style:{"font-size":"1rem"}},Ko={class:"text-primary-lightest text-body-2",href:"https://github.com/lukashornych/evitalab/releases",target:"_blank"},Xo={class:"text-gray-light",style:{"font-size":"1rem"}},Jo={class:"editor-welcome-screen-blog"},Zo=["href"],en={class:"editor-welcome-screen-blog-img__wrap"},tn=["src","alt"],an={class:"editor-welcome-screen-blog-item__title"},on={class:"editor-welcome-screen-blog-item__perex"},nn={class:"editor-welcome-screen-blog-item__btn"},ln=qo(()=>x("span",{class:"editor-welcome-screen-hr"},"",-1)),rn={class:"editor-welcome-screen-hero__links"},sn={href:"https://evitadb.io/documentation",target:"_blank"},cn={href:"https://github.com/lukashornych/evitalab/",target:"_blank"},un={href:"https://discord.gg/VsNBWxgmSw",target:"_blank"},dn={href:"https://github.com/lukashornych/evitalab/issues",target:"_blank"},mn=W({__name:"WelcomeScreen",setup(e){const l=Sa(),{t:a}=q(),s=R(()=>{const t="";return t.length===0?"?":t.substring(1)}),o=A([]);return l.getBlogPosts().then(t=>{o.value=t}),(t,d)=>{const n=ne("I18nT");return g(),U("div",Oo,[x("div",Fo,[x("header",Qo,[b(Ie,{width:"240",height:"240","max-width":"240","max-height":"240",alt:"evitaLab Logo",src:Go,class:"evitalab-logo"}),x("div",zo,[x("h1",Yo,w(_(a)("app.name")),1),x("p",jo,[$(w(s.value)+" ",1),x("a",Ko,"("+w(_(a)("welcomeScreen.changelog"))+")",1)]),x("p",Xo,w(_(a)("welcomeScreen.description")),1)])]),x("div",Jo,[(g(!0),U(j,null,oe(o.value,c=>(g(),U("a",{key:c.url,href:c.url,target:"_blank"},[x("span",en,[x("img",{class:"Blog_BlogMotive__72hVr",height:"160",width:"480",src:c.thumbnailUrl,alt:_(a)("welcomeScreen.blog.thumbnail.alt",{title:c.title})},null,8,tn)]),x("span",an,w(c.title),1),x("span",on,[b(Va,{source:c.perex},null,8,["source"])]),x("span",nn,w(_(a)("welcomeScreen.blog.button.read")),1)],8,Zo))),128))]),ln,x("ul",rn,[b(n,{keypath:"welcomeScreen.link.evitaDBDocumentation.text",tag:"li"},{link:i(()=>[x("a",sn,w(_(a)("welcomeScreen.link.evitaDBDocumentation.link")),1)]),_:1}),b(n,{keypath:"welcomeScreen.link.evitaLabGitHub.text",tag:"li"},{link:i(()=>[x("a",cn,w(_(a)("welcomeScreen.link.evitaLabGitHub.link")),1)]),_:1}),b(n,{keypath:"welcomeScreen.link.discord.text",tag:"li"},{link:i(()=>[x("a",un,w(_(a)("welcomeScreen.link.discord.link")),1)]),_:1}),x("li",null,[x("a",dn,w(_(a)("welcomeScreen.link.submitIssue")),1)])])])])}}});const vn=pe(mn,[["__scopeId","data-v-70fa2ac3"]]),pn=["innerHTML"],gn=["innerHTML"],fn=["innerHTML"],hn=W({__name:"TabSharedDialog",props:{tabRequest:{}},emits:["resolve"],setup(e,{emit:l}){const a=e,s=ve(),{t:o}=q();function t(){s.createTab(a.tabRequest),l("resolve")}function d(){l("resolve")}return(n,c)=>(g(),N(ka,{"model-value":!0,"max-width":"36rem","onUpdate:modelValue":d},{title:i(()=>[$(w(_(o)("tabShare.sharedDialog.title")),1)]),default:i(()=>[n.tabRequest.initialData!=null?(g(),U("span",{key:0,innerHTML:_(o)("tabShare.sharedDialog.text.withoutInitialData")},null,8,pn)):(g(),U("span",{key:1,innerHTML:_(o)("tabShare.sharedDialog.text.withInitialData")},null,8,gn)),n.tabRequest.initialData!=null?(g(),N(Ge,{key:2,icon:"mdi-alert-outline",type:"warning",class:"mt-4"},{default:i(()=>[x("span",{innerHTML:_(o)("tabShare.sharedDialog.warning.potentiallyUnsafe")},null,8,fn)]),_:1})):G("",!0)]),"reject-button":i(()=>[b(Ca,{onReject:d},{default:i(()=>[$(w(_(o)("tabShare.sharedDialog.button.reject")),1)]),_:1})]),"confirm-button":i(()=>[b(Ta,{icon:"mdi-check",onConfirm:t},{default:i(()=>[$(w(_(o)("tabShare.sharedDialog.button.accept")),1)]),_:1})]),_:1}))}}),bn={key:1,style:{position:"relative"}},yn=W({__name:"WorkspaceTabWindowList",setup(e){const l=Na(),a=K(),s=Le(),{t:o}=q(),t=ve(),d=xa(),n=Da(),c=A(!1),f=A(!1),v=A(),r=A(t.getTabDefinitions());J(r,()=>{const p=t.getTheNewTab();p&&(u.value=p.id,t.markTabAsVisited(p.id))},{deep:!0});const u=A();J(u,(p,L)=>{p!=null?s.setContext(p):L!=null&&s.resetActivatedContext()});function T(p){if(u.value==null)return;let D=t.getTabIndex(u.value)+p;D<0?D=r.value.length-1:D>=r.value.length&&(D=0),u.value=r.value[D].id}function m(p){const L=r.value.length,D=r.value.findIndex(B=>B.id===u.value),E=r.value.findIndex(B=>B.id===p);t.destroyTab(p),s.deleteContext(p),r.value.length===0?u.value=null:E===D&&E===L-1?u.value=r.value[E-1].id:E===D&&E<L-1&&(u.value=r.value[E].id)}async function S(){const p=l.query.demoSnippetRequest;if(p!=null)try{return await d.resolve(p)}catch(L){a.error(L)}}async function I(){const p=l.query.sharedTab;if(p!=null)try{return await n.resolve(p)}catch(L){a.error(L)}}function M(){try{let p=!1;t.restoreTabsFromLastSession()&&(p=!0),t.restoreTabHistory()&&(p=!0),p&&a.info("Your last session has been restored.")}catch(p){console.error(p),a.warning("Failed to fully restore your last session.")}}function k(){t.storeOpenedTabs(),t.storeTabHistory()}return S().then(p=>(p!=null&&(c.value=!0,t.createTab(p)),I())).then(p=>{p!=null&&(c.value=!0,v.value=p,f.value=!0),c.value||M()}),me(()=>{s.bindGlobal(Q.System_Editor_PreviousTab,()=>T(-1)),s.bindGlobal(Q.System_Editor_NextTab,()=>T(1)),s.bindGlobal(Q.System_Editor_CloseTab,()=>{u.value!=null&&m(u.value)}),s.bindGlobal(Q.System_Editor_CloseAllTabs,()=>t.destroyAllTabs())}),Ae(()=>{s.unbindGlobal(Q.System_Editor_PreviousTab),s.unbindGlobal(Q.System_Editor_NextTab),s.unbindGlobal(Q.System_Editor_CloseTab),s.unbindGlobal(Q.System_Editor_CloseAllTabs)}),window.addEventListener("beforeunload",()=>{c.value||k()}),(p,L)=>(g(),U(j,null,[r.value.length>0?(g(),N(Ua,{key:0,density:"compact",elevation:"0"},{default:i(()=>[b(Ra,{modelValue:u.value,"onUpdate:modelValue":L[0]||(L[0]=D=>u.value=D)},{default:i(()=>[(g(!0),U(j,null,oe(r.value,D=>(g(),N(Ba,{key:D.id,value:D.id,"prepend-icon":D.icon,onMousedown:Ne(E=>m(D.id),["middle"]),class:"lab-tab"},{default:i(()=>[x("span",null,[$(w(_(Ao)(D.title,30))+" ",1),D.title.length>30?(g(),N(be,{key:0,activator:"parent"},{default:i(()=>[$(w(D.title),1)]),_:2},1024)):G("",!0)]),b(Me,{icon:"",variant:"plain",density:"compact",class:"ml-3",onClick:Ne(E=>m(D.id),["stop"])},{default:i(()=>[b(ue,null,{default:i(()=>[$("mdi-close")]),_:1}),b(Ue,{command:_(Q).System_Editor_CloseTab},{default:i(()=>[$(w(_(o)("tab.button.closeTab")),1)]),_:1},8,["command"])]),_:2},1032,["onClick"])]),_:2},1032,["value","prepend-icon","onMousedown"]))),128))]),_:1},8,["modelValue"])]),_:1})):G("",!0),b(Wa,{scrollable:!1,class:"lab-editor"},{default:i(()=>[r.value.length>0?(g(),N(Ea,{key:0,modelValue:u.value,"onUpdate:modelValue":L[1]||(L[1]=D=>u.value=D)},{default:i(()=>[(g(!0),U(j,null,oe(r.value,D=>(g(),N($a,{key:D.id,value:D.id,transition:!1,"reverse-transition":!1,class:"window-item"},{default:i(()=>[b(Ho,{component:D.component,"component-props":D.componentProps(),onDataUpdate:E=>_(t).replaceTabData(D.id,E)},null,8,["component","component-props","onDataUpdate"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):(g(),U("div",bn,[b(vn)]))]),_:1}),v.value?(g(),N(hn,{key:1,"tab-request":v.value,onResolve:L[2]||(L[2]=D=>v.value=void 0)},null,8,["tab-request"])):G("",!0)],64))}});const _n=pe(yn,[["__scopeId","data-v-d87f82ca"]]),Cn=W({__name:"MainView",setup(e){const l=A(re.Explorer);return(a,s)=>(g(),U(j,null,[b(ro,{panel:l.value,"onUpdate:panel":s[0]||(s[0]=o=>l.value=o)},null,8,["panel"]),b(Lo,{"model-value":l.value===_(re).Explorer},null,8,["model-value"]),b(_n)],64))}});export{Cn as default};
