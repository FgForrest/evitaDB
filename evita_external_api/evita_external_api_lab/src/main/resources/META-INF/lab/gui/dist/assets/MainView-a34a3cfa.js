var St=Object.defineProperty;var Tt=(e,s,a)=>s in e?St(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a;var Te=(e,s,a)=>(Tt(e,typeof s!="symbol"?s+"":s,a),a);import{p as ye,f as E,s as Y,h as I,i as kt,j as K,k as ce,l as xe,n as Ct,g as Ne,q as Ke,t as me,v as De,x as be,c as Re,V as Oe,d as b,y as J,z as Xe,m as Je,A as xt,B as Ze,C as Nt,D as Dt,E as Rt,F as Ut,G as It,H as Et,I as Bt,J as Lt,K as $t,a as At,u as Mt,b as qt,L as Pt,M as Qe,N as Ht,O as Wt,P as Gt,Q as Ft,R as Ot,S as Qt,T as jt,U as Ue,W as zt,X as Yt,Y as Q,Z as Kt,$ as Xt,a0 as q,a1 as Ie,a2 as ue,a3 as Jt,a4 as z,a5 as W,a6 as O,a7 as Ee,o as h,e as D,w as i,a8 as _e,a9 as ae,aa as C,ab as Be,ac as Zt,ad as w,ae as Le,af as H,ag as we,ah as et,ai as tt,_ as de,aj as ne,ak as ea,al as R,am as y,an as A,ao as le,ap as $e,aq as se,ar as at,as as ot,at as nt,au as ke,av as lt,aw as rt,ax as Ae,r as te,ay as Z,az as ee,aA as ta,aB as it,aC as Ve,aD as aa,aE as ve,aF as oa,aG as Me,aH as na,aI as la,aJ as st,aK as ra,aL as ct,aM as Ce,aN as ia,aO as Se,aP as ut,aQ as dt,aR as sa,aS as ca,aT as ua,aU as fe,aV as da,aW as ma,aX as pa,aY as va,aZ as ga,a_ as fa,a$ as ba,b0 as ha,b1 as je,b2 as ya,b3 as _a,b4 as wa,b5 as Va,b6 as Sa,b7 as Ta,b8 as ka,b9 as Ca,ba as xa,bb as Na}from"./index-823fb701.js";import{a as mt,u as pt,b as Da}from"./layout-61d9e63e.js";const Ra=ye({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ua(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:a}=s;let u=0,o=0;const t=E(null),p=Y(0),r=Y(0),g=Y(0),_=Y(!1),v=Y(!1),n=I(()=>Number(e.scrollThreshold)),l=I(()=>kt((n.value-p.value)/n.value||0)),T=()=>{const f=t.value;if(!f||a&&!a.value)return;u=p.value,p.value="window"in f?f.pageYOffset:f.scrollTop;const k=f instanceof Window?document.documentElement.scrollHeight:f.scrollHeight;if(o!==k){o=k;return}v.value=p.value<u,g.value=Math.abs(p.value-n.value)};return K(v,()=>{r.value=r.value||p.value}),K(_,()=>{r.value=0}),ce(()=>{K(()=>e.scrollTarget,f=>{var B;const k=f?document.querySelector(f):window;k&&k!==t.value&&((B=t.value)==null||B.removeEventListener("scroll",T),t.value=k,t.value.addEventListener("scroll",T,{passive:!0}))},{immediate:!0})}),xe(()=>{var f;(f=t.value)==null||f.removeEventListener("scroll",T)}),a&&K(a,T,{immediate:!0}),{scrollThreshold:n,currentScroll:p,currentThreshold:g,isScrollActive:_,scrollRatio:l,isScrollingUp:v,savedScroll:r}}const Ia=ye({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Ct(),...mt(),...Ra(),height:{type:[Number,String],default:64}},"VAppBar"),Ea=Ne()({name:"VAppBar",props:Ia(),emits:{"update:modelValue":e=>!0},setup(e,s){let{slots:a}=s;const u=E(),o=Ke(e,"modelValue"),t=I(()=>{var V;const x=new Set(((V=e.scrollBehavior)==null?void 0:V.split(" "))??[]);return{hide:x.has("hide"),fullyHide:x.has("fully-hide"),inverted:x.has("inverted"),collapse:x.has("collapse"),elevate:x.has("elevate"),fadeImage:x.has("fade-image")}}),p=I(()=>{const x=t.value;return x.hide||x.fullyHide||x.inverted||x.collapse||x.elevate||x.fadeImage||!o.value}),{currentScroll:r,scrollThreshold:g,isScrollingUp:_,scrollRatio:v}=Ua(e,{canScroll:p}),n=I(()=>t.value.hide||t.value.fullyHide),l=I(()=>e.collapse||t.value.collapse&&(t.value.inverted?v.value>0:v.value===0)),T=I(()=>e.flat||t.value.fullyHide&&!o.value||t.value.elevate&&(t.value.inverted?r.value>0:r.value===0)),f=I(()=>t.value.fadeImage?t.value.inverted?1-v.value:v.value:void 0),k=I(()=>{var U,c;if(t.value.hide&&t.value.inverted)return 0;const x=((U=u.value)==null?void 0:U.contentHeight)??0,V=((c=u.value)==null?void 0:c.extensionHeight)??0;return n.value?r.value<g.value||t.value.fullyHide?x+V:x:x+V});me(I(()=>!!e.scrollBehavior),()=>{Xe(()=>{n.value?t.value.inverted?o.value=r.value>g.value:o.value=_.value||r.value<g.value:o.value=!0})});const{ssrBootStyles:B}=De(),{layoutItemStyles:L}=pt({id:e.name,order:I(()=>parseInt(e.order,10)),position:be(e,"location"),layoutSize:k,elementSize:Y(void 0),active:o,absolute:be(e,"absolute")});return Re(()=>{const x=Oe.filterProps(e);return b(Oe,J({ref:u,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...L.value,"--v-toolbar-image-opacity":f.value,height:void 0,...B.value},e.style]},x,{collapse:l.value,flat:T.value}),a)}),{}}});const Ba=ye({scrollable:Boolean,...Je(),...xt(),...Ze({tag:"main"})},"VMain"),La=Ne()({name:"VMain",props:Ba(),setup(e,s){let{slots:a}=s;const{dimensionStyles:u}=Nt(e),{mainStyles:o}=Da(),{ssrBootStyles:t}=De();return Re(()=>b(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[o.value,t.value,u.value,e.style]},{default:()=>{var p,r;return[e.scrollable?b("div",{class:"v-main__scroller"},[(p=a.default)==null?void 0:p.call(a)]):(r=a.default)==null?void 0:r.call(a)]}})),{}}});function $a(e){let{rootEl:s,isSticky:a,layoutItemStyles:u}=e;const o=Y(!1),t=Y(0),p=I(()=>{const _=typeof o.value=="boolean"?"top":o.value;return[a.value?{top:"auto",bottom:"auto",height:void 0}:void 0,o.value?{[_]:Dt(t.value)}:{top:u.value.top}]});ce(()=>{K(a,_=>{_?window.addEventListener("scroll",g,{passive:!0}):window.removeEventListener("scroll",g)},{immediate:!0})}),xe(()=>{window.removeEventListener("scroll",g)});let r=0;function g(){const _=r>window.scrollY?"up":"down",v=s.value.getBoundingClientRect(),n=parseFloat(u.value.top??0),l=window.scrollY-Math.max(0,t.value-n),T=v.height+Math.max(t.value,n)-window.scrollY-window.innerHeight,f=parseFloat(getComputedStyle(s.value).getPropertyValue("--v-body-scroll-y"))||0;v.height<window.innerHeight-n?(o.value="top",t.value=n):_==="up"&&o.value==="bottom"||_==="down"&&o.value==="top"?(t.value=window.scrollY+v.top-f,o.value=!0):_==="down"&&T<=0?(t.value=0,o.value="bottom"):_==="up"&&l<=0&&(f?o.value!=="top"&&(t.value=-l+f+n,o.value="top"):(t.value=v.top+l,o.value="top")),r=window.scrollY}return{isStuck:o,stickyStyles:p}}const Aa=100,Ma=20;function ze(e){const s=1.41421356237;return(e<0?-1:1)*Math.sqrt(Math.abs(e))*s}function Ye(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let s=0;for(let a=e.length-1;a>0;a--){if(e[a].t===e[a-1].t)continue;const u=ze(s),o=(e[a].d-e[a-1].d)/(e[a].t-e[a-1].t);s+=(o-u)*Math.abs(o),a===e.length-1&&(s*=.5)}return ze(s)*1e3}function qa(){const e={};function s(o){Array.from(o.changedTouches).forEach(t=>{(e[t.identifier]??(e[t.identifier]=new Rt(Ma))).push([o.timeStamp,t])})}function a(o){Array.from(o.changedTouches).forEach(t=>{delete e[t.identifier]})}function u(o){var _;const t=(_=e[o])==null?void 0:_.values().reverse();if(!t)throw new Error(`No samples for touch id ${o}`);const p=t[0],r=[],g=[];for(const v of t){if(p[0]-v[0]>Aa)break;r.push({t:v[0],d:v[1].clientX}),g.push({t:v[0],d:v[1].clientY})}return{x:Ye(r),y:Ye(g),get direction(){const{x:v,y:n}=this,[l,T]=[Math.abs(v),Math.abs(n)];return l>T&&v>=0?"right":l>T&&v<=0?"left":T>l&&n>=0?"down":T>l&&n<=0?"up":Pa()}}}return{addMovement:s,endTouch:a,getVelocity:u}}function Pa(){throw new Error}function Ha(e){let{el:s,isActive:a,isTemporary:u,width:o,touchless:t,position:p}=e;ce(()=>{window.addEventListener("touchstart",x,{passive:!0}),window.addEventListener("touchmove",V,{passive:!1}),window.addEventListener("touchend",U,{passive:!0})}),xe(()=>{window.removeEventListener("touchstart",x),window.removeEventListener("touchmove",V),window.removeEventListener("touchend",U)});const r=I(()=>["left","right"].includes(p.value)),{addMovement:g,endTouch:_,getVelocity:v}=qa();let n=!1;const l=Y(!1),T=Y(0),f=Y(0);let k;function B(d,m){return(p.value==="left"?d:p.value==="right"?document.documentElement.clientWidth-d:p.value==="top"?d:p.value==="bottom"?document.documentElement.clientHeight-d:ie())-(m?o.value:0)}function L(d){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const S=p.value==="left"?(d-f.value)/o.value:p.value==="right"?(document.documentElement.clientWidth-d-f.value)/o.value:p.value==="top"?(d-f.value)/o.value:p.value==="bottom"?(document.documentElement.clientHeight-d-f.value)/o.value:ie();return m?Math.max(0,Math.min(1,S)):S}function x(d){if(t.value)return;const m=d.changedTouches[0].clientX,S=d.changedTouches[0].clientY,N=25,P=p.value==="left"?m<N:p.value==="right"?m>document.documentElement.clientWidth-N:p.value==="top"?S<N:p.value==="bottom"?S>document.documentElement.clientHeight-N:ie(),G=a.value&&(p.value==="left"?m<o.value:p.value==="right"?m>document.documentElement.clientWidth-o.value:p.value==="top"?S<o.value:p.value==="bottom"?S>document.documentElement.clientHeight-o.value:ie());(P||G||a.value&&u.value)&&(k=[m,S],f.value=B(r.value?m:S,a.value),T.value=L(r.value?m:S),n=f.value>-20&&f.value<80,_(d),g(d))}function V(d){const m=d.changedTouches[0].clientX,S=d.changedTouches[0].clientY;if(n){if(!d.cancelable){n=!1;return}const P=Math.abs(m-k[0]),G=Math.abs(S-k[1]);(r.value?P>G&&P>3:G>P&&G>3)?(l.value=!0,n=!1):(r.value?G:P)>3&&(n=!1)}if(!l.value)return;d.preventDefault(),g(d);const N=L(r.value?m:S,!1);T.value=Math.max(0,Math.min(1,N)),N>1?f.value=B(r.value?m:S,!0):N<0&&(f.value=B(r.value?m:S,!1))}function U(d){if(n=!1,!l.value)return;g(d),l.value=!1;const m=v(d.changedTouches[0].identifier),S=Math.abs(m.x),N=Math.abs(m.y);(r.value?S>N&&S>400:N>S&&N>3)?a.value=m.direction===({left:"right",right:"left",top:"down",bottom:"up"}[p.value]||ie()):a.value=T.value>.5}const c=I(()=>l.value?{transform:p.value==="left"?`translateX(calc(-100% + ${T.value*o.value}px))`:p.value==="right"?`translateX(calc(100% - ${T.value*o.value}px))`:p.value==="top"?`translateY(calc(-100% + ${T.value*o.value}px))`:p.value==="bottom"?`translateY(calc(100% - ${T.value*o.value}px))`:ie(),transition:"none"}:void 0);return me(l,()=>{var S,N;const d=((S=s.value)==null?void 0:S.style.transform)??null,m=((N=s.value)==null?void 0:N.style.transition)??null;Xe(()=>{var P,G,re,ge;(G=s.value)==null||G.style.setProperty("transform",((P=c.value)==null?void 0:P.transform)||"none"),(ge=s.value)==null||ge.style.setProperty("transition",((re=c.value)==null?void 0:re.transition)||null)}),Ut(()=>{var P,G;(P=s.value)==null||P.style.setProperty("transform",d),(G=s.value)==null||G.style.setProperty("transition",m)})}),{isDragging:l,dragProgress:T,dragStyles:c}}function ie(){throw new Error}const Wa=["start","end","left","right","top","bottom"],Ga=ye({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>Wa.includes(e)},sticky:Boolean,...It(),...Je(),...Et(),...Bt({mobile:null}),...Lt(),...mt(),...$t(),...Ze({tag:"nav"}),...At()},"VNavigationDrawer"),vt=Ne()({name:"VNavigationDrawer",props:Ga(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,s){let{attrs:a,emit:u,slots:o}=s;const{isRtl:t}=Mt(),{themeClasses:p}=qt(e),{borderClasses:r}=Pt(e),{backgroundColorClasses:g,backgroundColorStyles:_}=Qe(be(e,"color")),{elevationClasses:v}=Ht(e),{displayClasses:n,mobile:l}=Wt(e),{roundedClasses:T}=Gt(e),f=Ft(),k=Ke(e,"modelValue",null,j=>!!j),{ssrBootStyles:B}=De(),{scopeId:L}=Ot(),x=E(),V=Y(!1),{runOpenDelay:U,runCloseDelay:c}=Kt(e,j=>{V.value=j}),d=I(()=>e.rail&&e.expandOnHover&&V.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),m=I(()=>Qt(e.location,t.value)),S=I(()=>e.persistent),N=I(()=>!e.permanent&&(l.value||e.temporary)),P=I(()=>e.sticky&&!N.value&&m.value!=="bottom");me(()=>e.expandOnHover&&e.rail!=null,()=>{K(V,j=>u("update:rail",!j))}),me(()=>!e.disableResizeWatcher,()=>{K(N,j=>!e.permanent&&Xt(()=>k.value=!j))}),me(()=>!e.disableRouteWatcher&&!!f,()=>{K(f.currentRoute,()=>N.value&&(k.value=!1))}),K(()=>e.permanent,j=>{j&&(k.value=!0)}),e.modelValue==null&&!N.value&&(k.value=e.permanent||!l.value);const{isDragging:G,dragProgress:re}=Ha({el:x,isActive:k,isTemporary:N,width:d,touchless:be(e,"touchless"),position:m}),ge=I(()=>{const j=N.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):d.value;return G.value?j*re.value:j}),yt=I(()=>["top","bottom"].includes(e.location)?0:d.value),{layoutItemStyles:qe,layoutItemScrimStyles:_t}=pt({id:e.name,order:I(()=>parseInt(e.order,10)),position:m,layoutSize:ge,elementSize:yt,active:I(()=>k.value||G.value),disableTransitions:I(()=>G.value),absolute:I(()=>e.absolute||P.value&&typeof Pe.value!="string")}),{isStuck:Pe,stickyStyles:wt}=$a({rootEl:x,isSticky:P,layoutItemStyles:qe}),He=Qe(I(()=>typeof e.scrim=="string"?e.scrim:null)),Vt=I(()=>({...G.value?{opacity:re.value*.2,transition:"none"}:void 0,..._t.value}));return jt({VList:{bgColor:"transparent"}}),Re(()=>{const j=o.image||e.image;return b(Q,null,[b(e.tag,J({ref:x,onMouseenter:U,onMouseleave:c,class:["v-navigation-drawer",`v-navigation-drawer--${m.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":V.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":N.value,"v-navigation-drawer--persistent":S.value,"v-navigation-drawer--active":k.value,"v-navigation-drawer--sticky":P.value},p.value,g.value,r.value,n.value,v.value,T.value,e.class],style:[_.value,qe.value,B.value,wt.value,e.style,["top","bottom"].includes(m.value)?{height:"auto"}:{}]},L,a),{default:()=>{var We,Ge,Fe;return[j&&b("div",{key:"image",class:"v-navigation-drawer__img"},[o.image?b(zt,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},o.image):b(Ue,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),o.prepend&&b("div",{class:"v-navigation-drawer__prepend"},[(We=o.prepend)==null?void 0:We.call(o)]),b("div",{class:"v-navigation-drawer__content"},[(Ge=o.default)==null?void 0:Ge.call(o)]),o.append&&b("div",{class:"v-navigation-drawer__append"},[(Fe=o.append)==null?void 0:Fe.call(o)])]}}),b(Yt,{name:"fade-transition"},{default:()=>[N.value&&(G.value||k.value)&&!!e.scrim&&b("div",J({class:["v-navigation-drawer__scrim",He.backgroundColorClasses.value],style:[Vt.value,He.backgroundColorStyles.value],onClick:()=>{S.value||(k.value=!1)}},L),null)]})])}),{isStuck:Pe}}});var oe=(e=>(e.Explorer="explorer",e))(oe||{});const Fa="/lab/logo/evitalab-logo-mini.png?raw=true",Oa="/lab/documentation.svg",Qa="/lab/discord.svg";var $=(e=>(e.Keymap="keymap",e.EvitaLabGithub="evitaLabGithub",e.DiscussEvitaLab="discussEvitaLab",e.ReportEvitaLabIssue="reportEvitaLabIssue",e.EvitaDBDocumentation="evitaDBDocumentation",e.EvitaDBGithub="evitaDBGithub",e.DiscussEvitaDB="discussEvitaDB",e.ReportEvitaDBIssue="reportEvitaDBIssue",e))($||{});const ja=q({__name:"ManageMenu",setup(e){const s=Ie(),a=ue(),u=Jt(),o=z(),{t}=W(),p=[{type:"subheader",title:t("panel.manage.manage.title")},{title:t(`panel.manage.manage.item.${$.Keymap}`),value:$.Keymap,command:O.System_Keymap,props:{prependIcon:"mdi-keyboard-outline"}},{type:"subheader",title:t("panel.manage.evitaLabHelp.title")},{title:t(`panel.manage.evitaLabHelp.item.${$.EvitaLabGithub}`),value:$.EvitaLabGithub,props:{prependIcon:"mdi-github"}},{title:t(`panel.manage.evitaLabHelp.item.${$.DiscussEvitaLab}`),value:$.DiscussEvitaLab,props:{prependIcon:"mdi-forum-outline"}},{title:t(`panel.manage.evitaLabHelp.item.${$.ReportEvitaLabIssue}`),value:$.ReportEvitaLabIssue,props:{prependIcon:"mdi-bug"}},{type:"subheader",title:t("panel.manage.evitaDBHelp.title")},{title:t(`panel.manage.evitaDBHelp.item.${$.EvitaDBDocumentation}`),value:$.EvitaDBDocumentation,props:{prependIcon:"mdi-book-open-variant"}},{title:t(`panel.manage.evitaDBHelp.item.${$.EvitaDBGithub}`),value:$.EvitaDBGithub,props:{prependIcon:"mdi-github"}},{title:t(`panel.manage.evitaDBHelp.item.${$.DiscussEvitaDB}`),value:$.DiscussEvitaDB,props:{prependIcon:"mdi-forum-outline"}},{title:t(`panel.manage.evitaDBHelp.item.${$.ReportEvitaDBIssue}`),value:$.ReportEvitaDBIssue,props:{prependIcon:"mdi-bug"}}];function r(){a.createTab(u.createNew())}function g(_){if(_.length>0)switch(_[0]){case $.Keymap:r();break;case $.EvitaLabGithub:window.open("https://github.com/lukashornych/evitalab","_blank");break;case $.DiscussEvitaLab:window.open("https://discord.gg/VsNBWxgmSw","_blank");break;case $.ReportEvitaLabIssue:window.open("https://github.com/lukashornych/evitalab/issues/new","_blank");break;case $.EvitaDBDocumentation:window.open("https://evitadb.io/documentation","_blank");break;case $.EvitaDBGithub:window.open("https://github.com/FgForrest/evitaDB","_blank");break;case $.DiscussEvitaDB:window.open("https://discord.gg/VsNBWxgmSw","_blank");break;case $.ReportEvitaDBIssue:window.open("https://github.com/FgForrest/evitaDB/issues/new","_blank");break;default:o.error(new tt(`Unknown manage option ${_[0]}`))}}return ce(()=>{s.bindGlobal(O.System_Keymap,r)}),Ee(()=>{s.unbindGlobal(O.System_Keymap)}),(_,v)=>(h(),D(et,null,{activator:i(({props:n})=>[b(Be,J(n,{icon:"",variant:"text",class:"manage-button"}),{default:i(()=>[_e(_.$slots,"default",{},void 0,!0),b(ae,{activator:"parent"},{default:i(()=>[C(" Manage evitaLab ")]),_:1})]),_:2},1040)]),default:i(()=>[b(we,{items:p,"onUpdate:selected":g},{title:i(({item:n})=>[b(Zt,null,{default:i(()=>[C(w(n.title)+" ",1),n.command!=null?(h(),D(Le,{key:0,command:n.command},{default:i(()=>[C(w(n.title),1)]),_:2},1032,["command"])):H("",!0)]),_:2},1024)]),_:1})]),_:3}))}});const za=de(ja,[["__scopeId","data-v-d2e32f29"]]),Ya={class:"lab-nav-links"},Ka={href:"https://evitadb.io/documentation",target:"_blank"},Xa=["alt"],Ja={href:"https://discord.gg/VsNBWxgmSw",target:"_blank"},Za=["alt"],eo=q({__name:"WorkspacePanel",props:{panel:{}},emits:["update:panel"],setup(e,{emit:s}){const a=e,u=Ie(),{t:o}=W(),t=p();function p(){const g=[];return g.push(new ne(oe.Explorer,o(`panel.item.${oe.Explorer}`),"mdi-connection",()=>{},O.System_Panels_ConnectionsExplorer)),g}function r(g){g.value?s("update:panel",g.id):s("update:panel",null)}return ce(()=>{u.bindGlobal(O.System_Panels_ConnectionsExplorer,()=>{a.panel===oe.Explorer?s("update:panel",null):s("update:panel",oe.Explorer)})}),Ee(()=>{u.unbindGlobal(O.System_Panels_ConnectionsExplorer)}),(g,_)=>(h(),D(vt,{permanent:"",rail:"",class:"bg-primary-dark"},{prepend:i(()=>[b(za,null,{default:i(()=>[b(ea,{size:"30px"},{default:i(()=>[b(Ue,{alt:"evitaLab Logo",width:"30px",height:"30px",src:Fa})]),_:1})]),_:1})]),append:i(()=>[R("ul",Ya,[R("li",null,[R("a",Ka,[R("img",{src:Oa,alt:y(o)("panel.link.evitaDBDocumentation.icon.alt")},null,8,Xa),b(ae,{activator:"parent"},{default:i(()=>[C(w(y(o)("panel.link.evitaDBDocumentation.tooltip")),1)]),_:1})])]),R("li",null,[R("a",Ja,[R("img",{src:Qa,alt:y(o)("panel.link.discord.icon.alt")},null,8,Za),b(ae,{activator:"parent"},{default:i(()=>[C(w(y(o)("panel.link.discord.tooltip")),1)]),_:1})])])])]),default:i(()=>[b(we,{density:"compact",nav:"",selected:[g.panel],"onClick:select":r,class:"navigation-items"},{default:i(()=>[(h(!0),A(Q,null,le(y(t),v=>(h(),D($e,{key:v.value,value:v.value},{default:i(()=>[b(se,null,{default:i(()=>[C(w(v.prependIcon),1)]),_:2},1024),b(Le,{command:v.command},{default:i(()=>[C(w(v.title),1)]),_:2},1032,["command"])]),_:2},1032,["value"]))),128))]),_:1},8,["selected"])]),_:1}))}});const to=de(eo,[["__scopeId","data-v-d2d1dd7a"]]);var F=(e=>(e.Refresh="refresh",e.OpenGraphQLSystemAPIConsole="openGraphQLSystemApiConsole",e.Edit="edit",e.Remove="remove",e.Detail="detail",e.Tasks="tasks",e.JfrRecordings="jfrRecordings",e.CatalogsSubheader="catalogsSubheader",e.CreateCatalog="createCatalog",e))(F||{});const gt=Symbol("connection");function ao(e){at(gt,e)}function ft(){return ot(gt)}const bt=Symbol("catalog");function oo(e){at(bt,e)}function no(){return ot(bt)}const lo=e=>(lt("data-v-4e340cfb"),e=e(),rt(),e),ro={class:"tree-view-item__content"},io={class:"text-truncate"},so=lo(()=>R("span",{class:"text-disabled"}," No items found ",-1)),co=q({__name:"VTreeViewItem",props:{openable:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},prependIcon:{},loading:{type:Boolean,default:!1},actions:{default:()=>[]}},emits:["click:action"],setup(e,{emit:s}){const a=e,u=E(!1);function o(){a.actions&&a.actions.length>0&&(u.value=!0)}return(t,p)=>(h(),D($e,{"prepend-icon":null,"append-icon":null,onContextmenu:ke(o,["prevent"])},{default:i(()=>[R("div",ro,[t.openable?(h(),D(se,{key:0},{default:i(()=>[C(w(t.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1})):(h(),D(se,{key:1})),t.loading?(h(),D(nt,{key:2})):(h(),D(se,{key:3},{default:i(()=>[C(w(t.prependIcon),1)]),_:1})),R("span",io,[_e(t.$slots,"default",{},()=>[so],!0)]),t.actions&&t.actions.length>0?(h(),D(et,{key:4,"menu-items":t.actions,modelValue:u.value,"onUpdate:modelValue":p[1]||(p[1]=r=>u.value=r)},{activator:i(({props:r})=>[b(se,J(r,{class:"text-gray-light"}),{default:i(()=>[C(" mdi-dots-vertical ")]),_:2},1040)]),default:i(()=>[b(we,{density:"compact",items:t.actions,"onClick:select":p[0]||(p[0]=r=>t.$emit("click:action",r.id))},null,8,["items"])]),_:1},8,["menu-items","modelValue"])):H("",!0)])]),_:3},8,["onContextmenu"]))}});const he=de(co,[["__scopeId","data-v-4e340cfb"]]);var M=(e=>(e.OpenEvitaQLConsole="openEvitaQLConsole",e.OpenGraphQLDataAPIConsole="openGraphQLDataApiConsole",e.OpenGraphQLSchemaAPIConsole="openGraphQLSchemaApiConsole",e.ViewSchema="viewSchema",e.DropCatalog="dropCatalog",e.RenameCatalog="renameCatalog",e.ReplaceCatalog="replaceCatalog",e.SwitchCatalogToAliveState="switchCatalogToAliveState",e.ModifySubheader="modifySubheader",e.CollectionsSubheader="collectionsSubheader",e.JobsSubheader="jobsSubheader",e.CreateCollection="createCollection",e.BackupSubheader="backupSubheader",e.Backup="backup",e.Jobs="jobs",e))(M||{});const uo={class:"pl-8 text-disabled"},ht=q({__name:"VTreeViewEmptyItem",setup(e){const{t:s}=W();return(a,u)=>(h(),D($e,null,{default:i(()=>[R("span",uo,w(y(s)("common.list.empty")),1)]),_:1}))}});var X=(e=>(e.ViewEntities="viewEntities",e.ViewSchema="viewSchema",e.ModifySubheader="modifySubheader",e.DropCollection="dropCollection",e.RenameCollection="renameCollection",e))(X||{});class pe{constructor(s){Te(this,"title");Te(this,"type","subheader");this.title=s}}const mo=q({__name:"DropCollectionDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{},entityType:{}},emits:["update:modelValue","drop"],setup(e,{emit:s}){const a=e,u=Ae(),o=z(),{t}=W();async function p(){try{return await u.dropCollection(a.connection,a.catalogName,a.entityType)?(o.success(t("explorer.collection.drop.notification.collectionDropped",{entityType:a.entityType})),s("drop")):o.info(t("explorer.collection.drop.notification.collectionNotDropped",{entityType:a.entityType})),!0}catch(r){return o.error(t("explorer.collection.drop.notification.couldNotDropCollection",{entityType:a.entityType,reason:r.message})),!1}}return(r,g)=>{const _=te("I18nT");return h(),D(Z,{"model-value":r.modelValue,dangerous:"",changed:"","confirm-button-icon":"mdi-delete-outline",confirm:p,"onUpdate:modelValue":g[0]||(g[0]=v=>s("update:modelValue",v))},{title:i(()=>[C(w(y(t)("explorer.collection.drop.title")),1)]),"prepend-form":i(()=>[b(_,{keypath:"explorer.collection.drop.question"},{entityType:i(()=>[R("strong",null,w(r.entityType),1)]),_:1})]),"confirm-button-body":i(()=>[C(w(y(t)("common.button.drop")),1)]),_:1},8,["model-value"])}}}),po=q({__name:"RenameCollectionDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{},entityType:{}},emits:["update:modelValue","rename"],setup(e,{emit:s}){const a=e,u=Ae(),o=z(),{t}=W(),p=[n=>n!=null&&n.trim().length>0?!0:t("explorer.collection.rename.form.newName.validations.required"),async n=>{const l=await u.isEntityTypeValid(a.connection,n);return l==null?!0:t(`explorer.collection.rename.form.newName.validations.${l}`)},async n=>n===a.entityType||await u.isEntityTypeAvailable(a.connection,a.catalogName,n)?!0:t("explorer.collection.rename.form.newName.validations.notAvailable")],r=E(a.entityType),g=I(()=>r.value!==a.entityType);function _(){r.value=a.entityType}async function v(){try{return await u.renameCollection(a.connection,a.catalogName,a.entityType,r.value)?(o.success(t("explorer.collection.rename.notification.collectionRenamed",{entityType:a.entityType,newName:r.value})),s("rename")):o.info(t("explorer.collection.rename.notification.collectionNotRenamed",{entityType:a.entityType})),!0}catch(n){return o.error(t("explorer.collection.rename.notification.couldNotRenameCollection",{entityType:a.entityType,reason:n.message})),!1}}return(n,l)=>{const T=te("I18nT");return h(),D(Z,{"model-value":n.modelValue,changed:g.value,dangerous:"","confirm-button-icon":"mdi-pencil-outline",confirm:v,reset:_,"onUpdate:modelValue":l[1]||(l[1]=f=>s("update:modelValue",f))},{title:i(()=>[C(w(y(t)("explorer.collection.rename.title")),1)]),"prepend-form":i(()=>[b(T,{keypath:"explorer.collection.rename.description"},{entityType:i(()=>[R("strong",null,w(n.entityType),1)]),_:1})]),default:i(()=>[b(ee,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=f=>r.value=f),label:y(t)("explorer.collection.rename.form.newName.label"),rules:p,required:""},null,8,["modelValue","label"])]),"confirm-button-body":i(()=>[C(w(y(t)("common.button.rename")),1)]),_:1},8,["model-value","changed"])}}}),vo=q({__name:"CollectionItem",props:{entityCollection:{}},emits:["change"],setup(e,{emit:s}){const a=e,u=ue(),o=ta(),t=it(),{t:p}=W(),r=Ve(),g=E(!1),_=E(!1),v=ft(),n=no(),l=I(()=>B()),T=I(()=>Array.from(l.value.values()));if(n.value==null)throw new tt("Catalog schema is not loaded yet, but collection item is already rendered!");function f(){u.createTab(o.createNew(v,n.value.name,a.entityCollection.entityType,void 0,!0))}function k(x){const V=l.value.get(x);V instanceof ne&&V.execute()}function B(){const x=new Map;return x.set(X.ViewEntities,L(X.ViewEntities,"mdi-table",f)),x.set(X.ViewSchema,L(X.ViewSchema,"mdi-file-code-outline",()=>u.createTab(t.createNew(v,new aa(n.value.name,a.entityCollection.entityType))))),r.readOnly||(x.set(X.ModifySubheader,new pe(p("explorer.collection.subheader.modify"))),x.set(X.RenameCollection,L(X.RenameCollection,"mdi-pencil-outline",()=>_.value=!0)),x.set(X.DropCollection,L(X.DropCollection,"mdi-delete-outline",()=>g.value=!0))),x}function L(x,V,U){return new ne(x,p(`explorer.collection.actions.${x}`),V,U)}return(x,V)=>(h(),A("div",null,[b(he,{"prepend-icon":"mdi-list-box-outline",actions:T.value,onClick:f,"onClick:action":k,class:"text-gray-light text-sm-body-2"},{default:i(()=>[C(w(x.entityCollection.entityType)+" ",1),b(ae,{activator:"parent"},{default:i(()=>[C(w(x.entityCollection.entityType),1)]),_:1})]),_:1},8,["actions"]),_.value?(h(),D(po,{key:0,modelValue:_.value,"onUpdate:modelValue":V[0]||(V[0]=U=>_.value=U),connection:y(v),"catalog-name":y(n).name,"entity-type":x.entityCollection.entityType,onRename:V[1]||(V[1]=U=>s("change"))},null,8,["modelValue","connection","catalog-name","entity-type"])):H("",!0),g.value?(h(),D(mo,{key:1,modelValue:g.value,"onUpdate:modelValue":V[2]||(V[2]=U=>g.value=U),connection:y(v),"catalog-name":y(n).name,"entity-type":x.entityCollection.entityType,onDrop:V[3]||(V[3]=U=>s("change"))},null,8,["modelValue","connection","catalog-name","entity-type"])):H("",!0)]))}}),go=q({__name:"RenameCatalogDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","rename"],setup(e,{emit:s}){const a=e,u=ve(),o=z(),{t}=W(),p=[n=>n!=null&&n.trim().length>0?!0:t("explorer.catalog.rename.form.newName.validations.required"),async n=>{const l=await u.isCatalogNameValid(a.connection,n);return l==null?!0:t(`explorer.catalog.rename.form.newName.validations.${l}`)},async n=>n===a.catalogName||await u.isCatalogNameAvailable(a.connection,n)?!0:t("explorer.catalog.rename.form.newName.validations.notAvailable")],r=E(a.catalogName),g=I(()=>a.catalogName!==r.value);function _(){r.value=a.catalogName}async function v(){try{return await u.renameCatalog(a.connection,a.catalogName,r.value)?(o.success(t("explorer.catalog.rename.notification.catalogRenamed",{catalogName:a.catalogName,newName:r.value})),s("rename")):o.info(t("explorer.catalog.rename.notification.catalogNotRenamed",{catalogName:a.catalogName})),!0}catch(n){return o.error(t("explorer.catalog.rename.notification.couldNotRenameCatalog",{catalogName:a.catalogName,reason:n.message})),!1}}return(n,l)=>{const T=te("I18nT");return h(),D(Z,{"model-value":n.modelValue,changed:g.value,dangerous:"","confirm-button-icon":"mdi-pencil-outline",confirm:v,reset:_,"onUpdate:modelValue":l[1]||(l[1]=f=>s("update:modelValue",f))},{title:i(()=>[C(w(y(t)("explorer.catalog.rename.title")),1)]),"prepend-form":i(()=>[b(T,{keypath:"explorer.catalog.rename.description"},{catalogName:i(()=>[R("strong",null,w(n.catalogName),1)]),_:1})]),default:i(()=>[b(ee,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=f=>r.value=f),label:y(t)("explorer.catalog.rename.form.newName.label"),rules:p,required:""},null,8,["modelValue","label"])]),"confirm-button-body":i(()=>[C(w(y(t)("common.button.rename")),1)]),_:1},8,["model-value","changed"])}}}),fo=q({__name:"DropCatalogDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","drop"],setup(e,{emit:s}){const a=e,u=ve(),o=z(),{t}=W();async function p(){try{return await u.dropCatalog(a.connection,a.catalogName)?(o.success(t("explorer.catalog.drop.notification.catalogDropped",{catalogName:a.catalogName})),s("drop")):o.info(t("explorer.catalog.drop.notification.catalogNotDropped",{catalogName:a.catalogName})),!0}catch(r){return o.error(t("explorer.catalog.drop.notification.couldNotDropCatalog",{catalogName:a.catalogName,reason:r.message})),!1}}return(r,g)=>{const _=te("I18nT");return h(),D(Z,{"model-value":r.modelValue,dangerous:"",changed:"","confirm-button-icon":"mdi-delete-outline",confirm:p,"onUpdate:modelValue":g[0]||(g[0]=v=>s("update:modelValue",v))},{title:i(()=>[C(w(y(t)("explorer.catalog.drop.title")),1)]),"prepend-form":i(()=>[b(_,{keypath:"explorer.catalog.drop.question"},{catalogName:i(()=>[R("strong",null,w(r.catalogName),1)]),_:1})]),"confirm-button-body":i(()=>[C(w(y(t)("common.button.drop")),1)]),_:1},8,["model-value"])}}}),bo=q({__name:"ReplaceCatalogDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","replace"],setup(e,{emit:s}){const a=e,u=ve(),o=z(),{t}=W(),p=[f=>f!=null&&f.trim().length>0?!0:t("explorer.catalog.replace.form.catalogNameToBeReplacedWith.validations.required"),async f=>f===a.catalogName||await u.isCatalogExists(a.connection,f)?!0:t("explorer.catalog.replace.form.catalogNameToBeReplacedWith.validations.notExists")],r=E(),g=I(()=>r.value==null?[]:r.value.map(f=>f.name)),_=E(!1),v=E(),n=I(()=>v.value!=null&&v.value.length>0);u.getCatalogs(a.connection).then(f=>{r.value=f.filter(k=>k.name!==a.catalogName),_.value=!0});function l(){r.value=[],_.value=!1,v.value=""}async function T(){try{return await u.replaceCatalog(a.connection,v.value,a.catalogName)?(o.success(t("explorer.catalog.replace.notification.catalogReplaced",{catalogNameToBeReplaced:a.catalogName,catalogNameToBeReplacedWith:v.value})),s("replace")):o.info(t("explorer.catalog.replace.notification.catalogNotReplaced",{catalogNameToBeReplaced:a.catalogName})),!0}catch(f){return o.error(t("explorer.catalog.replace.notification.couldNotReplaceCatalog",{catalogNameToBeReplaced:a.catalogName,reason:f.message})),!1}}return(f,k)=>{const B=te("I18nT");return h(),D(Z,{"model-value":f.modelValue,dangerous:"",changed:n.value,"confirm-button-icon":"mdi-file-replace-outline",confirm:T,reset:l,"onUpdate:modelValue":k[1]||(k[1]=L=>s("update:modelValue",L))},{title:i(()=>[C(w(y(t)("explorer.catalog.replace.title")),1)]),"prepend-form":i(()=>[b(B,{keypath:"explorer.catalog.replace.description"},{catalogNameToBeReplaced:i(()=>[R("strong",null,w(f.catalogName),1)]),_:1})]),default:i(()=>[b(oa,{modelValue:v.value,"onUpdate:modelValue":k[0]||(k[0]=L=>v.value=L),label:y(t)("explorer.catalog.replace.form.catalogNameToBeReplacedWith.label"),items:g.value,rules:p},null,8,["modelValue","label","items"])]),"append-form":i(()=>[b(Me,{icon:"mdi-information-outline",type:"info"},{default:i(()=>[b(B,{keypath:"explorer.catalog.replace.info"},na({catalogNameToBeReplaced:i(()=>[R("strong",null,w(f.catalogName),1)]),_:2},[n.value?{name:"catalogNameToBeReplacedWith",fn:i(()=>[R("strong",null,w(v.value),1)]),key:"0"}:{name:"catalogNameToBeReplacedWith",fn:i(()=>[R("strong",null,"?")]),key:"1"}]),1024)]),_:1})]),"confirm-button-body":i(()=>[C(w(y(t)("common.button.replace")),1)]),_:1},8,["model-value","changed"])}}}),ho=q({__name:"CreateCollectionDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","create"],setup(e,{emit:s}){const a=e,u=Ae(),o=z(),{t}=W(),p=[n=>n!=null&&n.trim().length>0?!0:t("explorer.collection.create.form.entityType.validations.required"),async n=>{const l=await u.isEntityTypeValid(a.connection,n);return l==null?!0:t(`explorer.collection.create.form.entityType.validations.${l}`)},async n=>await u.isEntityTypeAvailable(a.connection,a.catalogName,n)?!0:t("explorer.collection.create.form.entityType.validations.notAvailable")],r=E(""),g=I(()=>r.value.length>0);function _(){r.value=""}async function v(){try{return await u.createCollection(a.connection,a.catalogName,r.value),o.success(t("explorer.collection.create.notification.collectionCreated",{entityType:r.value})),s("create"),!0}catch(n){return o.error(t("explorer.collection.create.notification.couldNotCreateCollection",{entityType:r.value,reason:n.message})),!1}}return(n,l)=>{const T=te("I18nT");return h(),D(Z,{"model-value":n.modelValue,changed:g.value,"confirm-button-icon":"mdi-plus",confirm:v,reset:_,"onUpdate:modelValue":l[1]||(l[1]=f=>s("update:modelValue",f))},{title:i(()=>[C(w(y(t)("explorer.collection.create.title")),1)]),"prepend-form":i(()=>[b(T,{keypath:"explorer.collection.create.description"},{catalogName:i(()=>[R("strong",null,w(n.catalogName),1)]),_:1})]),default:i(()=>[b(ee,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=f=>r.value=f),label:y(t)("explorer.collection.create.form.entityType.label"),rules:p,required:""},null,8,["modelValue","label"])]),"confirm-button-body":i(()=>[C(w(y(t)("common.button.create")),1)]),_:1},8,["model-value","changed"])}}}),yo=q({__name:"SwitchCatalogToAliveStateDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","switch"],setup(e,{emit:s}){const a=e,u=ve(),o=z(),{t}=W();async function p(){try{return await u.switchCatalogToAliveState(a.connection,a.catalogName)?(o.success(t("explorer.catalog.switchToAliveState.notification.catalogSwitched",{catalogName:a.catalogName})),s("switch")):o.info(t("explorer.catalog.switchToAliveState.notification.catalogNotSwitched",{catalogName:a.catalogName})),!0}catch(r){return o.error(t("explorer.catalog.switchToAliveState.notification.couldNotSwitchCatalog",{catalogName:a.catalogName,reason:r.message})),!1}}return(r,g)=>{const _=te("I18nT");return h(),D(Z,{"model-value":r.modelValue,dangerous:"",changed:"","confirm-button-icon":"mdi-toggle-switch-outline",confirm:p,"onUpdate:modelValue":g[0]||(g[0]=v=>s("update:modelValue",v))},{title:i(()=>[C(w(y(t)("explorer.catalog.switchToAliveState.title")),1)]),"prepend-form":i(()=>[b(_,{keypath:"explorer.catalog.switchToAliveState.description"},{catalogName:i(()=>[R("strong",null,w(r.catalogName),1)]),_:1})]),"append-form":i(()=>[b(Me,{icon:"mdi-alert-outline",type:"warning"},{default:i(()=>[C(w(y(t)("explorer.catalog.switchToAliveState.warning")),1)]),_:1})]),"confirm-button-body":i(()=>[C(w(y(t)("common.button.switch")),1)]),_:1},8,["model-value"])}}}),_o={key:0},wo=q({__name:"CatalogItem",props:{catalog:{}},emits:["change"],setup(e,{emit:s}){const a=e,u=Ve(),o=ue(),t=la(),p=st(),r=it(),g=ra(),{t:_}=W(),v=E(!1),n=E(!1),l=E(!1),T=E(!1),f=E(!1),k=ft(),B=I(()=>c()),L=I(()=>Array.from(B.value.values())),x=E(a.catalog);oo(x);const V=E(!1);function U(m){var N;const S=(N=B.value)==null?void 0:N.get(m);S&&S instanceof ne&&S.execute()}function c(){const m=new Map;return m.set(M.OpenEvitaQLConsole,d(M.OpenEvitaQLConsole,"mdi-variable",()=>{o.createTab(t.createNew(k,a.catalog.name))})),m.set(M.OpenGraphQLDataAPIConsole,d(M.OpenGraphQLDataAPIConsole,"mdi-graphql",()=>{o.createTab(p.createNew(k,a.catalog.name,Ce.Data))})),m.set(M.OpenGraphQLSchemaAPIConsole,d(M.OpenGraphQLSchemaAPIConsole,"mdi-graphql",()=>{o.createTab(p.createNew(k,a.catalog.name,Ce.Schema))})),m.set(M.ViewSchema,d(M.ViewSchema,"mdi-file-code-outline",()=>{o.createTab(r.createNew(k,new ia(a.catalog.name)))})),u.readOnly||(m.set(M.BackupSubheader,new pe(_("explorer.catalog.subheader.backup"))),m.set(M.Backup,d(M.Backup,"mdi-cloud-download-outline",()=>{o.createTab(g.createNew(k,a.catalog.name,!1))})),m.set(M.ModifySubheader,new pe(_("explorer.catalog.subheader.modify"))),m.set(M.RenameCatalog,d(M.RenameCatalog,"mdi-pencil-outline",()=>v.value=!0)),m.set(M.ReplaceCatalog,d(M.ReplaceCatalog,"mdi-file-replace-outline",()=>n.value=!0)),a.catalog.isInWarmup&&m.set(M.SwitchCatalogToAliveState,d(M.SwitchCatalogToAliveState,"mdi-toggle-switch-outline",()=>l.value=!0)),m.set(M.DropCatalog,d(M.DropCatalog,"mdi-delete-outline",()=>T.value=!0)),m.set(M.CollectionsSubheader,new pe(_("explorer.catalog.subheader.collections"))),m.set(M.CreateCollection,d(M.CreateCollection,"mdi-plus",()=>f.value=!0))),new Map(m)}function d(m,S,N){return new ne(m,_(`explorer.catalog.actions.${m}`),S,N)}return(m,S)=>(h(),D(ct,{value:`${y(k).name}|${m.catalog.name}`},{activator:i(({isOpen:N,props:P})=>[m.catalog.corrupted?(h(),D(he,J({key:1},P,{"prepend-icon":"mdi-menu",class:"text-red"}),{default:i(()=>[C(w(m.catalog.name)+" ",1),b(ae,{activator:"parent"},{default:i(()=>[C(w(y(_)("explorer.catalog.errors.couldNotLoad")),1)]),_:1})]),_:2},1040)):(h(),D(he,J({key:0},P,{openable:"","is-open":N,"prepend-icon":"mdi-menu",loading:V.value,actions:L.value,"onClick:action":U,class:"font-weight-bold"}),{default:i(()=>[C(w(m.catalog.name)+" ",1),b(ae,{activator:"parent"},{default:i(()=>[C(w(m.catalog.name),1)]),_:1})]),_:2},1040,["is-open","loading","actions"]))]),default:i(()=>[m.catalog.corrupted?H("",!0):(h(),A("div",_o,[m.catalog.entityCollections.size>0?(h(!0),A(Q,{key:0},le(m.catalog.entityCollections,N=>(h(),D(vo,{key:N.entityType,"entity-collection":N,onChange:S[0]||(S[0]=P=>s("change"))},null,8,["entity-collection"]))),128)):(h(),D(ht,{key:1}))])),v.value?(h(),D(go,{key:1,modelValue:v.value,"onUpdate:modelValue":S[1]||(S[1]=N=>v.value=N),connection:y(k),"catalog-name":m.catalog.name,onRename:S[2]||(S[2]=N=>s("change"))},null,8,["modelValue","connection","catalog-name"])):H("",!0),n.value?(h(),D(bo,{key:2,modelValue:n.value,"onUpdate:modelValue":S[3]||(S[3]=N=>n.value=N),connection:y(k),"catalog-name":m.catalog.name,onReplace:S[4]||(S[4]=N=>s("change"))},null,8,["modelValue","connection","catalog-name"])):H("",!0),l.value?(h(),D(yo,{key:3,modelValue:l.value,"onUpdate:modelValue":S[5]||(S[5]=N=>l.value=N),connection:y(k),"catalog-name":m.catalog.name,onSwitch:S[6]||(S[6]=N=>s("change"))},null,8,["modelValue","connection","catalog-name"])):H("",!0),T.value?(h(),D(fo,{key:4,modelValue:T.value,"onUpdate:modelValue":S[7]||(S[7]=N=>T.value=N),connection:y(k),"catalog-name":m.catalog.name,onDrop:S[8]||(S[8]=N=>s("change"))},null,8,["modelValue","connection","catalog-name"])):H("",!0),f.value?(h(),D(ho,{key:5,modelValue:f.value,"onUpdate:modelValue":S[9]||(S[9]=N=>f.value=N),connection:y(k),"catalog-name":m.catalog.name,onCreate:S[10]||(S[10]=N=>s("change"))},null,8,["modelValue","connection","catalog-name"])):H("",!0)]),_:1},8,["value"]))}}),Vo=q({__name:"RemoveConnectionDialog",props:{modelValue:{type:Boolean},connection:{}},emits:["update:modelValue"],setup(e,{emit:s}){const a=e,u=Se(),o=z(),{t}=W();async function p(){try{return u.removeConnection(a.connection.id),o.success(t("explorer.connection.remove.notification.connectionRemoved",{connectionName:a.connection.name})),!0}catch(r){return o.error(t("explorer.connection.remove.notification.couldNotRemoveConnection",{connectionName:a.connection.name,reason:r.message})),!1}}return(r,g)=>{const _=te("I18nT");return h(),D(Z,{"model-value":r.modelValue,dangerous:"",changed:"","confirm-button-icon":"mdi-delete-outline",confirm:p,"onUpdate:modelValue":g[0]||(g[0]=v=>s("update:modelValue",v))},{activator:i(({props:v})=>[_e(r.$slots,"activator",ut(dt(v)))]),title:i(()=>[C(w(y(t)("explorer.connection.remove.title")),1)]),"prepend-form":i(()=>[b(_,{keypath:"explorer.connection.remove.question"},{connectionName:i(()=>[R("strong",null,w(r.connection.name),1)]),_:1})]),"confirm-button-body":i(()=>[C(w(y(t)("common.button.remove")),1)]),_:3},8,["model-value"])}}}),So=q({__name:"CreateCatalogDialog",props:{modelValue:{type:Boolean},connection:{}},emits:["update:modelValue","create"],setup(e,{emit:s}){const a=e,u=ve(),o=z(),{t}=W(),p=[n=>n!=null&&n.trim().length>0?!0:t("explorer.catalog.create.form.catalogName.validations.required"),async n=>{const l=await u.isCatalogNameValid(a.connection,n);return l==null?!0:t(`explorer.catalog.create.form.catalogName.validations.${l}`)},async n=>await u.isCatalogNameAvailable(a.connection,n)?!0:t("explorer.catalog.create.form.catalogName.validations.notAvailable")],r=E(""),g=I(()=>r.value.length>0);function _(){r.value=""}async function v(){try{return await u.createCatalog(a.connection,r.value),o.success(t("explorer.catalog.create.notification.catalogCreated",{catalogName:r.value})),s("create"),!0}catch(n){return o.error(t("explorer.catalog.create.notification.couldNotCreateCatalog",{catalogName:r.value,reason:n.message})),!1}}return(n,l)=>(h(),D(Z,{"model-value":n.modelValue,changed:g.value,"confirm-button-icon":"mdi-plus",confirm:v,reset:_,"onUpdate:modelValue":l[1]||(l[1]=T=>s("update:modelValue",T))},{title:i(()=>[C(w(y(t)("explorer.catalog.create.title")),1)]),"prepend-form":i(()=>[C(w(y(t)("explorer.catalog.create.description")),1)]),default:i(()=>[b(ee,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=T=>r.value=T),label:y(t)("explorer.catalog.create.form.catalogName.label"),rules:p,required:""},null,8,["modelValue","label"])]),"confirm-button-body":i(()=>[C(w(y(t)("common.button.create")),1)]),_:1},8,["model-value","changed"]))}}),To={key:0},ko=q({__name:"ConnectionItem",props:{connection:{}},setup(e){const s=e,a=Ve(),u=ue(),o=Se(),t=st(),p=sa(),r=ca(),g=ua(),_=z(),{t:v}=W();ao(s.connection);const n=I(()=>V()),l=I(()=>Array.from(n.value.values())),T=E(),f=E(!1),k=E(!1),B=E(!1);async function L(){f.value=!0;try{T.value=await o.getCatalogs(s.connection,!0)}catch(c){_.error(c)}f.value=!1}function x(c){const d=n.value.get(c);d instanceof ne&&d.execute()}function V(){const c=new Map;return c.set(F.Refresh,U(F.Refresh,"mdi-refresh",()=>L())),c.set(F.OpenGraphQLSystemAPIConsole,U(F.OpenGraphQLSystemAPIConsole,"mdi-graphql",()=>u.createTab(t.createNew(s.connection,"system",Ce.System)))),c.set(F.Detail,U(F.Detail,"mdi-database-outline",()=>u.createTab(p.createNew(s.connection)))),c.set(F.Tasks,U(F.Tasks,"mdi-chart-gantt",()=>{u.createTab(r.createNew(s.connection))})),c.set(F.JfrRecordings,U(F.JfrRecordings,"mdi-chart-timeline",()=>{u.createTab(g.createNew(s.connection))})),a.readOnly||(s.connection.preconfigured||c.set(F.Remove,U(F.Remove,"mdi-delete-outline",()=>k.value=!0)),c.set(F.CatalogsSubheader,new pe(v("explorer.connection.subheader.catalogs"))),c.set(F.CreateCatalog,U(F.CreateCatalog,"mdi-plus",()=>{B.value=!0}))),c}function U(c,d,m){return new ne(c,v(`explorer.connection.actions.${c}`),d,m)}return(c,d)=>(h(),A("div",null,[b(ct,{value:c.connection.name},{activator:i(({isOpen:m,props:S})=>[b(he,J(S,{openable:"","is-open":m,"prepend-icon":"mdi-power-plug-outline",loading:f.value,actions:l.value,onClick:d[0]||(d[0]=N=>L()),"onClick:action":x,class:"font-weight-bold"}),{default:i(()=>[C(w(c.connection.name)+" ",1),b(ae,{activator:"parent"},{default:i(()=>[C(w(c.connection.name),1)]),_:1})]),_:2},1040,["is-open","loading","actions"])]),default:i(()=>[T.value!==void 0?(h(),A("div",To,[T.value.length>0?(h(!0),A(Q,{key:0},le(T.value,m=>(h(),D(wo,{key:m.name,catalog:m,onChange:L},null,8,["catalog"]))),128)):(h(),D(ht,{key:1}))])):H("",!0),k.value?(h(),D(Vo,{key:1,modelValue:k.value,"onUpdate:modelValue":d[1]||(d[1]=m=>k.value=m),connection:c.connection},null,8,["modelValue","connection"])):H("",!0),B.value?(h(),D(So,{key:2,modelValue:B.value,"onUpdate:modelValue":d[2]||(d[2]=m=>B.value=m),connection:c.connection,onCreate:L},null,8,["modelValue","connection"])):H("",!0)]),_:1},8,["value"])]))}}),Co=q({__name:"ConnectionEditor",props:{modelValue:{type:Boolean},connection:{default:void 0}},emits:["update:modelValue"],setup(e,{emit:s}){const a=e,u=Se(),o=z(),{t}=W(),p=[c=>c?!0:t("explorer.connection.editor.form.connectionName.validations.required"),c=>u.isConnectionExists(c)?t("explorer.connection.editor.form.connectionName.validations.duplicate"):!0],r=[c=>c?!0:t("explorer.connection.editor.form.systemApiUrl.validations.required"),c=>{try{return new URL(c),!0}catch{return t("explorer.connection.editor.form.systemApiUrl.validations.invalidUrl")}},async c=>await k()?(l.value.systemApiUrlTested=1,!0):(l.value.systemApiUrlTested=2,t("explorer.connection.editor.form.systemApiUrl.validations.unreachable"))],g=[c=>c?!0:t("explorer.connection.editor.form.grpcUrl.validations.required"),c=>{try{return new URL(c),!0}catch{return t("explorer.connection.editor.form.grpcUrl.validations.invalidUrl")}},async c=>await B()?(l.value.grpcUrlTested=1,!0):(l.value.grpcUrlTested=2,t("explorer.connection.editor.form.grpcUrl.validations.unreachable"))],_=[c=>c?!0:t("explorer.connection.editor.form.graphQLApiUrl.validations.required"),c=>{try{return new URL(c),!0}catch{return t("explorer.connection.editor.form.graphQLApiUrl.validations.invalidUrl")}},async c=>await L()?(l.value.gqlUrlTested=1,!0):(l.value.gqlUrlTested=2,t("explorer.connection.editor.form.graphQLApiUrl.validations.unreachable"))],v=[c=>c?!0:t("explorer.connection.editor.form.observability.validations.required"),c=>{try{return new URL(c),!0}catch{return t("explorer.connection.editor.form.observability.validations.invalidUrl")}},async c=>await x()?(l.value.gqlUrlTested=1,!0):(l.value.gqlUrlTested=2,t("explorer.connection.editor.form.observability.validations.unreachable"))],n=I(()=>a.connection?1:0),l=E({name:"",systemApiUrl:"",systemApiUrlTested:0,grpcUrl:"",grpcUrlTested:0,gqlUrl:"",gqlUrlTested:0,observabilityUrl:"",observabilityUrlTested:0}),T=E(!1);K(l,()=>{T.value=!0});function f(c){switch(c){case 0:return null;case 1:return"mdi-check-circle-outline";case 2:return"mdi-close-circle-outline"}}async function k(){try{const c=await fe.get(l.value.systemApiUrl+"/server-name").text();return c!=null&&c.length>0}catch{return!1}}async function B(){try{const c={};return(await fe.post(l.value.grpcUrl+"/io.evitadb.externalApi.grpc.generated.EvitaManagementService/ServerStatus",{json:c,headers:{"content-type":"application/json; charset=utf-8"}})).ok||!1}catch{return!1}}async function L(){var c;try{const d=await fe.post(l.value.gqlUrl+"/system",{headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
                    {
                        liveness
                    }
                `})}).json();return((c=d==null?void 0:d.data)==null?void 0:c.liveness)||!1}catch{return!1}}async function x(){return(await fe.get(l.value.observabilityUrl+"/metrics")).ok}function V(){l.value={name:"",systemApiUrl:"",systemApiUrlTested:0,grpcUrl:"",grpcUrlTested:0,gqlUrl:"",gqlUrlTested:0,observabilityUrl:"",observabilityUrlTested:0},T.value=!1}async function U(){try{return u.addConnection(new da(void 0,l.value.name,!1,l.value.systemApiUrl,l.value.grpcUrl,l.value.observabilityUrl,l.value.gqlUrl,"https://localhost:5555/rest")),o.success(t(n.value===0?"explorer.connection.editor.notification.connectionAdded":"explorer.connection.editor.notification.connectionEdited",{connectionName:l.value.name})),!0}catch(c){return o.error(t(n.value===0?"explorer.connection.editor.notification.couldNotAddConnection":"explorer.connection.editor.notification.couldNotEditConnection",{reason:c.message})),!1}}return(c,d)=>(h(),D(Z,{"model-value":c.modelValue,changed:T.value,"confirm-button-icon":n.value===0?"mdi-plus":"mdi-pencil-outline",confirm:U,reset:V,"onUpdate:modelValue":d[5]||(d[5]=m=>s("update:modelValue",m))},{activator:i(({props:m})=>[_e(c.$slots,"activator",ut(dt({props:m})))]),title:i(()=>[n.value===0?(h(),A(Q,{key:0},[C(w(y(t)("explorer.connection.editor.addTitle")),1)],64)):n.value===1?(h(),A(Q,{key:1},[C(w(y(t)("explorer.connection.editor.editTitle")),1)],64)):H("",!0)]),default:i(()=>[b(ee,{modelValue:l.value.name,"onUpdate:modelValue":d[0]||(d[0]=m=>l.value.name=m),label:y(t)("explorer.connection.editor.form.connectionName.label"),placeholder:"evitaDB",rules:p,required:""},null,8,["modelValue","label"]),b(ee,{modelValue:l.value.systemApiUrl,"onUpdate:modelValue":d[1]||(d[1]=m=>l.value.systemApiUrl=m),label:y(t)("explorer.connection.editor.form.systemApiUrl.label"),placeholder:"https://{evitadb-server}:5555/system",variant:"solo-filled",required:"",rules:r,"append-inner-icon":f(l.value.systemApiUrlTested)},null,8,["modelValue","label","append-inner-icon"]),b(ee,{modelValue:l.value.grpcUrl,"onUpdate:modelValue":d[2]||(d[2]=m=>l.value.grpcUrl=m),label:y(t)("explorer.connection.editor.form.grpcUrl.label"),placeholder:"https://{evitadb-server}:5555/",variant:"solo-filled",required:"",rules:g,"append-inner-icon":f(l.value.grpcUrlTested)},null,8,["modelValue","label","append-inner-icon"]),b(ee,{modelValue:l.value.gqlUrl,"onUpdate:modelValue":d[3]||(d[3]=m=>l.value.gqlUrl=m),label:y(t)("explorer.connection.editor.form.graphQLApiUrl.label"),placeholder:"https://{evitadb-server}:5555/gql",variant:"solo-filled",required:"",rules:_,"append-inner-icon":f(l.value.gqlUrlTested)},null,8,["modelValue","label","append-inner-icon"]),b(ee,{modelValue:l.value.observabilityUrl,"onUpdate:modelValue":d[4]||(d[4]=m=>l.value.observabilityUrl=m),label:y(t)("explorer.connection.editor.form.observability.label"),placeholder:"https://{evitadb-server}:5555/observability",variant:"solo-filled",required:"",rules:v,"append-inner-icon":f(l.value.observabilityUrlTested)},null,8,["modelValue","label","append-inner-icon"])]),"confirm-button-body":i(()=>[n.value===0?(h(),A(Q,{key:0},[C(w(y(t)("common.button.add")),1)],64)):n.value===1?(h(),A(Q,{key:1},[C(w(y(t)("common.button.edit")),1)],64)):H("",!0)]),_:3},8,["model-value","changed","confirm-button-icon"]))}}),xo={key:0,class:"pa-2"},No=q({__name:"ConnectionExplorerPanel",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:s}){const a=Ve(),u=Se(),{t:o}=W(),t=E(!1),p=I(()=>u.getConnections());return(r,g)=>(h(),D(vt,{permanent:"","model-value":r.modelValue,"onUpdate:modelValue":g[2]||(g[2]=_=>r.$emit("update:modelValue",_)),class:"bg-primary"},{append:i(()=>[y(a).readOnly?H("",!0):(h(),A("div",xo,[b(Co,{modelValue:t.value,"onUpdate:modelValue":g[1]||(g[1]=_=>t.value=_)},{activator:i(({props:_})=>[b(Be,J({"prepend-icon":"mdi-plus",block:"",variant:"outlined"},_,{onClick:g[0]||(g[0]=v=>t.value=!0)}),{default:i(()=>[C(w(y(o)("explorer.button.addConnection")),1)]),_:2},1040)]),_:1},8,["modelValue"])]))]),default:i(()=>[b(we,{density:"compact",nav:""},{default:i(()=>[b(ma,{class:"text-gray-light text-sm-body-2 font-weight-medium"},{default:i(()=>[C(w(y(o)("explorer.title")),1)]),_:1}),(h(!0),A(Q,null,le(p.value,_=>(h(),D(ko,{key:_.name,connection:_},null,8,["connection"]))),128))]),_:1})]),_:1},8,["model-value"]))}});function Do(e,s){return e.length<=s?e:e.substring(0,s-3)+"..."}const Ro={class:"loading-screen"},Uo={class:"loading-screen-info"},Io=q({__name:"TabLoadingScreen",setup(e){const{t:s}=W();return(a,u)=>(h(),A("div",Ro,[R("div",Uo,[b(nt,{size:48}),R("span",null,w(y(s)("tab.placeholder.loading")),1)])]))}});const Eo=de(Io,[["__scopeId","data-v-b23d11da"]]),Bo=q({__name:"TabWindow",props:{component:{},componentProps:{}},emits:["dataUpdate"],setup(e,{emit:s}){const a=E(!1);return(u,o)=>(h(),A(Q,null,[(h(),D(fa,null,[pa((h(),D(ga(u.component),J(u.componentProps,{onReady:o[0]||(o[0]=t=>a.value=!0),onDataUpdate:o[1]||(o[1]=t=>s("dataUpdate",t))}),null,16)),[[va,a.value]])],1024)),a.value?H("",!0):(h(),D(Eo,{key:0}))],64))}}),Lo="/lab/logo/evitalab-logo-representative.svg",$o=e=>(lt("data-v-70fa2ac3"),e=e(),rt(),e),Ao={class:"editor-welcome-screen"},Mo={class:"editor-welcome-screen-hero"},qo={class:"editor-welcome-screen-hero__header"},Po={class:"editor-welcome-screen-hero__title"},Ho={class:"font-weight-bold mb-2",style:{"font-size":"4.375rem"}},Wo={class:"text-white",style:{"font-size":"1rem"}},Go={class:"text-primary-lightest text-body-2",href:"https://github.com/lukashornych/evitalab/releases",target:"_blank"},Fo={class:"text-gray-light",style:{"font-size":"1rem"}},Oo={class:"editor-welcome-screen-blog"},Qo=["href"],jo={class:"editor-welcome-screen-blog-img__wrap"},zo=["src","alt"],Yo={class:"editor-welcome-screen-blog-item__title"},Ko={class:"editor-welcome-screen-blog-item__perex"},Xo={class:"editor-welcome-screen-blog-item__btn"},Jo=$o(()=>R("span",{class:"editor-welcome-screen-hr"},"",-1)),Zo={class:"editor-welcome-screen-hero__links"},en={href:"https://evitadb.io/documentation",target:"_blank"},tn={href:"https://github.com/lukashornych/evitalab/",target:"_blank"},an={href:"https://discord.gg/VsNBWxgmSw",target:"_blank"},on={href:"https://github.com/lukashornych/evitalab/issues",target:"_blank"},nn=q({__name:"WelcomeScreen",setup(e){const s=ba(),{t:a}=W(),u=I(()=>{const t="";return t.length===0?"?":t.substring(1)}),o=E([]);return s.getBlogPosts().then(t=>{o.value=t}),(t,p)=>{const r=te("I18nT");return h(),A("div",Ao,[R("div",Mo,[R("header",qo,[b(Ue,{width:"240",height:"240","max-width":"240","max-height":"240",alt:"evitaLab Logo",src:Lo,class:"evitalab-logo"}),R("div",Po,[R("h1",Ho,w(y(a)("app.name")),1),R("p",Wo,[C(w(u.value)+" ",1),R("a",Go,"("+w(y(a)("welcomeScreen.changelog"))+")",1)]),R("p",Fo,w(y(a)("welcomeScreen.description")),1)])]),R("div",Oo,[(h(!0),A(Q,null,le(o.value,g=>(h(),A("a",{key:g.url,href:g.url,target:"_blank"},[R("span",jo,[R("img",{class:"Blog_BlogMotive__72hVr",height:"160",width:"480",src:g.thumbnailUrl,alt:y(a)("welcomeScreen.blog.thumbnail.alt",{title:g.title})},null,8,zo)]),R("span",Yo,w(g.title),1),R("span",Ko,[b(ha,{source:g.perex},null,8,["source"])]),R("span",Xo,w(y(a)("welcomeScreen.blog.button.read")),1)],8,Qo))),128))]),Jo,R("ul",Zo,[b(r,{keypath:"welcomeScreen.link.evitaDBDocumentation.text",tag:"li"},{link:i(()=>[R("a",en,w(y(a)("welcomeScreen.link.evitaDBDocumentation.link")),1)]),_:1}),b(r,{keypath:"welcomeScreen.link.evitaLabGitHub.text",tag:"li"},{link:i(()=>[R("a",tn,w(y(a)("welcomeScreen.link.evitaLabGitHub.link")),1)]),_:1}),b(r,{keypath:"welcomeScreen.link.discord.text",tag:"li"},{link:i(()=>[R("a",an,w(y(a)("welcomeScreen.link.discord.link")),1)]),_:1}),R("li",null,[R("a",on,w(y(a)("welcomeScreen.link.submitIssue")),1)])])])])}}});const ln=de(nn,[["__scopeId","data-v-70fa2ac3"]]),rn=["innerHTML"],sn=["innerHTML"],cn=["innerHTML"],un=q({__name:"TabSharedDialog",props:{tabRequest:{}},emits:["resolve"],setup(e,{emit:s}){const a=e,u=ue(),{t:o}=W();function t(){u.createTab(a.tabRequest),s("resolve")}function p(){s("resolve")}return(r,g)=>(h(),D(wa,{"model-value":!0,"max-width":"36rem","onUpdate:modelValue":p},{title:i(()=>[C(w(y(o)("tabShare.sharedDialog.title")),1)]),default:i(()=>[b(je,null,{default:i(()=>[r.tabRequest.initialData!=null?(h(),A("span",{key:0,innerHTML:y(o)("tabShare.sharedDialog.text.withoutInitialData")},null,8,rn)):(h(),A("span",{key:1,innerHTML:y(o)("tabShare.sharedDialog.text.withInitialData")},null,8,sn))]),_:1}),r.tabRequest.initialData!=null?(h(),D(je,{key:0},{default:i(()=>[b(Me,{icon:"mdi-alert-outline",type:"warning"},{default:i(()=>[R("span",{innerHTML:y(o)("tabShare.sharedDialog.warning.potentiallyUnsafe")},null,8,cn)]),_:1})]),_:1})):H("",!0)]),"reject-button":i(()=>[b(ya,{onReject:p},{default:i(()=>[C(w(y(o)("tabShare.sharedDialog.button.reject")),1)]),_:1})]),"confirm-button":i(()=>[b(_a,{icon:"mdi-check",onConfirm:t},{default:i(()=>[C(w(y(o)("tabShare.sharedDialog.button.accept")),1)]),_:1})]),_:1}))}}),dn={key:1,style:{position:"relative"}},mn=q({__name:"WorkspaceTabWindowList",setup(e){const s=Va(),a=z(),u=Ie(),{t:o}=W(),t=ue(),p=Sa(),r=Ta(),g=E(!1),_=E(!1),v=E(),n=E(t.getTabDefinitions());K(n,()=>{const V=t.getTheNewTab();V&&(l.value=V.id,t.markTabAsVisited(V.id))},{deep:!0});const l=E();K(l,(V,U)=>{V!=null?u.setContext(V):U!=null&&u.resetActivatedContext()});function T(V){if(l.value==null)return;let c=t.getTabIndex(l.value)+V;c<0?c=n.value.length-1:c>=n.value.length&&(c=0),l.value=n.value[c].id}function f(V){const U=n.value.length,c=n.value.findIndex(m=>m.id===l.value),d=n.value.findIndex(m=>m.id===V);t.destroyTab(V),u.deleteContext(V),n.value.length===0?l.value=null:d===c&&d===U-1?l.value=n.value[d-1].id:d===c&&d<U-1&&(l.value=n.value[d].id)}async function k(){const V=s.query.demoSnippetRequest;if(V!=null)try{return await p.resolve(V)}catch(U){a.error(U)}}async function B(){const V=s.query.sharedTab;if(V!=null)try{return await r.resolve(V)}catch(U){a.error(U)}}function L(){try{let V=!1;t.restoreTabsFromLastSession()&&(V=!0),t.restoreTabHistory()&&(V=!0),V&&a.info("Your last session has been restored.")}catch(V){console.error(V),a.warning("Failed to fully restore your last session.")}}function x(){t.storeOpenedTabs(),t.storeTabHistory()}return k().then(V=>(V!=null&&(g.value=!0,t.createTab(V)),B())).then(V=>{V!=null&&(g.value=!0,v.value=V,_.value=!0),g.value||L()}),ce(()=>{u.bindGlobal(O.System_Editor_PreviousTab,()=>T(-1)),u.bindGlobal(O.System_Editor_NextTab,()=>T(1)),u.bindGlobal(O.System_Editor_CloseTab,()=>{l.value!=null&&f(l.value)}),u.bindGlobal(O.System_Editor_CloseAllTabs,()=>t.destroyAllTabs())}),Ee(()=>{u.unbindGlobal(O.System_Editor_PreviousTab),u.unbindGlobal(O.System_Editor_NextTab),u.unbindGlobal(O.System_Editor_CloseTab),u.unbindGlobal(O.System_Editor_CloseAllTabs)}),window.addEventListener("beforeunload",()=>{g.value||x()}),(V,U)=>(h(),A(Q,null,[n.value.length>0?(h(),D(Ea,{key:0,density:"compact",elevation:"0"},{default:i(()=>[b(ka,{modelValue:l.value,"onUpdate:modelValue":U[0]||(U[0]=c=>l.value=c)},{default:i(()=>[(h(!0),A(Q,null,le(n.value,c=>(h(),D(xa,{key:c.id,value:c.id,"prepend-icon":c.icon,onMousedown:ke(d=>f(c.id),["middle"]),class:"lab-tab"},{default:i(()=>[R("span",null,[C(w(y(Do)(c.title,30))+" ",1),c.title.length>30?(h(),D(ae,{key:0,activator:"parent"},{default:i(()=>[C(w(c.title),1)]),_:2},1024)):H("",!0)]),b(Be,{icon:"",variant:"plain",density:"compact",class:"ml-3",onClick:ke(d=>f(c.id),["stop"])},{default:i(()=>[b(se,null,{default:i(()=>[C("mdi-close")]),_:1}),b(Le,{command:y(O).System_Editor_CloseTab},{default:i(()=>[C(w(y(o)("tab.button.closeTab")),1)]),_:1},8,["command"])]),_:2},1032,["onClick"])]),_:2},1032,["value","prepend-icon","onMousedown"]))),128))]),_:1},8,["modelValue"])]),_:1})):H("",!0),b(La,{scrollable:!1,class:"lab-editor"},{default:i(()=>[n.value.length>0?(h(),D(Ca,{key:0,modelValue:l.value,"onUpdate:modelValue":U[1]||(U[1]=c=>l.value=c)},{default:i(()=>[(h(!0),A(Q,null,le(n.value,c=>(h(),D(Na,{key:c.id,value:c.id,transition:!1,"reverse-transition":!1,class:"window-item"},{default:i(()=>[b(Bo,{component:c.component,"component-props":c.componentProps(),onDataUpdate:d=>y(t).replaceTabData(c.id,d)},null,8,["component","component-props","onDataUpdate"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):(h(),A("div",dn,[b(ln)]))]),_:1}),v.value?(h(),D(un,{key:1,"tab-request":v.value,onResolve:U[2]||(U[2]=c=>v.value=void 0)},null,8,["tab-request"])):H("",!0)],64))}});const pn=de(mn,[["__scopeId","data-v-d87f82ca"]]),bn=q({__name:"MainView",setup(e){const s=E(oe.Explorer);return(a,u)=>(h(),A(Q,null,[b(to,{panel:s.value,"onUpdate:panel":u[0]||(u[0]=o=>s.value=o)},null,8,["panel"]),b(No,{"model-value":s.value===y(oe).Explorer},null,8,["model-value"]),b(pn)],64))}});export{bn as default};
