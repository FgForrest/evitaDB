/*
 *
 *                         _ _        ____  ____
 *               _____   _(_) |_ __ _|  _ \| __ )
 *              / _ \ \ / / | __/ _` | | | |  _ \
 *             |  __/\ V /| | || (_| | |_| | |_) |
 *              \___| \_/ |_|\__\__,_|____/|____/
 *
 *   Copyright (c) 2024
 *
 *   Licensed under the Business Source License, Version 1.1 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *   https://github.com/FgForrest/evitaDB/blob/master/LICENSE
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */

var Nt=Object.defineProperty;var At=(e,c,i)=>c in e?Nt(e,c,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[c]=i;var Ie=(e,c,i)=>(At(e,typeof c!="symbol"?c+"":c,i),i);import{p as he,f as L,s as Y,h as I,i as Mt,j as Z,k as fe,l as Ae,n as Pt,g as Te,q as ut,t as ge,v as Me,x as Ve,c as De,V as Ze,d as o,y as ne,z as dt,m as Pe,A as qt,B as Ht,C as Gt,D as Ft,E as vt,F as Wt,G as Ot,H as Qt,I as jt,J as zt,K as Yt,L as Kt,M as Jt,N as Xt,a as Zt,u as ea,b as ta,O as aa,P as et,Q as na,R as oa,S as la,T as ia,U as sa,W as ra,X as ca,Y as qe,Z as ua,$ as da,a0 as J,a1 as va,a2 as ma,a3 as P,a4 as He,a5 as be,a6 as pa,a7 as ye,a8 as G,a9 as O,aa as Ge,o as y,e as D,w as n,ab as Ue,ac as M,ad as _,ae as N,af as fa,ag as m,ah as Fe,ai as Q,aj as Ee,ak as mt,al as ce,_ as K,am as se,an as ba,ao as S,ap as u,aq as H,ar as re,as as We,at as me,au as pt,av as ft,aw as bt,ax as Re,ay as gt,az as _t,aA as ee,aB as le,aC as X,aD as te,aE as ue,aF as oe,aG as ga,aH as ht,aI as Le,aJ as _a,aK as pe,aL as Be,aM as tt,aN as ha,aO as yt,aP as ya,aQ as wt,aR as Ne,aS as wa,aT as $e,r as Ct,aU as kt,aV as Vt,aW as Se,aX as Oe,aY as Qe,aZ as Ca,a_ as ka,a$ as Va,b0 as ke,b1 as Sa,b2 as xa,b3 as Ta,b4 as Da,b5 as Ua,b6 as Ea,b7 as La,b8 as $a,b9 as Ia,ba as Ra,bb as Ba,bc as Na,bd as Aa,be as Ma,bf as Pa,bg as qa}from"./index-8526b5a9.js";import{a as St,u as xt,b as Ha}from"./layout-6c318359.js";const Ga=he({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Fa(e){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:i}=c;let r=0,a=0;const t=L(null),v=Y(0),p=Y(0),b=Y(0),f=Y(!1),s=Y(!1),d=I(()=>Number(e.scrollThreshold)),w=I(()=>Mt((d.value-v.value)/d.value||0)),g=()=>{const V=t.value;if(!V||i&&!i.value)return;r=v.value,v.value="window"in V?V.pageYOffset:V.scrollTop;const U=V instanceof Window?document.documentElement.scrollHeight:V.scrollHeight;if(a!==U){a=U;return}s.value=v.value<r,b.value=Math.abs(v.value-d.value)};return Z(s,()=>{p.value=p.value||v.value}),Z(f,()=>{p.value=0}),fe(()=>{Z(()=>e.scrollTarget,V=>{var B;const U=V?document.querySelector(V):window;U&&U!==t.value&&((B=t.value)==null||B.removeEventListener("scroll",g),t.value=U,t.value.addEventListener("scroll",g,{passive:!0}))},{immediate:!0})}),Ae(()=>{var V;(V=t.value)==null||V.removeEventListener("scroll",g)}),i&&Z(i,g,{immediate:!0}),{scrollThreshold:d,currentScroll:v,currentThreshold:b,isScrollActive:f,scrollRatio:w,isScrollingUp:s,savedScroll:p}}const Wa=he({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Pt(),...St(),...Ga(),height:{type:[Number,String],default:64}},"VAppBar"),Oa=Te()({name:"VAppBar",props:Wa(),emits:{"update:modelValue":e=>!0},setup(e,c){let{slots:i}=c;const r=L(),a=ut(e,"modelValue"),t=I(()=>{var C;const x=new Set(((C=e.scrollBehavior)==null?void 0:C.split(" "))??[]);return{hide:x.has("hide"),fullyHide:x.has("fully-hide"),inverted:x.has("inverted"),collapse:x.has("collapse"),elevate:x.has("elevate"),fadeImage:x.has("fade-image")}}),v=I(()=>{const x=t.value;return x.hide||x.fullyHide||x.inverted||x.collapse||x.elevate||x.fadeImage||!a.value}),{currentScroll:p,scrollThreshold:b,isScrollingUp:f,scrollRatio:s}=Fa(e,{canScroll:v}),d=I(()=>t.value.hide||t.value.fullyHide),w=I(()=>e.collapse||t.value.collapse&&(t.value.inverted?s.value>0:s.value===0)),g=I(()=>e.flat||t.value.fullyHide&&!a.value||t.value.elevate&&(t.value.inverted?p.value>0:p.value===0)),V=I(()=>t.value.fadeImage?t.value.inverted?1-s.value:s.value:void 0),U=I(()=>{var E,k;if(t.value.hide&&t.value.inverted)return 0;const x=((E=r.value)==null?void 0:E.contentHeight)??0,C=((k=r.value)==null?void 0:k.extensionHeight)??0;return d.value?p.value<b.value||t.value.fullyHide?x+C:x:x+C});ge(I(()=>!!e.scrollBehavior),()=>{dt(()=>{d.value?t.value.inverted?a.value=p.value>b.value:a.value=f.value||p.value<b.value:a.value=!0})});const{ssrBootStyles:B}=Me(),{layoutItemStyles:$}=xt({id:e.name,order:I(()=>parseInt(e.order,10)),position:Ve(e,"location"),layoutSize:U,elementSize:Y(void 0),active:a,absolute:Ve(e,"absolute")});return De(()=>{const x=Ze.filterProps(e);return o(Ze,ne({ref:r,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...$.value,"--v-toolbar-image-opacity":V.value,height:void 0,...B.value},e.style]},x,{collapse:w.value,flat:g.value}),i)}),{}}}),Qa=he({...Pe(),...qt()},"VForm"),ja=Te()({name:"VForm",props:Qa(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,c){let{slots:i,emit:r}=c;const a=Ht(e),t=L();function v(b){b.preventDefault(),a.reset()}function p(b){const f=b,s=a.validate();f.then=s.then.bind(s),f.catch=s.catch.bind(s),f.finally=s.finally.bind(s),r("submit",f),f.defaultPrevented||s.then(d=>{var g;let{valid:w}=d;w&&((g=t.value)==null||g.submit())}),f.preventDefault()}return De(()=>{var b;return o("form",{ref:t,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:v,onSubmit:p},[(b=i.default)==null?void 0:b.call(i,a)])}),Gt(a,t)}});const za=he({scrollable:Boolean,...Pe(),...Ft(),...vt({tag:"main"})},"VMain"),Ya=Te()({name:"VMain",props:za(),setup(e,c){let{slots:i}=c;const{dimensionStyles:r}=Wt(e),{mainStyles:a}=Ha(),{ssrBootStyles:t}=Me();return De(()=>o(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[a.value,t.value,r.value,e.style]},{default:()=>{var v,p;return[e.scrollable?o("div",{class:"v-main__scroller"},[(v=i.default)==null?void 0:v.call(i)]):(p=i.default)==null?void 0:p.call(i)]}})),{}}});function Ka(e){let{rootEl:c,isSticky:i,layoutItemStyles:r}=e;const a=Y(!1),t=Y(0),v=I(()=>{const f=typeof a.value=="boolean"?"top":a.value;return[i.value?{top:"auto",bottom:"auto",height:void 0}:void 0,a.value?{[f]:Ot(t.value)}:{top:r.value.top}]});fe(()=>{Z(i,f=>{f?window.addEventListener("scroll",b,{passive:!0}):window.removeEventListener("scroll",b)},{immediate:!0})}),Ae(()=>{window.removeEventListener("scroll",b)});let p=0;function b(){const f=p>window.scrollY?"up":"down",s=c.value.getBoundingClientRect(),d=parseFloat(r.value.top??0),w=window.scrollY-Math.max(0,t.value-d),g=s.height+Math.max(t.value,d)-window.scrollY-window.innerHeight,V=parseFloat(getComputedStyle(c.value).getPropertyValue("--v-body-scroll-y"))||0;s.height<window.innerHeight-d?(a.value="top",t.value=d):f==="up"&&a.value==="bottom"||f==="down"&&a.value==="top"?(t.value=window.scrollY+s.top-V,a.value=!0):f==="down"&&g<=0?(t.value=0,a.value="bottom"):f==="up"&&w<=0&&(V?a.value!=="top"&&(t.value=-w+V+d,a.value="top"):(t.value=s.top+w,a.value="top")),p=window.scrollY}return{isStuck:a,stickyStyles:v}}const Ja=100,Xa=20;function at(e){const c=1.41421356237;return(e<0?-1:1)*Math.sqrt(Math.abs(e))*c}function nt(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let c=0;for(let i=e.length-1;i>0;i--){if(e[i].t===e[i-1].t)continue;const r=at(c),a=(e[i].d-e[i-1].d)/(e[i].t-e[i-1].t);c+=(a-r)*Math.abs(a),i===e.length-1&&(c*=.5)}return at(c)*1e3}function Za(){const e={};function c(a){Array.from(a.changedTouches).forEach(t=>{(e[t.identifier]??(e[t.identifier]=new Qt(Xa))).push([a.timeStamp,t])})}function i(a){Array.from(a.changedTouches).forEach(t=>{delete e[t.identifier]})}function r(a){var f;const t=(f=e[a])==null?void 0:f.values().reverse();if(!t)throw new Error(`No samples for touch id ${a}`);const v=t[0],p=[],b=[];for(const s of t){if(v[0]-s[0]>Ja)break;p.push({t:s[0],d:s[1].clientX}),b.push({t:s[0],d:s[1].clientY})}return{x:nt(p),y:nt(b),get direction(){const{x:s,y:d}=this,[w,g]=[Math.abs(s),Math.abs(d)];return w>g&&s>=0?"right":w>g&&s<=0?"left":g>w&&d>=0?"down":g>w&&d<=0?"up":en()}}}return{addMovement:c,endTouch:i,getVelocity:r}}function en(){throw new Error}function tn(e){let{el:c,isActive:i,isTemporary:r,width:a,touchless:t,position:v}=e;fe(()=>{window.addEventListener("touchstart",x,{passive:!0}),window.addEventListener("touchmove",C,{passive:!1}),window.addEventListener("touchend",E,{passive:!0})}),Ae(()=>{window.removeEventListener("touchstart",x),window.removeEventListener("touchmove",C),window.removeEventListener("touchend",E)});const p=I(()=>["left","right"].includes(v.value)),{addMovement:b,endTouch:f,getVelocity:s}=Za();let d=!1;const w=Y(!1),g=Y(0),V=Y(0);let U;function B(l,h){return(v.value==="left"?l:v.value==="right"?document.documentElement.clientWidth-l:v.value==="top"?l:v.value==="bottom"?document.documentElement.clientHeight-l:ve())-(h?a.value:0)}function $(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const T=v.value==="left"?(l-V.value)/a.value:v.value==="right"?(document.documentElement.clientWidth-l-V.value)/a.value:v.value==="top"?(l-V.value)/a.value:v.value==="bottom"?(document.documentElement.clientHeight-l-V.value)/a.value:ve();return h?Math.max(0,Math.min(1,T)):T}function x(l){if(t.value)return;const h=l.changedTouches[0].clientX,T=l.changedTouches[0].clientY,R=25,W=v.value==="left"?h<R:v.value==="right"?h>document.documentElement.clientWidth-R:v.value==="top"?T<R:v.value==="bottom"?T>document.documentElement.clientHeight-R:ve(),F=i.value&&(v.value==="left"?h<a.value:v.value==="right"?h>document.documentElement.clientWidth-a.value:v.value==="top"?T<a.value:v.value==="bottom"?T>document.documentElement.clientHeight-a.value:ve());(W||F||i.value&&r.value)&&(U=[h,T],V.value=B(p.value?h:T,i.value),g.value=$(p.value?h:T),d=V.value>-20&&V.value<80,f(l),b(l))}function C(l){const h=l.changedTouches[0].clientX,T=l.changedTouches[0].clientY;if(d){if(!l.cancelable){d=!1;return}const W=Math.abs(h-U[0]),F=Math.abs(T-U[1]);(p.value?W>F&&W>3:F>W&&F>3)?(w.value=!0,d=!1):(p.value?F:W)>3&&(d=!1)}if(!w.value)return;l.preventDefault(),b(l);const R=$(p.value?h:T,!1);g.value=Math.max(0,Math.min(1,R)),R>1?V.value=B(p.value?h:T,!0):R<0&&(V.value=B(p.value?h:T,!1))}function E(l){if(d=!1,!w.value)return;b(l),w.value=!1;const h=s(l.changedTouches[0].identifier),T=Math.abs(h.x),R=Math.abs(h.y);(p.value?T>R&&T>400:R>T&&R>3)?i.value=h.direction===({left:"right",right:"left",top:"down",bottom:"up"}[v.value]||ve()):i.value=g.value>.5}const k=I(()=>w.value?{transform:v.value==="left"?`translateX(calc(-100% + ${g.value*a.value}px))`:v.value==="right"?`translateX(calc(100% - ${g.value*a.value}px))`:v.value==="top"?`translateY(calc(-100% + ${g.value*a.value}px))`:v.value==="bottom"?`translateY(calc(100% - ${g.value*a.value}px))`:ve(),transition:"none"}:void 0);return ge(w,()=>{var T,R;const l=((T=c.value)==null?void 0:T.style.transform)??null,h=((R=c.value)==null?void 0:R.style.transition)??null;dt(()=>{var W,F,de,Ce;(F=c.value)==null||F.style.setProperty("transform",((W=k.value)==null?void 0:W.transform)||"none"),(Ce=c.value)==null||Ce.style.setProperty("transition",((de=k.value)==null?void 0:de.transition)||null)}),jt(()=>{var W,F;(W=c.value)==null||W.style.setProperty("transform",l),(F=c.value)==null||F.style.setProperty("transition",h)})}),{isDragging:w,dragProgress:g,dragStyles:k}}function ve(){throw new Error}const an=["start","end","left","right","top","bottom"],nn=he({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>an.includes(e)},sticky:Boolean,...zt(),...Pe(),...Yt(),...Kt({mobile:null}),...Jt(),...St(),...Xt(),...vt({tag:"nav"}),...Zt()},"VNavigationDrawer"),Tt=Te()({name:"VNavigationDrawer",props:nn(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,c){let{attrs:i,emit:r,slots:a}=c;const{isRtl:t}=ea(),{themeClasses:v}=ta(e),{borderClasses:p}=aa(e),{backgroundColorClasses:b,backgroundColorStyles:f}=et(Ve(e,"color")),{elevationClasses:s}=na(e),{displayClasses:d,mobile:w}=oa(e),{roundedClasses:g}=la(e),V=ia(),U=ut(e,"modelValue",null,j=>!!j),{ssrBootStyles:B}=Me(),{scopeId:$}=sa(),x=L(),C=Y(!1),{runOpenDelay:E,runCloseDelay:k}=va(e,j=>{C.value=j}),l=I(()=>e.rail&&e.expandOnHover&&C.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),h=I(()=>ra(e.location,t.value)),T=I(()=>e.persistent),R=I(()=>!e.permanent&&(w.value||e.temporary)),W=I(()=>e.sticky&&!R.value&&h.value!=="bottom");ge(()=>e.expandOnHover&&e.rail!=null,()=>{Z(C,j=>r("update:rail",!j))}),ge(()=>!e.disableResizeWatcher,()=>{Z(R,j=>!e.permanent&&ma(()=>U.value=!j))}),ge(()=>!e.disableRouteWatcher&&!!V,()=>{Z(V.currentRoute,()=>R.value&&(U.value=!1))}),Z(()=>e.permanent,j=>{j&&(U.value=!0)}),e.modelValue==null&&!R.value&&(U.value=e.permanent||!w.value);const{isDragging:F,dragProgress:de}=tn({el:x,isActive:U,isTemporary:R,width:l,touchless:Ve(e,"touchless"),position:h}),Ce=I(()=>{const j=R.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):l.value;return F.value?j*de.value:j}),$t=I(()=>["top","bottom"].includes(e.location)?0:l.value),{layoutItemStyles:je,layoutItemScrimStyles:It}=xt({id:e.name,order:I(()=>parseInt(e.order,10)),position:h,layoutSize:Ce,elementSize:$t,active:I(()=>U.value||F.value),disableTransitions:I(()=>F.value),absolute:I(()=>e.absolute||W.value&&typeof ze.value!="string")}),{isStuck:ze,stickyStyles:Rt}=Ka({rootEl:x,isSticky:W,layoutItemStyles:je}),Ye=et(I(()=>typeof e.scrim=="string"?e.scrim:null)),Bt=I(()=>({...F.value?{opacity:de.value*.2,transition:"none"}:void 0,...It.value}));return ca({VList:{bgColor:"transparent"}}),De(()=>{const j=a.image||e.image;return o(J,null,[o(e.tag,ne({ref:x,onMouseenter:E,onMouseleave:k,class:["v-navigation-drawer",`v-navigation-drawer--${h.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":C.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":R.value,"v-navigation-drawer--persistent":T.value,"v-navigation-drawer--active":U.value,"v-navigation-drawer--sticky":W.value},v.value,b.value,p.value,d.value,s.value,g.value,e.class],style:[f.value,je.value,B.value,Rt.value,e.style,["top","bottom"].includes(h.value)?{height:"auto"}:{}]},$,i),{default:()=>{var Ke,Je,Xe;return[j&&o("div",{key:"image",class:"v-navigation-drawer__img"},[a.image?o(ua,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},a.image):o(qe,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),a.prepend&&o("div",{class:"v-navigation-drawer__prepend"},[(Ke=a.prepend)==null?void 0:Ke.call(a)]),o("div",{class:"v-navigation-drawer__content"},[(Je=a.default)==null?void 0:Je.call(a)]),a.append&&o("div",{class:"v-navigation-drawer__append"},[(Xe=a.append)==null?void 0:Xe.call(a)])]}}),o(da,{name:"fade-transition"},{default:()=>[R.value&&(F.value||U.value)&&!!e.scrim&&o("div",ne({class:["v-navigation-drawer__scrim",Ye.backgroundColorClasses.value],style:[Bt.value,Ye.backgroundColorStyles.value],onClick:()=>{T.value||(U.value=!1)}},$),null)]})])}),{isStuck:ze}}});var ie=(e=>(e.Explorer="explorer",e))(ie||{});const on="/lab/logo/evitalab-logo-mini.png?raw=true",ln="/lab/documentation.svg",sn="/lab/discord.svg";var A=(e=>(e.Keymap="keymap",e.EvitaLabGithub="evitaLabGithub",e.DiscussEvitaLab="discussEvitaLab",e.ReportEvitaLabIssue="reportEvitaLabIssue",e.EvitaDBDocumentation="evitaDBDocumentation",e.EvitaDBGithub="evitaDBGithub",e.DiscussEvitaDB="discussEvitaDB",e.ReportEvitaDBIssue="reportEvitaDBIssue",e))(A||{});const rn=P({__name:"ManageMenu",setup(e){const c=He(),i=be(),r=pa(),a=ye(),{t}=G(),v=[{type:"subheader",title:t("panel.manage.manage.title")},{title:t(`panel.manage.manage.item.${A.Keymap}`),value:A.Keymap,command:O.System_Keymap,props:{prependIcon:"mdi-keyboard-outline"}},{type:"subheader",title:t("panel.manage.evitaLabHelp.title")},{title:t(`panel.manage.evitaLabHelp.item.${A.EvitaLabGithub}`),value:A.EvitaLabGithub,props:{prependIcon:"mdi-github"}},{title:t(`panel.manage.evitaLabHelp.item.${A.DiscussEvitaLab}`),value:A.DiscussEvitaLab,props:{prependIcon:"mdi-forum-outline"}},{title:t(`panel.manage.evitaLabHelp.item.${A.ReportEvitaLabIssue}`),value:A.ReportEvitaLabIssue,props:{prependIcon:"mdi-bug"}},{type:"subheader",title:t("panel.manage.evitaDBHelp.title")},{title:t(`panel.manage.evitaDBHelp.item.${A.EvitaDBDocumentation}`),value:A.EvitaDBDocumentation,props:{prependIcon:"mdi-book-open-variant"}},{title:t(`panel.manage.evitaDBHelp.item.${A.EvitaDBGithub}`),value:A.EvitaDBGithub,props:{prependIcon:"mdi-github"}},{title:t(`panel.manage.evitaDBHelp.item.${A.DiscussEvitaDB}`),value:A.DiscussEvitaDB,props:{prependIcon:"mdi-forum-outline"}},{title:t(`panel.manage.evitaDBHelp.item.${A.ReportEvitaDBIssue}`),value:A.ReportEvitaDBIssue,props:{prependIcon:"mdi-bug"}}];function p(){i.createTab(r.createNew())}function b(f){if(f.length>0)switch(f[0]){case A.Keymap:p();break;case A.EvitaLabGithub:window.open("https://github.com/lukashornych/evitalab","_blank");break;case A.DiscussEvitaLab:window.open("https://discord.gg/VsNBWxgmSw","_blank");break;case A.ReportEvitaLabIssue:window.open("https://github.com/lukashornych/evitalab/issues/new","_blank");break;case A.EvitaDBDocumentation:window.open("https://evitadb.io/documentation","_blank");break;case A.EvitaDBGithub:window.open("https://github.com/FgForrest/evitaDB","_blank");break;case A.DiscussEvitaDB:window.open("https://discord.gg/VsNBWxgmSw","_blank");break;case A.ReportEvitaDBIssue:window.open("https://github.com/FgForrest/evitaDB/issues/new","_blank");break;default:a.error(new ce(`Unknown manage option ${f[0]}`))}}return fe(()=>{c.bindGlobal(O.System_Keymap,p)}),Ge(()=>{c.unbindGlobal(O.System_Keymap)}),(f,s)=>(y(),D(mt,null,{activator:n(({props:d})=>[o(N,ne(d,{icon:"",variant:"text",class:"manage-button"}),{default:n(()=>[Ue(f.$slots,"default",{},void 0,!0),o(M,{activator:"parent"},{default:n(()=>[_(" Manage evitaLab ")]),_:1})]),_:2},1040)]),default:n(()=>[o(Ee,{items:v,"onUpdate:selected":b},{title:n(({item:d})=>[o(fa,null,{default:n(()=>[_(m(d.title)+" ",1),d.command!=null?(y(),D(Fe,{key:0,command:d.command},{default:n(()=>[_(m(d.title),1)]),_:2},1032,["command"])):Q("",!0)]),_:2},1024)]),_:1})]),_:3}))}});const cn=K(rn,[["__scopeId","data-v-d2e32f29"]]),un={class:"lab-nav-links"},dn={href:"https://evitadb.io/documentation",target:"_blank"},vn=["alt"],mn={href:"https://discord.gg/VsNBWxgmSw",target:"_blank"},pn=["alt"],fn=P({__name:"WorkspacePanel",props:{panel:{}},emits:["update:panel"],setup(e,{emit:c}){const i=e,r=He(),{t:a}=G(),t=v();function v(){const b=[];return b.push(new se(ie.Explorer,a(`panel.item.${ie.Explorer}`),"mdi-connection",()=>{},O.System_Panels_ConnectionsExplorer)),b}function p(b){b.value?c("update:panel",b.id):c("update:panel",null)}return fe(()=>{r.bindGlobal(O.System_Panels_ConnectionsExplorer,()=>{i.panel===ie.Explorer?c("update:panel",null):c("update:panel",ie.Explorer)})}),Ge(()=>{r.unbindGlobal(O.System_Panels_ConnectionsExplorer)}),(b,f)=>(y(),D(Tt,{permanent:"",rail:"",class:"bg-primary-dark"},{prepend:n(()=>[o(cn,null,{default:n(()=>[o(ba,{size:"30px"},{default:n(()=>[o(qe,{alt:"evitaLab Logo",width:"30px",height:"30px",src:on})]),_:1})]),_:1})]),append:n(()=>[S("ul",un,[S("li",null,[S("a",dn,[S("img",{src:ln,alt:u(a)("panel.link.evitaDBDocumentation.icon.alt")},null,8,vn),o(M,{activator:"parent"},{default:n(()=>[_(m(u(a)("panel.link.evitaDBDocumentation.tooltip")),1)]),_:1})])]),S("li",null,[S("a",mn,[S("img",{src:sn,alt:u(a)("panel.link.discord.icon.alt")},null,8,pn),o(M,{activator:"parent"},{default:n(()=>[_(m(u(a)("panel.link.discord.tooltip")),1)]),_:1})])])])]),default:n(()=>[o(Ee,{density:"compact",nav:"",selected:[b.panel],"onClick:select":p,class:"navigation-items"},{default:n(()=>[(y(!0),H(J,null,re(u(t),s=>(y(),D(We,{key:s.value,value:s.value},{default:n(()=>[o(me,null,{default:n(()=>[_(m(s.prependIcon),1)]),_:2},1024),o(Fe,{command:s.command},{default:n(()=>[_(m(s.title),1)]),_:2},1032,["command"])]),_:2},1032,["value"]))),128))]),_:1},8,["selected"])]),_:1}))}});const bn=K(fn,[["__scopeId","data-v-d2d1dd7a"]]);var z=(e=>(e.OpenGraphQLSystemAPIConsole="openGraphQLSystemApiConsole",e.Edit="edit",e.Remove="remove",e.Detail="detail",e.ModifySubheader="modifySubheader",e.Create="create",e.Jobs="jobs",e.JfrRecordings="jfrRecordings",e))(z||{});const Dt=Symbol("connection");function gn(e){pt(Dt,e)}function Ut(){return ft(Dt)}const Et=Symbol("catalog");function _n(e){pt(Et,e)}function hn(){return ft(Et)}const yn=e=>(gt("data-v-4e340cfb"),e=e(),_t(),e),wn={class:"tree-view-item__content"},Cn={class:"text-truncate"},kn=yn(()=>S("span",{class:"text-disabled"}," No items found ",-1)),Vn=P({__name:"VTreeViewItem",props:{openable:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},prependIcon:{},loading:{type:Boolean,default:!1},actions:{default:()=>[]}},emits:["click:action"],setup(e,{emit:c}){const i=e,r=L(!1);function a(){i.actions&&i.actions.length>0&&(r.value=!0)}return(t,v)=>(y(),D(We,{"prepend-icon":null,"append-icon":null,onContextmenu:Re(a,["prevent"])},{default:n(()=>[S("div",wn,[t.openable?(y(),D(me,{key:0},{default:n(()=>[_(m(t.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1})):(y(),D(me,{key:1})),t.loading?(y(),D(bt,{key:2})):(y(),D(me,{key:3},{default:n(()=>[_(m(t.prependIcon),1)]),_:1})),S("span",Cn,[Ue(t.$slots,"default",{},()=>[kn],!0)]),t.actions&&t.actions.length>0?(y(),D(mt,{key:4,"menu-items":t.actions,modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=p=>r.value=p)},{activator:n(({props:p})=>[o(me,ne(p,{class:"text-gray-light"}),{default:n(()=>[_(" mdi-dots-vertical ")]),_:2},1040)]),default:n(()=>[o(Ee,{density:"compact",items:t.actions,"onClick:select":v[0]||(v[0]=p=>t.$emit("click:action",p.id))},null,8,["items"])]),_:1},8,["menu-items","modelValue"])):Q("",!0)])]),_:3},8,["onContextmenu"]))}});const xe=K(Vn,[["__scopeId","data-v-4e340cfb"]]);var q=(e=>(e.OpenEvitaQLConsole="openEvitaQLConsole",e.OpenGraphQLDataAPIConsole="openGraphQLDataApiConsole",e.OpenGraphQLSchemaAPIConsole="openGraphQLSchemaApiConsole",e.ViewSchema="viewSchema",e.DropCatalog="dropCatalog",e.RenameCatalog="renameCatalog",e.ReplaceCatalog="replaceCatalog",e.ModifySubheader="modifySubheader",e.CollectionsSubheader="collectionsSubheader",e.JobsSubheader="jobsSubheader",e.CreateCollection="createCollection",e.BackupSubheader="backupSubheader",e.Backup="backup",e.Jobs="jobs",e))(q||{});const Sn={class:"pl-8 text-disabled"},Lt=P({__name:"VTreeViewEmptyItem",setup(e){const{t:c}=G();return(i,r)=>(y(),D(We,null,{default:n(()=>[S("span",Sn,m(u(c)("common.list.empty")),1)]),_:1}))}});var ae=(e=>(e.ViewEntities="viewEntities",e.ViewSchema="viewSchema",e.ModifySubheader="modifySubheader",e.DropCollection="dropCollection",e.RenameCollection="renameCollection",e))(ae||{});class _e{constructor(c){Ie(this,"title");Ie(this,"type","subheader");this.title=c}}const xn={class:"buttons"},Tn=P({__name:"ConfirmDialog",emits:["confirmed"],setup(e,{emit:c}){const i=L(!0),{t:r}=G();function a(t){c("confirmed",t)}return(t,v)=>(y(),D(u(te),{modelValue:i.value,"onUpdate:modelValue":v[2]||(v[2]=p=>i.value=p),class:"w-25"},{default:n(()=>[o(u(ee),null,{default:n(()=>[o(le,null,{default:n(()=>[_(m(u(r)("explorer.catalog.confirmCatalog.title")),1)]),_:1}),o(u(X),null,{default:n(()=>[S("p",null,m(u(r)("explorer.catalog.confirmCatalog.description")),1),S("div",xn,[o(u(N),{variant:"outlined",density:"compact",onClick:v[0]||(v[0]=p=>a(!1))},{default:n(()=>[_(m(u(r)("common.button.cancel"))+" ",1),o(u(M),{activator:"parent"},{default:n(()=>[_(m(u(r)("common.button.cancel")),1)]),_:1})]),_:1}),o(u(N),{"prepend-icon":"mdi-exclamation",variant:"outlined",color:"error",density:"compact",class:"border",onClick:v[1]||(v[1]=p=>a(!0))},{default:n(()=>[_(m(u(r)("common.button.confirm"))+" ",1),o(u(M),{activator:"parent"},{default:n(()=>[_(m(u(r)("common.button.confirm")),1)]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});const we=K(Tn,[["__scopeId","data-v-cf1f5f4f"]]),Dn={class:"buttons"},Un=P({__name:"DropCollection",props:{visible:{type:Boolean},collectionName:{},catalogName:{},connection:{}},emits:["visibleChanged","confirmed"],setup(e,{emit:c}){const i=e,{t:r}=G(),a=L(i.visible),t=ue();function v(f){a.value=f,c("visibleChanged",a.value)}function p(){a.value=!1}async function b(f){if(f){const s=await t.dropCollection(i.connection,i.collectionName,i.catalogName);if(s)c("confirmed",s);else throw new ce("Collection can not be deleted. Try it again")}v(!1)}return(f,s)=>a.value?(y(),D(te,{key:0,modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=d=>a.value=d),class:"w-25"},{default:n(()=>[o(ee,null,{default:n(()=>[o(le,null,{default:n(()=>[_(m(u(r)("explorer.collection.dropCollection.title")),1)]),_:1}),o(X,null,{default:n(()=>[S("p",null,[_(m(u(r)("explorer.collection.dropCollection.description"))+" ",1),S("b",null,m(i.collectionName),1)]),S("div",Dn,[o(N,{variant:"outlined",density:"compact",onClick:s[0]||(s[0]=d=>v(!1))},{default:n(()=>[_(m(u(r)("common.button.cancel"))+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(r)("common.button.cancel")),1)]),_:1})]),_:1}),o(N,{"prepend-icon":"mdi-plus",variant:"outlined",density:"compact",color:"error",class:"border",onClick:p},{default:n(()=>[_(m(u(r)("common.button.drop"))+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(r)("common.button.drop")),1)]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])):(y(),D(we,{key:1,onConfirmed:b}))}});const ot=K(Un,[["__scopeId","data-v-6a941473"]]),En={class:"buttons"},Ln=P({__name:"RenameCollection",props:{visible:{type:Boolean},catalogName:{},collectionName:{},connection:{}},emits:["visibleChanged","confirmed"],setup(e,{emit:c}){const i=e,r=ue(),{t:a}=G(),t=L(i.visible),v=L("");function p(s){t.value=s,c("visibleChanged",t.value)}function b(){t.value=!1}async function f(s){if(s){const d=await r.renameCollection(i.connection,i.collectionName,v.value,i.catalogName);if(d)c("confirmed",d);else throw new ce("Catalog can not be renamed. Try it again")}p(!1)}return(s,d)=>t.value?(y(),D(te,{key:0,modelValue:t.value,"onUpdate:modelValue":d[2]||(d[2]=w=>t.value=w),class:"w-25 min-width"},{default:n(()=>[o(ee,null,{default:n(()=>[o(le,null,{default:n(()=>[_(m(u(a)("explorer.collection.renameCollection.title")),1)]),_:1}),o(X,null,{default:n(()=>[S("p",null,[_(m(u(a)("explorer.collection.renameCollection.description"))+" ",1),S("b",null,m(i.collectionName),1)]),o(oe,{label:u(a)("explorer.collection.renameCollection.form.rename.label"),variant:"outlined",class:"rename-input","append-inner-icon":"mdi-pencil-outline",modelValue:v.value,"onUpdate:modelValue":d[0]||(d[0]=w=>v.value=w)},null,8,["label","modelValue"]),S("div",En,[o(N,{variant:"outlined",density:"compact",onClick:d[1]||(d[1]=w=>p(!1))},{default:n(()=>[_(m(u(a)("common.button.cancel"))+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(a)("common.button.cancel")),1)]),_:1})]),_:1}),o(N,{"prepend-icon":"mdi-pencil-outline",variant:"outlined",density:"compact",color:"error",class:"border",onClick:b},{default:n(()=>[_(m(u(a)("common.button.rename"))+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(a)("common.button.rename")),1)]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])):(y(),D(we,{key:1,onConfirmed:f}))}});const lt=K(Ln,[["__scopeId","data-v-6f9a40c8"]]),$n=P({__name:"CollectionItem",props:{entityCollection:{},catalogName:{}},emits:["changed"],setup(e,{emit:c}){const i=e,r=be(),a=ga(),t=ht(),{t:v}=G(),p=Le(),b=L(!1),f=Y(ot||lt),s=Ut(),d=hn(),w=I(()=>B()),g=I(()=>Array.from(w.value.values()));if(d.value==null)throw new ce("Catalog schema is not loaded yet, but collection item is already rendered!");function V(){r.createTab(a.createNew(s,d.value.name,i.entityCollection.entityType,void 0,!0))}function U(x){const C=w.value.get(x);C instanceof se&&C.execute()}function B(){const x=new Map;return x.set(ae.ViewEntities,$(ae.ViewEntities,"mdi-table",V)),x.set(ae.ViewSchema,$(ae.ViewSchema,"mdi-file-code-outline",()=>r.createTab(t.createNew(s,new _a(i.catalogName,i.entityCollection.entityType))))),p.readOnly||(x.set(ae.ModifySubheader,new _e(v("explorer.collection.subheader.modify"))),x.set(ae.DropCollection,$(ae.DropCollection,"mdi-delete-outline",()=>{f.value=pe(ot),b.value=!0})),x.set(ae.RenameCollection,$(ae.RenameCollection,"mdi-delete-outline",()=>{f.value=pe(lt),b.value=!0}))),x}function $(x,C,E){return new se(x,v(`explorer.collection.actions.${x}`),C,E)}return(x,C)=>(y(),H("div",null,[o(xe,{"prepend-icon":"mdi-list-box-outline",actions:g.value,onClick:V,"onClick:action":U,class:"text-gray-light text-sm-body-2"},{default:n(()=>[_(m(x.entityCollection.entityType)+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(x.entityCollection.entityType),1)]),_:1})]),_:1},8,["actions"]),b.value?(y(),D(u(f),{key:0,visible:!0,"collection-name":x.entityCollection.entityType,"catalog-name":x.catalogName,connection:u(s),onVisibleChanged:C[0]||(C[0]=()=>{b.value=!1}),onConfirmed:C[1]||(C[1]=E=>{c("changed",E)})},null,8,["collection-name","catalog-name","connection"])):Q("",!0)]))}}),In={class:"buttons"},Rn=P({__name:"DropCatalog",props:{visible:{type:Boolean},catalogName:{},connection:{}},emits:["visibleChanged","confirmed"],setup(e,{emit:c}){const i=e,{t:r}=G(),a=L(i.visible),t=ue();function v(f){a.value=f,c("visibleChanged",a.value)}function p(){a.value=!1}async function b(f){if(f)if(await t.dropCatalog(i.connection,i.catalogName))c("confirmed");else throw new ce("Catalog can not be deleted. Try it again");v(!1)}return(f,s)=>a.value?(y(),D(te,{key:0,modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=d=>a.value=d),class:"w-25"},{default:n(()=>[o(ee,null,{default:n(()=>[o(le,null,{default:n(()=>[_(m(u(r)("explorer.catalog.dropCatalog.title")),1)]),_:1}),o(X,null,{default:n(()=>[S("p",null,[_(m(u(r)("explorer.catalog.dropCatalog.description"))+" ",1),S("b",null,m(i.catalogName),1)]),S("div",In,[o(N,{variant:"outlined",density:"compact",onClick:s[0]||(s[0]=d=>v(!1))},{default:n(()=>[_(m(u(r)("common.button.cancel"))+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(r)("common.button.cancel")),1)]),_:1})]),_:1}),o(N,{"prepend-icon":"mdi-delete-outline",variant:"outlined",density:"compact",color:"error",class:"border",onClick:p},{default:n(()=>[_(m(u(r)("common.button.drop"))+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(r)("common.button.drop")),1)]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])):(y(),D(we,{key:1,onConfirmed:b}))}});const it=K(Rn,[["__scopeId","data-v-e1bb20ee"]]),Bn={class:"buttons"},Nn=P({__name:"RenameCatalog",props:{visible:{type:Boolean},catalogName:{},connection:{}},emits:["visibleChanged","confirmed"],setup(e,{emit:c}){const i=e,r=ue(),{t:a}=G(),t=L(i.visible),v=L("");function p(s){t.value=s,c("visibleChanged",t.value)}function b(){t.value=!1}async function f(s){if(s)if(await r.renameCatalog(i.connection,i.catalogName,v.value))c("confirmed");else throw new ce("Catalog can not be renamed. Try it again");p(!1)}return(s,d)=>t.value?(y(),D(te,{key:0,modelValue:t.value,"onUpdate:modelValue":d[2]||(d[2]=w=>t.value=w),class:"w-25 min-width"},{default:n(()=>[o(ee,null,{default:n(()=>[o(le,null,{default:n(()=>[_(m(u(a)("explorer.catalog.renameCatalog.title")),1)]),_:1}),o(X,null,{default:n(()=>[S("p",null,[_(m(u(a)("explorer.catalog.renameCatalog.description"))+" ",1),S("b",null,m(i.catalogName),1)]),o(oe,{label:u(a)("explorer.catalog.renameCatalog.form.rename.label"),variant:"outlined",class:"rename-input","append-inner-icon":"mdi-pencil-outline",modelValue:v.value,"onUpdate:modelValue":d[0]||(d[0]=w=>v.value=w)},null,8,["label","modelValue"]),S("div",Bn,[o(N,{variant:"outlined",density:"compact",onClick:d[1]||(d[1]=w=>p(!1))},{default:n(()=>[_(m(u(a)("common.button.cancel"))+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(a)("common.button.cancel")),1)]),_:1})]),_:1}),o(N,{"prepend-icon":"mdi-pencil-outline",variant:"outlined",density:"compact",color:"error",class:"border",onClick:b},{default:n(()=>[_(m(u(a)("common.button.rename"))+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(a)("common.button.rename")),1)]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])):(y(),D(we,{key:1,onConfirmed:f}))}});const st=K(Nn,[["__scopeId","data-v-8835eb5e"]]),An={class:"buttons"},Mn=P({__name:"ReplaceCatalog",props:{visible:{type:Boolean},catalogName:{},connection:{}},emits:["visibleChanged","confirmed"],setup(e,{emit:c}){const i=e,r=ue(),{t:a}=G(),t=L(i.visible),v=L(i.catalogName),p=L(""),b=L(!1),f=L();r.getCatalogs(i.connection).then(g=>{f.value=g,b.value=!0});function s(g){t.value=g,c("visibleChanged",t.value)}function d(){t.value=!1}async function w(g){if(g)if(await r.replaceCatalog(i.connection,p.value,v.value))c("confirmed");else throw new ce("Catalog can not be replaced. Try it again");s(!1)}return(g,V)=>t.value?(y(),D(te,{key:0,modelValue:t.value,"onUpdate:modelValue":V[3]||(V[3]=U=>t.value=U),class:"w-25"},{default:n(()=>[o(ee,null,{default:n(()=>[o(le,null,{default:n(()=>[_(m(u(a)("explorer.catalog.replaceCatalog.title")),1)]),_:1}),o(X,null,{default:n(()=>{var U,B;return[o(Be,null,{default:n(()=>[_(m(u(a)("explorer.catalog.replaceCatalog.form.fromCatalog.help")),1)]),_:1}),o(tt,{label:u(a)("explorer.catalog.replaceCatalog.form.fromCatalog.label"),variant:"outlined",modelValue:v.value,"onUpdate:modelValue":V[0]||(V[0]=$=>v.value=$),items:(U=f.value)==null?void 0:U.filter($=>$.name!==p.value).map($=>$.name),class:"mt-4"},null,8,["label","modelValue","items"]),o(Be,null,{default:n(()=>[_(m(u(a)("explorer.catalog.replaceCatalog.form.toCatalog.help")),1)]),_:1}),o(tt,{label:u(a)("explorer.catalog.replaceCatalog.form.toCatalog.label"),variant:"outlined",items:(B=f.value)==null?void 0:B.filter($=>$.name!==v.value).map($=>$.name),class:"mt-4",modelValue:p.value,"onUpdate:modelValue":V[1]||(V[1]=$=>p.value=$)},null,8,["label","items","modelValue"]),S("div",An,[o(N,{density:"compact",variant:"outlined",onClick:V[2]||(V[2]=$=>s(!1))},{default:n(()=>[_(m(u(a)("common.button.cancel"))+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(a)("common.button.cancel")),1)]),_:1})]),_:1}),o(N,{density:"compact",variant:"outlined","prepend-icon":"mdi-arrow-right-bottom",color:"error",class:"border",onClick:d},{default:n(()=>[_(m(u(a)("common.button.replace"))+" ",1),o(M,null,{default:n(()=>[_(m(u(a)("common.button.replace")),1)]),_:1})]),_:1})])]}),_:1})]),_:1})]),_:1},8,["modelValue"])):(y(),D(we,{key:1,onConfirmed:w}))}});const rt=K(Mn,[["__scopeId","data-v-df9d12b3"]]),Pn={class:"buttons"},qn=P({__name:"CreateCollection",props:{visible:{type:Boolean},catalogName:{},connection:{}},emits:["visibleChanged","confirmed"],setup(e,{emit:c}){const i=e,{t:r}=G(),a=L(i.visible),t=L(""),v=ue();function p(f){a.value=f,c("visibleChanged",a.value)}async function b(f){if(f){const s=await v.createCollection(i.connection,t.value,i.catalogName);s&&c("confirmed",s)}p(!1)}return(f,s)=>(y(),D(te,{modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=d=>a.value=d),class:"w-25"},{default:n(()=>[o(ee,null,{default:n(()=>[o(le,null,{default:n(()=>[_(m(u(r)("explorer.catalog.createCollection.title")),1)]),_:1}),o(X,null,{default:n(()=>[S("p",null,m(u(r)("explorer.catalog.createCollection.newCatalogName")),1),o(oe,{variant:"outlined",class:"mt-3",modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=d=>t.value=d)},null,8,["modelValue"]),S("div",Pn,[o(N,{variant:"outlined",density:"compact",onClick:s[1]||(s[1]=d=>p(!1))},{default:n(()=>[_(m(u(r)("common.button.cancel"))+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(r)("common.button.cancel")),1)]),_:1})]),_:1}),o(N,{"prepend-icon":"mdi-plus",variant:"outlined",density:"compact",color:"success",class:"border",onClick:b},{default:n(()=>[_(m(u(r)("common.button.add"))+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(r)("common.button.add")),1)]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});const ct=K(qn,[["__scopeId","data-v-1bbd5a02"]]),Hn={key:0},Gn=P({__name:"CatalogItem",props:{catalog:{}},emits:["changed"],setup(e,{emit:c}){const i=e,r=Le(),a=be(),t=ha(),v=yt(),p=ht(),b=ya(),{t:f}=G(),s=L(!1),d=Y(it||st||ct||rt),w=Ut(),g=x(),V=Array.from(g.values()),U=L(i.catalog);_n(U);const B=L(!1);function $(l){const h=g.get(l);h&&h instanceof se&&h.execute()}function x(){const l=new Map;return l.set(q.OpenEvitaQLConsole,C(q.OpenEvitaQLConsole,"mdi-variable",()=>{a.createTab(t.createNew(w,i.catalog.name))})),l.set(q.OpenGraphQLDataAPIConsole,C(q.OpenGraphQLDataAPIConsole,"mdi-graphql",()=>{a.createTab(v.createNew(w,i.catalog.name,Ne.Data))})),l.set(q.OpenGraphQLSchemaAPIConsole,C(q.OpenGraphQLSchemaAPIConsole,"mdi-graphql",()=>{a.createTab(v.createNew(w,i.catalog.name,Ne.Schema))})),l.set(q.ViewSchema,C(q.ViewSchema,"mdi-file-code-outline",()=>{a.createTab(p.createNew(w,new wa(i.catalog.name)))})),r.readOnly||(l.set(q.BackupSubheader,new _e(f("explorer.catalog.subheader.backup"))),l.set(q.Backup,C(q.Backup,"mdi-cloud-download-outline",()=>{a.createTab(b.createNew(w,i.catalog.name,!1))})),l.set(q.ModifySubheader,new _e(f("explorer.catalog.subheader.modify"))),l.set(q.DropCatalog,C(q.DropCatalog,"mdi-delete-outline",()=>{d.value=pe(it),s.value=!0})),l.set(q.RenameCatalog,C(q.RenameCatalog,"mdi-pencil-outline",()=>{d.value=pe(st),s.value=!0})),l.set(q.ReplaceCatalog,C(q.ReplaceCatalog,"mdi-file-replace-outline",()=>{d.value=pe(rt),s.value=!0})),l.set(q.CollectionsSubheader,new _e(f("explorer.catalog.subheader.collections"))),l.set(q.CreateCollection,C(q.CreateCollection,"mdi-plus",()=>{d.value=pe(ct),s.value=!0}))),new Map(l)}function C(l,h,T){return new se(l,f(`explorer.catalog.actions.${l}`),h,T)}function E(l){s.value=l}function k(l){c("changed",l)}return(l,h)=>(y(),H(J,null,[o(wt,{value:`${u(w).name}|${l.catalog.name}`},{activator:n(({isOpen:T,props:R})=>[l.catalog.corrupted?(y(),D(xe,ne({key:1},R,{"prepend-icon":"mdi-menu",class:"text-red"}),{default:n(()=>[_(m(l.catalog.name)+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(f)("explorer.catalog.errors.couldNotLoad")),1)]),_:1})]),_:2},1040)):(y(),D(xe,ne({key:0},R,{openable:"","is-open":T,"prepend-icon":"mdi-menu",loading:B.value,actions:u(V),"onClick:action":$,class:"font-weight-bold"}),{default:n(()=>[_(m(l.catalog.name)+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(l.catalog.name),1)]),_:1})]),_:2},1040,["is-open","loading","actions"]))]),default:n(()=>[l.catalog.corrupted?Q("",!0):(y(),H("div",Hn,[l.catalog.entityCollections.size>0?(y(!0),H(J,{key:0},re(l.catalog.entityCollections,T=>(y(),D($n,{key:T.entityType,"entity-collection":T,"catalog-name":l.catalog.name,onChanged:k},null,8,["entity-collection","catalog-name"]))),128)):(y(),D(Lt,{key:1}))]))]),_:1},8,["value"]),s.value?(y(),D(u(d),{key:0,visible:!0,connection:u(w),"catalog-name":l.catalog.name,onVisibleChanged:E,onConfirmed:k},null,8,["connection","catalog-name"])):Q("",!0)],64))}}),Fn=P({__name:"RemoveConnectionDialog",props:{modelValue:{type:Boolean},connection:{}},emits:["update:modelValue"],setup(e,{emit:c}){const i=e,r=$e(),a=ye(),{t}=G();function v(){c("update:modelValue",!1)}function p(){try{r.removeConnection(i.connection.id)}catch(b){a.error(b);return}a.success("Connection removed."),c("update:modelValue",!1)}return(b,f)=>{const s=Ct("I18nT");return y(),D(te,{"model-value":b.modelValue,"max-width":"30rem","onUpdate:modelValue":f[0]||(f[0]=d=>b.$emit("update:modelValue",d))},{activator:n(({props:d})=>[Ue(b.$slots,"activator",kt(Vt(d)))]),default:n(()=>[o(ee,{class:"py-8 px-4"},{default:n(()=>[o(Se,null,{default:n(()=>[_(m(u(t)("explorer.connection.remove.title")),1)]),_:1}),o(X,{class:"mb-4"},{default:n(()=>[o(s,{keypath:"explorer.connection.remove.question"},{connectionName:n(()=>[S("strong",null,m(b.connection.name),1)]),_:1})]),_:1}),o(Oe,null,{default:n(()=>[o(Qe),o(N,{onClick:v,variant:"tonal"},{default:n(()=>[_(m(u(t)("common.button.cancel")),1)]),_:1}),o(N,{variant:"outlined","prepend-icon":"mdi-delete",onClick:p},{default:n(()=>[_(m(u(t)("common.button.remove")),1)]),_:1})]),_:1})]),_:1})]),_:3},8,["model-value"])}}}),Wn={class:"buttons"},On=P({__name:"CreateCatalog",props:{visible:{type:Boolean},connection:{}},emits:["visibleChanged","confirmed"],setup(e,{emit:c}){const i=e,{t:r}=G(),a=L(i.visible),t=L(""),v=ue();function p(f){a.value=f,c("visibleChanged",a.value)}async function b(f){f&&await v.createCatalog(i.connection,t.value)&&c("confirmed"),p(!1)}return(f,s)=>(y(),D(te,{modelValue:a.value,"onUpdate:modelValue":s[3]||(s[3]=d=>a.value=d),class:"w-25"},{default:n(()=>[o(ee,null,{default:n(()=>[o(le,null,{default:n(()=>[_(m(u(r)("explorer.connection.createCatalog.title")),1)]),_:1}),o(X,null,{default:n(()=>[o(Be,null,{default:n(()=>[_(m(u(r)("explorer.connection.createCatalog.description")),1)]),_:1}),o(oe,{variant:"outlined","append-inner-icon":"mdi-pencil-outline",class:"mt-2",modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=d=>t.value=d)},null,8,["modelValue"]),S("div",Wn,[o(N,{variant:"outlined",density:"compact",onClick:s[1]||(s[1]=d=>p(!1))},{default:n(()=>[_(m(u(r)("common.button.cancel"))+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(r)("common.button.cancel")),1)]),_:1})]),_:1}),o(N,{color:"success",class:"border",variant:"outlined",density:"compact","prepend-icon":"mdi-plus",onClick:s[2]||(s[2]=d=>b(!0))},{default:n(()=>[_(m(u(r)("common.button.add"))+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(u(r)("common.button.add")),1)]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});const Qn=K(On,[["__scopeId","data-v-4427c470"]]),jn={key:0},zn=P({__name:"ConnectionItem",props:{connection:{}},setup(e){const c=e,i=Le(),r=be(),a=$e(),t=yt(),v=Ca(),p=ka(),b=Va(),f=ye(),{t:s}=G();gn(c.connection);const d=I(()=>C()),w=I(()=>Array.from(d.value.values())),g=L(!1),V=L(),U=L(!1),B=L(!1);async function $(k){if(U.value=!0,k){V.value=k,U.value=!1;return}try{V.value=await a.getCatalogs(c.connection,!0)}catch(l){f.error(l)}U.value=!1}function x(k){const l=d.value.get(k);l instanceof se&&l.execute()}function C(){const k=new Map;return k.set(z.OpenGraphQLSystemAPIConsole,E(z.OpenGraphQLSystemAPIConsole,"mdi-graphql",()=>r.createTab(t.createNew(c.connection,"system",Ne.System)))),k.set(z.Detail,E(z.Detail,"mdi-database-outline",()=>r.createTab(v.createNew(c.connection)))),k.set(z.Jobs,E(z.Jobs,"mdi-chart-gantt",()=>{r.createTab(p.createNew(c.connection))})),k.set(z.JfrRecordings,E(z.JfrRecordings,"mdi-chart-timeline",()=>{r.createTab(b.createNew(c.connection))})),i.readOnly||(c.connection.preconfigured||k.set(z.Remove,E(z.Remove,"mdi-delete-outline",()=>g.value=!0)),k.set(z.ModifySubheader,new _e(s("explorer.connection.subheader.modify"))),k.set(z.Create,E(z.Create,"mdi-plus",()=>{B.value=!0}))),k}function E(k,l,h){return new se(k,s(`explorer.connection.actions.${k}`),l,h)}return(k,l)=>(y(),H(J,null,[S("div",null,[o(wt,{value:k.connection.name},{activator:n(({isOpen:h,props:T})=>[o(xe,ne(T,{openable:"","is-open":h,"prepend-icon":"mdi-power-plug-outline",loading:U.value,actions:w.value,onClick:l[0]||(l[0]=R=>$()),"onClick:action":x,class:"font-weight-bold"}),{default:n(()=>[_(m(k.connection.name)+" ",1),o(M,{activator:"parent"},{default:n(()=>[_(m(k.connection.name),1)]),_:1})]),_:2},1040,["is-open","loading","actions"])]),default:n(()=>[V.value!==void 0?(y(),H("div",jn,[V.value.length>0?(y(!0),H(J,{key:0},re(V.value,h=>(y(),D(Gn,{key:h.name,catalog:h,onChanged:l[1]||(l[1]=T=>$(T))},null,8,["catalog"]))),128)):(y(),D(Lt,{key:1}))])):Q("",!0),o(Fn,{modelValue:g.value,"onUpdate:modelValue":l[2]||(l[2]=h=>g.value=h),connection:k.connection},null,8,["modelValue","connection"])]),_:1},8,["value"])]),B.value?(y(),D(Qn,{key:0,visible:!0,connection:c.connection,onConfirmed:$,onVisibleChanged:l[3]||(l[3]=()=>{B.value=!1})},null,8,["connection"])):Q("",!0)],64))}}),Yn=P({__name:"ConnectionEditor",props:{modelValue:{type:Boolean},connection:{default:void 0}},emits:["update:modelValue"],setup(e,{emit:c}){const i=e,r=$e(),a=ye(),{t}=G(),v=[l=>l?!0:t("explorer.connection.editor.form.connectionName.validations.required"),l=>r.isConnectionExists(l)?t("explorer.connection.editor.form.connectionName.validations.duplicate"):!0],p=[l=>l?!0:t("explorer.connection.editor.form.systemApiUrl.validations.required"),l=>{try{return new URL(l),!0}catch{return t("explorer.connection.editor.form.systemApiUrl.validations.invalidUrl")}},async l=>await U()?(g.value.systemApiUrlTested=1,!0):(g.value.systemApiUrlTested=2,t("explorer.connection.editor.form.systemApiUrl.validations.unreachable"))],b=[l=>l?!0:t("explorer.connection.editor.form.grpcUrl.validations.required"),l=>{try{return new URL(l),!0}catch{return t("explorer.connection.editor.form.grpcUrl.validations.invalidUrl")}},async l=>await B()?(g.value.grpcUrlTested=1,!0):(g.value.grpcUrlTested=2,t("explorer.connection.editor.form.grpcUrl.validations.unreachable"))],f=[l=>l?!0:t("explorer.connection.editor.form.graphQLApiUrl.validations.required"),l=>{try{return new URL(l),!0}catch{return t("explorer.connection.editor.form.graphQLApiUrl.validations.invalidUrl")}},async l=>await $()?(g.value.gqlUrlTested=1,!0):(g.value.gqlUrlTested=2,t("explorer.connection.editor.form.graphQLApiUrl.validations.unreachable"))],s=[l=>l?!0:t("explorer.connection.editor.form.observability.validations.required"),l=>{try{return new URL(l),!0}catch{return t("explorer.connection.editor.form.observability.validations.invalidUrl")}},async l=>await x()?(g.value.gqlUrlTested=1,!0):(g.value.gqlUrlTested=2,t("explorer.connection.editor.form.observability.validations.unreachable"))],d=L(null),w=I(()=>i.connection?1:0),g=L({name:"",systemApiUrl:"",systemApiUrlTested:0,grpcUrl:"",grpcUrlTested:0,gqlUrl:"",gqlUrlTested:0,observabilityUrl:"",observabilityUrlTested:0});function V(l){switch(l){case 0:return null;case 1:return"mdi-check-circle-outline";case 2:return"mdi-close-circle-outline"}}async function U(){try{const l=await ke.get(g.value.systemApiUrl+"/server-name").text();return l!=null&&l.length>0}catch{return!1}}async function B(){try{const l={};return(await ke.post(g.value.grpcUrl+"/io.evitadb.externalApi.grpc.generated.EvitaManagementService/ServerStatus",{json:l,headers:{"content-type":"application/json; charset=utf-8"}})).ok||!1}catch{return!1}}async function $(){var l;try{const h=await ke.post(g.value.gqlUrl+"/system",{headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
                    {
                        liveness
                    }
                `})}).json();return((l=h==null?void 0:h.data)==null?void 0:l.liveness)||!1}catch{return!1}}async function x(){return(await ke.get(g.value.observabilityUrl+"/metrics")).ok}async function C(){let l=!0;return await U()?g.value.systemApiUrlTested=1:g.value.systemApiUrlTested=2,await B()?g.value.grpcUrlTested=1:(l=!1,g.value.grpcUrlTested=2),await $()?g.value.gqlUrlTested=1:(l=!1,g.value.gqlUrlTested=2),l?a.success(t("explorer.connection.editor.notification.connectionSuccess")):a.error(t("explorer.connection.editor.notification.connectionError")),l}function E(){d.value.reset(),g.value={name:"",systemApiUrl:"",systemApiUrlTested:0,grpcUrl:"",grpcUrlTested:0,gqlUrl:"",gqlUrlTested:0,observabilityUrl:"",observabilityUrlTested:0},c("update:modelValue",!1)}async function k(){const{valid:l}=await d.value.validate();if(l){try{r.addConnection(new Sa(void 0,g.value.name,!1,g.value.systemApiUrl,g.value.grpcUrl,g.value.observabilityUrl,g.value.gqlUrl,"https://localhost:5555/rest"))}catch(h){a.error(h);return}d.value.reset(),c("update:modelValue",!1)}}return(l,h)=>(y(),D(te,{"model-value":l.modelValue,"onUpdate:modelValue":h[5]||(h[5]=T=>l.$emit("update:modelValue",T)),persistent:"","max-width":"36rem"},{activator:n(({props:T})=>[Ue(l.$slots,"activator",kt(Vt(T)))]),default:n(()=>[o(ee,{class:"py-8 px-4"},{default:n(()=>[w.value===0?(y(),D(Se,{key:0},{default:n(()=>[_(m(u(t)("explorer.connection.editor.addTitle")),1)]),_:1})):Q("",!0),w.value===1?(y(),D(Se,{key:1},{default:n(()=>[_(m(u(t)("explorer.connection.editor.editTitle")),1)]),_:1})):Q("",!0),o(X,null,{default:n(()=>[o(ja,{ref_key:"form",ref:d,"validate-on":"submit"},{default:n(()=>[o(oe,{modelValue:g.value.name,"onUpdate:modelValue":h[0]||(h[0]=T=>g.value.name=T),label:u(t)("explorer.connection.editor.form.connectionName.label"),placeholder:"evitaDB",variant:"solo-filled",rules:v,required:""},null,8,["modelValue","label"]),o(oe,{modelValue:g.value.systemApiUrl,"onUpdate:modelValue":h[1]||(h[1]=T=>g.value.systemApiUrl=T),label:u(t)("explorer.connection.editor.form.systemApiUrl.label"),placeholder:"https://{evitadb-server}:5555/system",variant:"solo-filled",required:"",rules:p,"append-inner-icon":V(g.value.systemApiUrlTested)},null,8,["modelValue","label","append-inner-icon"]),o(oe,{modelValue:g.value.grpcUrl,"onUpdate:modelValue":h[2]||(h[2]=T=>g.value.grpcUrl=T),label:u(t)("explorer.connection.editor.form.grpcUrl.label"),placeholder:"https://{evitadb-server}:5555/lab/api",variant:"solo-filled",required:"",rules:b,"append-inner-icon":V(g.value.grpcUrlTested)},null,8,["modelValue","label","append-inner-icon"]),o(oe,{modelValue:g.value.gqlUrl,"onUpdate:modelValue":h[3]||(h[3]=T=>g.value.gqlUrl=T),label:u(t)("explorer.connection.editor.form.graphQLApiUrl.label"),placeholder:"https://{evitadb-server}:5555/gql",variant:"solo-filled",required:"",rules:f,"append-inner-icon":V(g.value.gqlUrlTested)},null,8,["modelValue","label","append-inner-icon"]),o(oe,{modelValue:g.value.observabilityUrl,"onUpdate:modelValue":h[4]||(h[4]=T=>g.value.observabilityUrl=T),label:u(t)("explorer.connection.editor.form.observability.label"),placeholder:"https://{evitadb-server}:5555/observability",variant:"solo-filled",required:"",rules:s,"append-inner-icon":V(g.value.observabilityUrlTested)},null,8,["modelValue","label","append-inner-icon"])]),_:1},512)]),_:1}),o(Oe,{class:"px-6"},{default:n(()=>[o(N,{variant:"plain","prepend-icon":"mdi-connection",onClick:C},{default:n(()=>[_(m(u(t)("explorer.connection.editor.button.testConnection")),1)]),_:1}),o(Qe),o(N,{variant:"tonal",onClick:E},{default:n(()=>[_(m(u(t)("common.button.cancel")),1)]),_:1}),o(N,{variant:"outlined","prepend-icon":"mdi-content-save",onClick:k,class:"ml-4"},{default:n(()=>[_(m(u(t)("common.button.save")),1)]),_:1})]),_:1})]),_:1})]),_:3},8,["model-value"]))}}),Kn={key:0,class:"pa-2"},Jn=P({__name:"ConnectionExplorerPanel",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:c}){const i=Le(),r=$e(),{t:a}=G(),t=L(!1),v=I(()=>r.getConnections());return(p,b)=>(y(),D(Tt,{permanent:"","model-value":p.modelValue,"onUpdate:modelValue":b[2]||(b[2]=f=>p.$emit("update:modelValue",f)),class:"bg-primary"},{append:n(()=>[u(i).readOnly?Q("",!0):(y(),H("div",Kn,[o(Yn,{modelValue:t.value,"onUpdate:modelValue":b[1]||(b[1]=f=>t.value=f)},{activator:n(({props:f})=>[o(N,ne({"prepend-icon":"mdi-plus",block:"",variant:"outlined"},f,{onClick:b[0]||(b[0]=s=>t.value=!0)}),{default:n(()=>[_(m(u(a)("explorer.button.addConnection")),1)]),_:2},1040)]),_:1},8,["modelValue"])]))]),default:n(()=>[o(Ee,{density:"compact",nav:""},{default:n(()=>[o(xa,{class:"text-gray-light text-sm-body-2 font-weight-medium"},{default:n(()=>[_(m(u(a)("explorer.title")),1)]),_:1}),(y(!0),H(J,null,re(v.value,f=>(y(),D(zn,{key:f.name,connection:f},null,8,["connection"]))),128))]),_:1})]),_:1},8,["model-value"]))}});function Xn(e,c){return e.length<=c?e:e.substring(0,c-3)+"..."}const Zn={class:"loading-screen"},eo={class:"loading-screen-info"},to=P({__name:"TabLoadingScreen",setup(e){const{t:c}=G();return(i,r)=>(y(),H("div",Zn,[S("div",eo,[o(bt,{size:48}),S("span",null,m(u(c)("tab.placeholder.loading")),1)])]))}});const ao=K(to,[["__scopeId","data-v-b23d11da"]]),no=P({__name:"TabWindow",props:{component:{},componentProps:{}},emits:["dataUpdate"],setup(e,{emit:c}){const i=L(!1);return(r,a)=>(y(),H(J,null,[(y(),D(Ea,null,[Ta((y(),D(Ua(r.component),ne(r.componentProps,{onReady:a[0]||(a[0]=t=>i.value=!0),onDataUpdate:a[1]||(a[1]=t=>c("dataUpdate",t))}),null,16)),[[Da,i.value]])],1024)),i.value?Q("",!0):(y(),D(ao,{key:0}))],64))}}),oo="/lab/logo/evitalab-logo-representative.svg",lo=e=>(gt("data-v-70fa2ac3"),e=e(),_t(),e),io={class:"editor-welcome-screen"},so={class:"editor-welcome-screen-hero"},ro={class:"editor-welcome-screen-hero__header"},co={class:"editor-welcome-screen-hero__title"},uo={class:"font-weight-bold mb-2",style:{"font-size":"4.375rem"}},vo={class:"text-white",style:{"font-size":"1rem"}},mo={class:"text-primary-lightest text-body-2",href:"https://github.com/lukashornych/evitalab/releases",target:"_blank"},po={class:"text-gray-light",style:{"font-size":"1rem"}},fo={class:"editor-welcome-screen-blog"},bo=["href"],go={class:"editor-welcome-screen-blog-img__wrap"},_o=["src","alt"],ho={class:"editor-welcome-screen-blog-item__title"},yo={class:"editor-welcome-screen-blog-item__perex"},wo={class:"editor-welcome-screen-blog-item__btn"},Co=lo(()=>S("span",{class:"editor-welcome-screen-hr"},"",-1)),ko={class:"editor-welcome-screen-hero__links"},Vo={href:"https://evitadb.io/documentation",target:"_blank"},So={href:"https://github.com/lukashornych/evitalab/",target:"_blank"},xo={href:"https://discord.gg/VsNBWxgmSw",target:"_blank"},To={href:"https://github.com/lukashornych/evitalab/issues",target:"_blank"},Do=P({__name:"WelcomeScreen",setup(e){const c=La(),{t:i}=G(),r=I(()=>{const t="";return t.length===0?"?":t.substring(1)}),a=L([]);return c.getBlogPosts().then(t=>{a.value=t}),(t,v)=>{const p=Ct("I18nT");return y(),H("div",io,[S("div",so,[S("header",ro,[o(qe,{width:"240",height:"240","max-width":"240","max-height":"240",alt:"evitaLab Logo",src:oo,class:"evitalab-logo"}),S("div",co,[S("h1",uo,m(u(i)("app.name")),1),S("p",vo,[_(m(r.value)+" ",1),S("a",mo,"("+m(u(i)("welcomeScreen.changelog"))+")",1)]),S("p",po,m(u(i)("welcomeScreen.description")),1)])]),S("div",fo,[(y(!0),H(J,null,re(a.value,b=>(y(),H("a",{key:b.url,href:b.url,target:"_blank"},[S("span",go,[S("img",{class:"Blog_BlogMotive__72hVr",height:"160",width:"480",src:b.thumbnailUrl,alt:u(i)("welcomeScreen.blog.thumbnail.alt",{title:b.title})},null,8,_o)]),S("span",ho,m(b.title),1),S("span",yo,[o($a,{source:b.perex},null,8,["source"])]),S("span",wo,m(u(i)("welcomeScreen.blog.button.read")),1)],8,bo))),128))]),Co,S("ul",ko,[o(p,{keypath:"welcomeScreen.link.evitaDBDocumentation.text",tag:"li"},{link:n(()=>[S("a",Vo,m(u(i)("welcomeScreen.link.evitaDBDocumentation.link")),1)]),_:1}),o(p,{keypath:"welcomeScreen.link.evitaLabGitHub.text",tag:"li"},{link:n(()=>[S("a",So,m(u(i)("welcomeScreen.link.evitaLabGitHub.link")),1)]),_:1}),o(p,{keypath:"welcomeScreen.link.discord.text",tag:"li"},{link:n(()=>[S("a",xo,m(u(i)("welcomeScreen.link.discord.link")),1)]),_:1}),S("li",null,[S("a",To,m(u(i)("welcomeScreen.link.submitIssue")),1)])])])])}}});const Uo=K(Do,[["__scopeId","data-v-70fa2ac3"]]),Eo=["innerHTML"],Lo=["innerHTML"],$o=["innerHTML"],Io=P({__name:"TabSharedDialog",props:{tabRequest:{}},emits:["resolve"],setup(e,{emit:c}){const i=e,r=be(),{t:a}=G();function t(){r.createTab(i.tabRequest),c("resolve")}function v(){c("resolve")}return(p,b)=>(y(),D(te,{"model-value":!0,"max-width":"36rem","onUpdate:modelValue":v},{default:n(()=>[o(ee,{class:"py-8 px-4"},{default:n(()=>[o(Se,null,{default:n(()=>[_(m(u(a)("tabShare.sharedDialog.title")),1)]),_:1}),o(X,null,{default:n(()=>[p.tabRequest.initialData!=null?(y(),H("span",{key:0,innerHTML:u(a)("tabShare.sharedDialog.text.withoutInitialData")},null,8,Eo)):(y(),H("span",{key:1,innerHTML:u(a)("tabShare.sharedDialog.text.withInitialData")},null,8,Lo))]),_:1}),p.tabRequest.initialData!=null?(y(),D(X,{key:0},{default:n(()=>[o(Ia,{icon:"mdi-alert-outline",type:"warning"},{default:n(()=>[S("span",{innerHTML:u(a)("tabShare.sharedDialog.warning.potentiallyUnsafe")},null,8,$o)]),_:1})]),_:1})):Q("",!0),o(Oe,{class:"px-6"},{default:n(()=>[o(Qe),o(N,{variant:"tonal",onClick:v},{default:n(()=>[_(m(u(a)("tabShare.sharedDialog.button.reject")),1)]),_:1}),o(N,{variant:"outlined","prepend-icon":"mdi-check",onClick:t,class:"ml-4"},{default:n(()=>[_(m(u(a)("tabShare.sharedDialog.button.accept")),1)]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ro={key:1,style:{position:"relative"}},Bo=P({__name:"WorkspaceTabWindowList",setup(e){const c=Ra(),i=ye(),r=He(),{t:a}=G(),t=be(),v=Ba(),p=Na(),b=L(!1),f=L(!1),s=L(),d=L(t.getTabDefinitions());Z(d,()=>{const C=t.getTheNewTab();C&&(w.value=C.id,t.markTabAsVisited(C.id))},{deep:!0});const w=L();Z(w,(C,E)=>{C!=null?r.setContext(C):E!=null&&r.resetActivatedContext()});function g(C){if(w.value==null)return;let k=t.getTabIndex(w.value)+C;k<0?k=d.value.length-1:k>=d.value.length&&(k=0),w.value=d.value[k].id}function V(C){const E=d.value.length,k=d.value.findIndex(h=>h.id===w.value),l=d.value.findIndex(h=>h.id===C);t.destroyTab(C),r.deleteContext(C),d.value.length===0?w.value=null:l===k&&l===E-1?w.value=d.value[l-1].id:l===k&&l<E-1&&(w.value=d.value[l].id)}async function U(){const C=c.query.demoSnippetRequest;if(C!=null)try{return await v.resolve(C)}catch(E){i.error(E)}}async function B(){const C=c.query.sharedTab;if(C!=null)try{return await p.resolve(C)}catch(E){i.error(E)}}function $(){try{let C=!1;t.restoreTabsFromLastSession()&&(C=!0),t.restoreTabHistory()&&(C=!0),C&&i.info("Your last session has been restored.")}catch(C){console.error(C),i.warning("Failed to fully restore your last session.")}}function x(){t.storeOpenedTabs(),t.storeTabHistory()}return U().then(C=>(C!=null&&(b.value=!0,t.createTab(C)),B())).then(C=>{C!=null&&(b.value=!0,s.value=C,f.value=!0),b.value||$()}),fe(()=>{r.bindGlobal(O.System_Editor_PreviousTab,()=>g(-1)),r.bindGlobal(O.System_Editor_NextTab,()=>g(1)),r.bindGlobal(O.System_Editor_CloseTab,()=>{w.value!=null&&V(w.value)}),r.bindGlobal(O.System_Editor_CloseAllTabs,()=>t.destroyAllTabs())}),Ge(()=>{r.unbindGlobal(O.System_Editor_PreviousTab),r.unbindGlobal(O.System_Editor_NextTab),r.unbindGlobal(O.System_Editor_CloseTab),r.unbindGlobal(O.System_Editor_CloseAllTabs)}),window.addEventListener("beforeunload",()=>{b.value||x()}),(C,E)=>(y(),H(J,null,[d.value.length>0?(y(),D(Oa,{key:0,density:"compact",elevation:"0"},{default:n(()=>[o(Aa,{modelValue:w.value,"onUpdate:modelValue":E[0]||(E[0]=k=>w.value=k)},{default:n(()=>[(y(!0),H(J,null,re(d.value,k=>(y(),D(Pa,{key:k.id,value:k.id,"prepend-icon":k.icon,onMousedown:Re(l=>V(k.id),["middle"]),class:"lab-tab"},{default:n(()=>[S("span",null,[_(m(u(Xn)(k.title,30))+" ",1),k.title.length>30?(y(),D(M,{key:0,activator:"parent"},{default:n(()=>[_(m(k.title),1)]),_:2},1024)):Q("",!0)]),o(N,{icon:"",variant:"plain",density:"compact",class:"ml-3",onClick:Re(l=>V(k.id),["stop"])},{default:n(()=>[o(me,null,{default:n(()=>[_("mdi-close")]),_:1}),o(Fe,{command:u(O).System_Editor_CloseTab},{default:n(()=>[_(m(u(a)("tab.button.closeTab")),1)]),_:1},8,["command"])]),_:2},1032,["onClick"])]),_:2},1032,["value","prepend-icon","onMousedown"]))),128))]),_:1},8,["modelValue"])]),_:1})):Q("",!0),o(Ya,{scrollable:!1,class:"lab-editor"},{default:n(()=>[d.value.length>0?(y(),D(Ma,{key:0,modelValue:w.value,"onUpdate:modelValue":E[1]||(E[1]=k=>w.value=k)},{default:n(()=>[(y(!0),H(J,null,re(d.value,k=>(y(),D(qa,{key:k.id,value:k.id,transition:!1,"reverse-transition":!1,class:"window-item"},{default:n(()=>[o(no,{component:k.component,"component-props":k.componentProps(),onDataUpdate:l=>u(t).replaceTabData(k.id,l)},null,8,["component","component-props","onDataUpdate"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):(y(),H("div",Ro,[o(Uo)]))]),_:1}),s.value?(y(),D(Io,{key:1,"tab-request":s.value,onResolve:E[2]||(E[2]=k=>s.value=void 0)},null,8,["tab-request"])):Q("",!0)],64))}});const No=K(Bo,[["__scopeId","data-v-d87f82ca"]]),qo=P({__name:"MainView",setup(e){const c=L(ie.Explorer);return(i,r)=>(y(),H(J,null,[o(bn,{panel:c.value,"onUpdate:panel":r[0]||(r[0]=a=>c.value=a)},null,8,["panel"]),o(Jn,{"model-value":c.value===u(ie).Explorer},null,8,["model-value"]),o(No)],64))}});export{qo as default};
