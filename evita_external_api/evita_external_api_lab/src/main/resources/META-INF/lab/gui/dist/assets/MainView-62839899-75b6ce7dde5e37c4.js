var Nt=Object.defineProperty;var Dt=(e,i,n)=>i in e?Nt(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;var we=(e,i,n)=>(Dt(e,typeof i!="symbol"?i+"":i,n),n);import{p as De,f as L,s as ae,h as E,i as Et,j as ee,k as _e,l as Ae,n as Bt,g as Pe,q as ot,t as Se,v as Me,x as xe,c as Ue,V as Ze,d as g,y as te,z as nt,m as lt,A as Rt,B as it,C as $t,D as It,E as Lt,F as At,G as Pt,H as Mt,I as Ut,J as Wt,K as Ht,a as Gt,u as jt,b as qt,L as zt,M as et,N as Qt,O as Ft,P as Yt,Q as Ot,R as Kt,S as Xt,T as Jt,U as We,W as Zt,X as ea,Y as O,Z as ta,$ as aa,a0 as G,a1 as He,a2 as de,a3 as oa,a4 as Z,a5 as F,a6 as X,a7 as Ge,o as v,e as x,w as s,a8 as ke,a9 as ue,aa as B,ab as je,ac as na,ad as y,ae as qe,af as j,ag as Ee,ah as rt,ai as st,_ as oe,aj as fe,ak as la,al as T,am as h,an as P,ao as le,ap as Ne,aq as ce,ar as ze,as as Qe,at as ct,au as Be,av as Re,aw as Fe,r as re,ax as ie,ay as ye,az as ia,aA as ut,aB as ra,aC as sa,aD as dt,aE as Ve,aF as ca,aG as Ye,aH as ua,aI as Ce,aJ as da,aK as mt,aL as ma,aM as $e,aN as vt,aO as va,aP as Ie,aQ as Le,aR as pa,aS as pt,aT as gt,aU as ft,aV as ga,aW as fa,aX as ha,aY as ba,aZ as ya,a_ as _a,a$ as wa,b0 as Sa,b1 as ka,b2 as Va,b3 as Ca,b4 as Ta,b5 as xa,b6 as Na,b7 as Da,b8 as Ea,b9 as Ba,ba as Ra,bb as $a,bc as Ia,bd as La,be as Aa,bf as Pa,bg as Ma,bh as Ua,bi as Wa,bj as Ha}from"./index-75b6ce7dde5e37c4.js";import{a as ht,u as bt,b as Ga}from"./layout-ea9ea00d-75b6ce7dde5e37c4.js";const ja=De({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function qa(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=i;let l=0,t=0;const a=L(null),c=ae(0),m=ae(0),o=ae(0),d=ae(!1),p=ae(!1),u=E(()=>Number(e.scrollThreshold)),r=E(()=>Et((u.value-c.value)/u.value||0)),f=()=>{const S=a.value;if(!S||n&&!n.value)return;l=c.value,c.value="window"in S?S.pageYOffset:S.scrollTop;const w=S instanceof Window?document.documentElement.scrollHeight:S.scrollHeight;if(t!==w){t=w;return}p.value=c.value<l,o.value=Math.abs(c.value-u.value)};return ee(p,()=>{m.value=m.value||c.value}),ee(d,()=>{m.value=0}),_e(()=>{ee(()=>e.scrollTarget,S=>{var C;const w=S?document.querySelector(S):window;w&&w!==a.value&&((C=a.value)==null||C.removeEventListener("scroll",f),a.value=w,a.value.addEventListener("scroll",f,{passive:!0}))},{immediate:!0})}),Ae(()=>{var S;(S=a.value)==null||S.removeEventListener("scroll",f)}),n&&ee(n,f,{immediate:!0}),{scrollThreshold:u,currentScroll:c,currentThreshold:o,isScrollActive:d,scrollRatio:r,isScrollingUp:p,savedScroll:m}}const za=De({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Bt(),...ht(),...ja(),height:{type:[Number,String],default:64}},"VAppBar"),yt=Pe()({name:"VAppBar",props:za(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:n}=i;const l=L(),t=ot(e,"modelValue"),a=E(()=>{var _;const V=new Set(((_=e.scrollBehavior)==null?void 0:_.split(" "))??[]);return{hide:V.has("hide"),fullyHide:V.has("fully-hide"),inverted:V.has("inverted"),collapse:V.has("collapse"),elevate:V.has("elevate"),fadeImage:V.has("fade-image")}}),c=E(()=>{const V=a.value;return V.hide||V.fullyHide||V.inverted||V.collapse||V.elevate||V.fadeImage||!t.value}),{currentScroll:m,scrollThreshold:o,isScrollingUp:d,scrollRatio:p}=qa(e,{canScroll:c}),u=E(()=>a.value.hide||a.value.fullyHide),r=E(()=>e.collapse||a.value.collapse&&(a.value.inverted?p.value>0:p.value===0)),f=E(()=>e.flat||a.value.fullyHide&&!t.value||a.value.elevate&&(a.value.inverted?m.value>0:m.value===0)),S=E(()=>a.value.fadeImage?a.value.inverted?1-p.value:p.value:void 0),w=E(()=>{var k,N;if(a.value.hide&&a.value.inverted)return 0;const V=((k=l.value)==null?void 0:k.contentHeight)??0,_=((N=l.value)==null?void 0:N.extensionHeight)??0;return u.value?m.value<o.value||a.value.fullyHide?V+_:V:V+_});Se(E(()=>!!e.scrollBehavior),()=>{nt(()=>{u.value?a.value.inverted?t.value=m.value>o.value:t.value=d.value||m.value<o.value:t.value=!0})});const{ssrBootStyles:C}=Me(),{layoutItemStyles:R}=bt({id:e.name,order:E(()=>parseInt(e.order,10)),position:xe(e,"location"),layoutSize:w,elementSize:ae(void 0),active:t,absolute:xe(e,"absolute")});return Ue(()=>{const V=Ze.filterProps(e);return g(Ze,te({ref:l,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...R.value,"--v-toolbar-image-opacity":S.value,height:void 0,...C.value},e.style]},V,{collapse:r.value,flat:f.value}),n)}),{}}});const Qa=De({scrollable:Boolean,...lt(),...Rt(),...it({tag:"main"})},"VMain"),Fa=Pe()({name:"VMain",props:Qa(),setup(e,i){let{slots:n}=i;const{dimensionStyles:l}=$t(e),{mainStyles:t}=Ga(),{ssrBootStyles:a}=Me();return Ue(()=>g(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[t.value,a.value,l.value,e.style]},{default:()=>{var c,m;return[e.scrollable?g("div",{class:"v-main__scroller"},[(c=n.default)==null?void 0:c.call(n)]):(m=n.default)==null?void 0:m.call(n)]}})),{}}});function Ya(e){let{rootEl:i,isSticky:n,layoutItemStyles:l}=e;const t=ae(!1),a=ae(0),c=E(()=>{const d=typeof t.value=="boolean"?"top":t.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[d]:It(a.value)}:{top:l.value.top}]});_e(()=>{ee(n,d=>{d?window.addEventListener("scroll",o,{passive:!0}):window.removeEventListener("scroll",o)},{immediate:!0})}),Ae(()=>{window.removeEventListener("scroll",o)});let m=0;function o(){const d=m>window.scrollY?"up":"down",p=i.value.getBoundingClientRect(),u=parseFloat(l.value.top??0),r=window.scrollY-Math.max(0,a.value-u),f=p.height+Math.max(a.value,u)-window.scrollY-window.innerHeight,S=parseFloat(getComputedStyle(i.value).getPropertyValue("--v-body-scroll-y"))||0;p.height<window.innerHeight-u?(t.value="top",a.value=u):d==="up"&&t.value==="bottom"||d==="down"&&t.value==="top"?(a.value=window.scrollY+p.top-S,t.value=!0):d==="down"&&f<=0?(a.value=0,t.value="bottom"):d==="up"&&r<=0&&(S?t.value!=="top"&&(a.value=-r+S+u,t.value="top"):(a.value=p.top+r,t.value="top")),m=window.scrollY}return{isStuck:t,stickyStyles:c}}const Oa=100,Ka=20;function tt(e){const i=1.41421356237;return(e<0?-1:1)*Math.sqrt(Math.abs(e))*i}function at(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let i=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const l=tt(i),t=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);i+=(t-l)*Math.abs(t),n===e.length-1&&(i*=.5)}return tt(i)*1e3}function Xa(){const e={};function i(t){Array.from(t.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new Lt(Ka))).push([t.timeStamp,a])})}function n(t){Array.from(t.changedTouches).forEach(a=>{delete e[a.identifier]})}function l(t){var d;const a=(d=e[t])==null?void 0:d.values().reverse();if(!a)throw new Error(`No samples for touch id ${t}`);const c=a[0],m=[],o=[];for(const p of a){if(c[0]-p[0]>Oa)break;m.push({t:p[0],d:p[1].clientX}),o.push({t:p[0],d:p[1].clientY})}return{x:at(m),y:at(o),get direction(){const{x:p,y:u}=this,[r,f]=[Math.abs(p),Math.abs(u)];return r>f&&p>=0?"right":r>f&&p<=0?"left":f>r&&u>=0?"down":f>r&&u<=0?"up":Ja()}}}return{addMovement:i,endTouch:n,getVelocity:l}}function Ja(){throw new Error}function Za(e){let{el:i,isActive:n,isTemporary:l,width:t,touchless:a,position:c}=e;_e(()=>{window.addEventListener("touchstart",V,{passive:!0}),window.addEventListener("touchmove",_,{passive:!1}),window.addEventListener("touchend",k,{passive:!0})}),Ae(()=>{window.removeEventListener("touchstart",V),window.removeEventListener("touchmove",_),window.removeEventListener("touchend",k)});const m=E(()=>["left","right"].includes(c.value)),{addMovement:o,endTouch:d,getVelocity:p}=Xa();let u=!1;const r=ae(!1),f=ae(0),S=ae(0);let w;function C($,A){return(c.value==="left"?$:c.value==="right"?document.documentElement.clientWidth-$:c.value==="top"?$:c.value==="bottom"?document.documentElement.clientHeight-$:be())-(A?t.value:0)}function R($){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const U=c.value==="left"?($-S.value)/t.value:c.value==="right"?(document.documentElement.clientWidth-$-S.value)/t.value:c.value==="top"?($-S.value)/t.value:c.value==="bottom"?(document.documentElement.clientHeight-$-S.value)/t.value:be();return A?Math.max(0,Math.min(1,U)):U}function V($){if(a.value)return;const A=$.changedTouches[0].clientX,U=$.changedTouches[0].clientY,H=25,Y=c.value==="left"?A<H:c.value==="right"?A>document.documentElement.clientWidth-H:c.value==="top"?U<H:c.value==="bottom"?U>document.documentElement.clientHeight-H:be(),W=n.value&&(c.value==="left"?A<t.value:c.value==="right"?A>document.documentElement.clientWidth-t.value:c.value==="top"?U<t.value:c.value==="bottom"?U>document.documentElement.clientHeight-t.value:be());(Y||W||n.value&&l.value)&&(w=[A,U],S.value=C(m.value?A:U,n.value),f.value=R(m.value?A:U),u=S.value>-20&&S.value<80,d($),o($))}function _($){const A=$.changedTouches[0].clientX,U=$.changedTouches[0].clientY;if(u){if(!$.cancelable){u=!1;return}const Y=Math.abs(A-w[0]),W=Math.abs(U-w[1]);(m.value?Y>W&&Y>3:W>Y&&W>3)?(r.value=!0,u=!1):(m.value?W:Y)>3&&(u=!1)}if(!r.value)return;$.preventDefault(),o($);const H=R(m.value?A:U,!1);f.value=Math.max(0,Math.min(1,H)),H>1?S.value=C(m.value?A:U,!0):H<0&&(S.value=C(m.value?A:U,!1))}function k($){if(u=!1,!r.value)return;o($),r.value=!1;const A=p($.changedTouches[0].identifier),U=Math.abs(A.x),H=Math.abs(A.y);(m.value?U>H&&U>400:H>U&&H>3)?n.value=A.direction===({left:"right",right:"left",top:"down",bottom:"up"}[c.value]||be()):n.value=f.value>.5}const N=E(()=>r.value?{transform:c.value==="left"?`translateX(calc(-100% + ${f.value*t.value}px))`:c.value==="right"?`translateX(calc(100% - ${f.value*t.value}px))`:c.value==="top"?`translateY(calc(-100% + ${f.value*t.value}px))`:c.value==="bottom"?`translateY(calc(100% - ${f.value*t.value}px))`:be(),transition:"none"}:void 0);return Se(r,()=>{var U,H;const $=((U=i.value)==null?void 0:U.style.transform)??null,A=((H=i.value)==null?void 0:H.style.transition)??null;nt(()=>{var Y,W,I,b;(W=i.value)==null||W.style.setProperty("transform",((Y=N.value)==null?void 0:Y.transform)||"none"),(b=i.value)==null||b.style.setProperty("transition",((I=N.value)==null?void 0:I.transition)||null)}),At(()=>{var Y,W;(Y=i.value)==null||Y.style.setProperty("transform",$),(W=i.value)==null||W.style.setProperty("transition",A)})}),{isDragging:r,dragProgress:f,dragStyles:N}}function be(){throw new Error}const eo=["start","end","left","right","top","bottom"],to=De({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>eo.includes(e)},sticky:Boolean,...Pt(),...lt(),...Mt(),...Ut({mobile:null}),...Wt(),...ht(),...Ht(),...it({tag:"nav"}),...Gt()},"VNavigationDrawer"),_t=Pe()({name:"VNavigationDrawer",props:to(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,i){let{attrs:n,emit:l,slots:t}=i;const{isRtl:a}=jt(),{themeClasses:c}=qt(e),{borderClasses:m}=zt(e),{backgroundColorClasses:o,backgroundColorStyles:d}=et(xe(e,"color")),{elevationClasses:p}=Qt(e),{displayClasses:u,mobile:r}=Ft(e),{roundedClasses:f}=Yt(e),S=Ot(),w=ot(e,"modelValue",null,J=>!!J),{ssrBootStyles:C}=Me(),{scopeId:R}=Kt(),V=L(),_=ae(!1),{runOpenDelay:k,runCloseDelay:N}=ta(e,J=>{_.value=J}),$=E(()=>e.rail&&e.expandOnHover&&_.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),A=E(()=>Xt(e.location,a.value)),U=E(()=>e.persistent),H=E(()=>!e.permanent&&(r.value||e.temporary)),Y=E(()=>e.sticky&&!H.value&&A.value!=="bottom");Se(()=>e.expandOnHover&&e.rail!=null,()=>{ee(_,J=>l("update:rail",!J))}),Se(()=>!e.disableResizeWatcher,()=>{ee(H,J=>!e.permanent&&aa(()=>w.value=!J))}),Se(()=>!e.disableRouteWatcher&&!!S,()=>{ee(S.currentRoute,()=>H.value&&(w.value=!1))}),ee(()=>e.permanent,J=>{J&&(w.value=!0)}),e.modelValue==null&&!H.value&&(w.value=e.permanent||!r.value);const{isDragging:W,dragProgress:I}=Za({el:V,isActive:w,isTemporary:H,width:$,touchless:xe(e,"touchless"),position:A}),b=E(()=>{const J=H.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):$.value;return W.value?J*I.value:J}),D=E(()=>["top","bottom"].includes(e.location)?0:$.value),{layoutItemStyles:M,layoutItemScrimStyles:me}=bt({id:e.name,order:E(()=>parseInt(e.order,10)),position:A,layoutSize:b,elementSize:D,active:E(()=>w.value||W.value),disableTransitions:E(()=>W.value),absolute:E(()=>e.absolute||Y.value&&typeof se.value!="string")}),{isStuck:se,stickyStyles:he}=Ya({rootEl:V,isSticky:Y,layoutItemStyles:M}),K=et(E(()=>typeof e.scrim=="string"?e.scrim:null)),xt=E(()=>({...W.value?{opacity:I.value*.2,transition:"none"}:void 0,...me.value}));return Jt({VList:{bgColor:"transparent"}}),Ue(()=>{const J=t.image||e.image;return g(O,null,[g(e.tag,te({ref:V,onMouseenter:k,onMouseleave:N,class:["v-navigation-drawer",`v-navigation-drawer--${A.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":_.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":H.value,"v-navigation-drawer--persistent":U.value,"v-navigation-drawer--active":w.value,"v-navigation-drawer--sticky":Y.value},c.value,o.value,m.value,u.value,p.value,f.value,e.class],style:[d.value,M.value,C.value,he.value,e.style,["top","bottom"].includes(A.value)?{height:"auto"}:{}]},R,n),{default:()=>{var Ke,Xe,Je;return[J&&g("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?g(Zt,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):g(We,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&g("div",{class:"v-navigation-drawer__prepend"},[(Ke=t.prepend)==null?void 0:Ke.call(t)]),g("div",{class:"v-navigation-drawer__content"},[(Xe=t.default)==null?void 0:Xe.call(t)]),t.append&&g("div",{class:"v-navigation-drawer__append"},[(Je=t.append)==null?void 0:Je.call(t)])]}}),g(ea,{name:"fade-transition"},{default:()=>[H.value&&(W.value||w.value)&&!!e.scrim&&g("div",te({class:["v-navigation-drawer__scrim",K.backgroundColorClasses.value],style:[xt.value,K.backgroundColorStyles.value],onClick:()=>{U.value||(w.value=!1)}},R),null)]})])}),{isStuck:se}}});var ve=(e=>(e.Explorer="explorer",e))(ve||{});const ao="/lab/logo/evitalab-logo-mini.png?raw=true",oo="/lab/documentation.svg",no="/lab/discord.svg";var q=(e=>(e.Keymap="keymap",e.EvitaLabGithub="evitaLabGithub",e.DiscussEvitaLab="discussEvitaLab",e.ReportEvitaLabIssue="reportEvitaLabIssue",e.EvitaDBDocumentation="evitaDBDocumentation",e.EvitaDBGithub="evitaDBGithub",e.DiscussEvitaDB="discussEvitaDB",e.ReportEvitaDBIssue="reportEvitaDBIssue",e))(q||{});const lo=G({__name:"ManageMenu",setup(e){const i=He(),n=de(),l=oa(),t=Z(),{t:a}=F(),c=[{type:"subheader",title:a("panel.manage.manage.title")},{title:a(`panel.manage.manage.item.${q.Keymap}`),value:q.Keymap,command:X.System_Keymap,props:{prependIcon:"mdi-keyboard-outline"}},{type:"subheader",title:a("panel.manage.evitaLabHelp.title")},{title:a(`panel.manage.evitaLabHelp.item.${q.EvitaLabGithub}`),value:q.EvitaLabGithub,props:{prependIcon:"mdi-github"}},{title:a(`panel.manage.evitaLabHelp.item.${q.DiscussEvitaLab}`),value:q.DiscussEvitaLab,props:{prependIcon:"mdi-forum-outline"}},{title:a(`panel.manage.evitaLabHelp.item.${q.ReportEvitaLabIssue}`),value:q.ReportEvitaLabIssue,props:{prependIcon:"mdi-bug"}},{type:"subheader",title:a("panel.manage.evitaDBHelp.title")},{title:a(`panel.manage.evitaDBHelp.item.${q.EvitaDBDocumentation}`),value:q.EvitaDBDocumentation,props:{prependIcon:"mdi-book-open-variant"}},{title:a(`panel.manage.evitaDBHelp.item.${q.EvitaDBGithub}`),value:q.EvitaDBGithub,props:{prependIcon:"mdi-github"}},{title:a(`panel.manage.evitaDBHelp.item.${q.DiscussEvitaDB}`),value:q.DiscussEvitaDB,props:{prependIcon:"mdi-forum-outline"}},{title:a(`panel.manage.evitaDBHelp.item.${q.ReportEvitaDBIssue}`),value:q.ReportEvitaDBIssue,props:{prependIcon:"mdi-bug"}}];function m(){n.createTab(l.createNew())}function o(d){if(d.length>0)switch(d[0]){case q.Keymap:m();break;case q.EvitaLabGithub:window.open("https://github.com/lukashornych/evitalab","_blank");break;case q.DiscussEvitaLab:window.open("https://discord.gg/VsNBWxgmSw","_blank");break;case q.ReportEvitaLabIssue:window.open("https://github.com/lukashornych/evitalab/issues/new","_blank");break;case q.EvitaDBDocumentation:window.open("https://evitadb.io/documentation","_blank");break;case q.EvitaDBGithub:window.open("https://github.com/FgForrest/evitaDB","_blank");break;case q.DiscussEvitaDB:window.open("https://discord.gg/VsNBWxgmSw","_blank");break;case q.ReportEvitaDBIssue:window.open("https://github.com/FgForrest/evitaDB/issues/new","_blank");break;default:t.error(new st(`Unknown manage option ${d[0]}`))}}return _e(()=>{i.bindGlobal(X.System_Keymap,m)}),Ge(()=>{i.unbindGlobal(X.System_Keymap)}),(d,p)=>(v(),x(rt,null,{activator:s(({props:u})=>[g(je,te(u,{icon:"",variant:"text",class:"manage-button"}),{default:s(()=>[ke(d.$slots,"default",{},void 0,!0),g(ue,{activator:"parent"},{default:s(()=>p[0]||(p[0]=[B(" Manage evitaLab ")])),_:1})]),_:2},1040)]),default:s(()=>[g(Ee,{items:c,"onUpdate:selected":o},{title:s(({item:u})=>[g(na,null,{default:s(()=>[B(y(u.title)+" ",1),u.command!=null?(v(),x(qe,{key:0,command:u.command},{default:s(()=>[B(y(u.title),1)]),_:2},1032,["command"])):j("",!0)]),_:2},1024)]),_:1})]),_:3}))}});const io=oe(lo,[["__scopeId","data-v-d2e32f29"]]),ro={class:"lab-nav-links"},so={href:"https://evitadb.io/documentation",target:"_blank"},co=["alt"],uo={href:"https://discord.gg/VsNBWxgmSw",target:"_blank"},mo=["alt"],vo=G({__name:"WorkspacePanel",props:{panel:{}},emits:["update:panel"],setup(e,{emit:i}){const n=He(),{t:l}=F(),t=e,a=i,c=m();function m(){const d=[];return d.push(new fe(ve.Explorer,l(`panel.item.${ve.Explorer}`),"mdi-connection",()=>{},X.System_Panels_ConnectionsExplorer)),d}function o(d){d.value?a("update:panel",d.id):a("update:panel",null)}return _e(()=>{n.bindGlobal(X.System_Panels_ConnectionsExplorer,()=>{t.panel===ve.Explorer?a("update:panel",null):a("update:panel",ve.Explorer)})}),Ge(()=>{n.unbindGlobal(X.System_Panels_ConnectionsExplorer)}),(d,p)=>(v(),x(_t,{permanent:"",rail:"",class:"bg-primary-dark"},{prepend:s(()=>[g(io,null,{default:s(()=>[g(la,{size:"30px"},{default:s(()=>[g(We,{alt:"evitaLab Logo",width:"30px",height:"30px",src:ao})]),_:1})]),_:1})]),append:s(()=>[T("ul",ro,[T("li",null,[T("a",so,[T("img",{src:oo,alt:h(l)("panel.link.evitaDBDocumentation.icon.alt")},null,8,co),g(ue,{activator:"parent"},{default:s(()=>[B(y(h(l)("panel.link.evitaDBDocumentation.tooltip")),1)]),_:1})])]),T("li",null,[T("a",uo,[T("img",{src:no,alt:h(l)("panel.link.discord.icon.alt")},null,8,mo),g(ue,{activator:"parent"},{default:s(()=>[B(y(h(l)("panel.link.discord.tooltip")),1)]),_:1})])])])]),default:s(()=>[g(Ee,{density:"compact",nav:"",selected:[d.panel],"onClick:select":o,class:"navigation-items"},{default:s(()=>[(v(!0),P(O,null,le(h(c),u=>(v(),x(Ne,{key:u.value,value:u.value},{default:s(()=>[g(ce,null,{default:s(()=>[B(y(u.prependIcon),1)]),_:2},1024),g(qe,{command:u.command},{default:s(()=>[B(y(u.title),1)]),_:2},1032,["command"])]),_:2},1032,["value"]))),128))]),_:1},8,["selected"])]),_:1}))}});const po=oe(vo,[["__scopeId","data-v-d2d1dd7a"]]);var Q=(e=>(e.GraphQLSystemAPIConsole="graphQLSystemApiConsole",e.JfrRecordings="jfrRecordings",e.Server="server",e.Tasks="tasks",e.ManageSubheader="manageSubheader",e.Refresh="refresh",e.CloseAllSessions="closeAllSessions",e.ModifySubheader="modifySubheader",e.Edit="edit",e.Remove="remove",e.CatalogsSubheader="catalogsSubheader",e.CreateCatalog="createCatalog",e.CatalogBackups="catalogBackups",e))(Q||{});const wt=Symbol("connection");function go(e){ze(wt,e)}function St(){return Qe(wt)}const kt=Symbol("serverStatus");function fo(e){ze(kt,e)}function Vt(){return Qe(kt)}const Ct=Symbol("catalog");function ho(e){ze(Ct,e)}function bo(){return Qe(Ct)}const yo={class:"tree-view-item__content"},_o={key:0,class:"tree-view-item__flags"},wo={key:0,class:"tree-view-item__flags"},So=G({__name:"VTreeViewItem",props:{openable:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},prependIcon:{},loading:{type:Boolean,default:!1},flags:{default:()=>[]},actions:{default:()=>[]}},emits:["click:action","click:actionMenu"],setup(e,{emit:i}){const n=e,l=L(!1),t=i;function a(){t("click:actionMenu"),n.actions&&n.actions.length>0&&(l.value=!0)}return(c,m)=>(v(),x(Ne,{"prepend-icon":null,"append-icon":null,onContextmenu:Re(a,["prevent"])},{default:s(()=>[T("div",yo,[c.openable?(v(),x(ce,{key:0},{default:s(()=>[B(y(c.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1})):(v(),x(ce,{key:1})),c.loading?(v(),x(ct,{key:2})):(v(),x(ce,{key:3},{default:s(()=>[B(y(c.prependIcon),1)]),_:1})),g(ue,null,{activator:s(({props:o})=>[T("span",te(o,{class:"tree-view-item__text text-truncate"}),[ke(c.$slots,"default",{},()=>[m[3]||(m[3]=T("span",{class:"text-disabled"}," No items found ",-1))],!0),c.flags.length>0?(v(),P("span",_o,[(v(!0),P(O,null,le(c.flags,d=>(v(),P("span",{key:d.value,class:Be(["tree-view-item__flag",`tree-view-item__flag--${d.type}`])},y(d.value),3))),128))])):j("",!0)],16)]),default:s(()=>[ke(c.$slots,"default",{},void 0,!0),c.flags.length>0?(v(),P("span",wo,[(v(!0),P(O,null,le(c.flags,o=>(v(),P("span",{key:o.value,class:Be(["tree-view-item__flag","tree-view-item__lg-flag",`tree-view-item__flag--${o.type}`])},y(o.value),3))),128))])):j("",!0)]),_:3}),c.actions&&c.actions.length>0?(v(),x(rt,{key:4,"menu-items":c.actions,modelValue:l.value,"onUpdate:modelValue":m[2]||(m[2]=o=>l.value=o)},{activator:s(({props:o})=>[g(ce,te(o,{class:"text-gray-light",onClick:m[0]||(m[0]=d=>t("click:actionMenu"))}),{default:s(()=>m[4]||(m[4]=[B(" mdi-dots-vertical ")])),_:2},1040)]),default:s(()=>[g(Ee,{density:"compact",items:c.actions,"onClick:select":m[1]||(m[1]=o=>c.$emit("click:action",o.id))},{item:s(({props:o})=>[g(Ne,{"prepend-icon":o.prependIcon,value:o.value,disabled:o.disabled},{default:s(()=>[B(y(o.title),1)]),_:2},1032,["prepend-icon","value","disabled"])]),_:1},8,["items"])]),_:1},8,["menu-items","modelValue"])):j("",!0)])]),_:3}))}});const Oe=oe(So,[["__scopeId","data-v-1c78241c"]]);var z=(e=>(e.EvitaQLConsole="evitaQLConsole",e.GraphQLDataAPIConsole="graphQLDataApiConsole",e.GraphQLSchemaAPIConsole="graphQLSchemaApiConsole",e.ViewSchema="viewSchema",e.ManageSubheader="manageSubheader",e.CloseAllSessions="closeAllSessions",e.ModifySubheader="modifySubheader",e.DropCatalog="dropCatalog",e.RenameCatalog="renameCatalog",e.ReplaceCatalog="replaceCatalog",e.SwitchCatalogToAliveState="switchCatalogToAliveState",e.CollectionsSubheader="collectionsSubheader",e.CreateCollection="createCollection",e))(z||{});const ko={class:"pl-8 text-disabled"},Tt=G({__name:"VTreeViewEmptyItem",setup(e){const{t:i}=F();return(n,l)=>(v(),x(Ne,null,{default:s(()=>[T("span",ko,y(h(i)("common.list.empty")),1)]),_:1}))}});var ne=(e=>(e.ViewEntities="viewEntities",e.ViewSchema="viewSchema",e.ModifySubheader="modifySubheader",e.DropCollection="dropCollection",e.RenameCollection="renameCollection",e))(ne||{});class pe{constructor(i){we(this,"title");we(this,"type","subheader");this.title=i}}const Vo=G({__name:"DropCollectionDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{},entityType:{}},emits:["update:modelValue","drop"],setup(e,{emit:i}){const n=Fe(),l=Z(),{t}=F(),a=e,c=i;async function m(){try{return await n.dropCollection(a.connection,a.catalogName,a.entityType)?(l.success(t("explorer.collection.drop.notification.collectionDropped",{entityType:a.entityType})),c("drop")):l.info(t("explorer.collection.drop.notification.collectionNotDropped",{entityType:a.entityType})),!0}catch(o){return l.error(t("explorer.collection.drop.notification.couldNotDropCollection",{entityType:a.entityType,reason:o.message})),!1}}return(o,d)=>{const p=re("I18nT");return v(),x(ie,{"model-value":o.modelValue,dangerous:"",changed:"","confirm-button-icon":"mdi-delete-outline",confirm:m,"onUpdate:modelValue":d[0]||(d[0]=u=>c("update:modelValue",u))},{title:s(()=>[g(p,{keypath:"explorer.collection.drop.title"},{entityType:s(()=>[T("strong",null,y(o.entityType),1)]),_:1})]),"prepend-form":s(()=>[B(y(h(t)("explorer.collection.drop.question")),1)]),"confirm-button-body":s(()=>[B(y(h(t)("common.button.drop")),1)]),_:1},8,["model-value"])}}}),Co=G({__name:"RenameCollectionDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{},entityType:{}},emits:["update:modelValue","rename"],setup(e,{emit:i}){const n=Fe(),l=Z(),{t}=F(),a=e,c=i,m=[r=>r!=null&&r.trim().length>0?!0:t("explorer.collection.rename.form.newName.validations.required"),async r=>{const f=await n.isEntityTypeValid(a.connection,r);return f==null?!0:t(`explorer.collection.rename.form.newName.validations.${f}`)},async r=>r===a.entityType||await n.isEntityTypeAvailable(a.connection,a.catalogName,r)?!0:t("explorer.collection.rename.form.newName.validations.notAvailable")],o=L(a.entityType),d=E(()=>o.value!==a.entityType);function p(){o.value=a.entityType}async function u(){try{return await n.renameCollection(a.connection,a.catalogName,a.entityType,o.value)?(l.success(t("explorer.collection.rename.notification.collectionRenamed",{entityType:a.entityType,newName:o.value})),c("rename")):l.info(t("explorer.collection.rename.notification.collectionNotRenamed",{entityType:a.entityType})),!0}catch(r){return l.error(t("explorer.collection.rename.notification.couldNotRenameCollection",{entityType:a.entityType,reason:r.message})),!1}}return(r,f)=>{const S=re("I18nT");return v(),x(ie,{"model-value":r.modelValue,changed:d.value,dangerous:"","confirm-button-icon":"mdi-pencil-outline",confirm:u,reset:p,"onUpdate:modelValue":f[1]||(f[1]=w=>c("update:modelValue",w))},{title:s(()=>[g(S,{keypath:"explorer.collection.rename.title"},{entityType:s(()=>[T("strong",null,y(r.entityType),1)]),_:1})]),default:s(()=>[g(ye,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=w=>o.value=w),label:h(t)("explorer.collection.rename.form.newName.label"),rules:m,required:""},null,8,["modelValue","label"])]),"confirm-button-body":s(()=>[B(y(h(t)("common.button.rename")),1)]),_:1},8,["model-value","changed"])}}}),To=G({__name:"CollectionItem",props:{entityCollection:{}},emits:["change"],setup(e,{emit:i}){const n=de(),l=ia(),t=ut(),{t:a}=F(),c=e,m=i,o=Vt(),d=L(!1),p=L(!1),u=St(),r=bo(),f=E(()=>R()),S=E(()=>Array.from(f.value.values()));if(r.value==null)throw new st("Catalog schema is not loaded yet, but collection item is already rendered!");function w(){n.createTab(l.createNew(u,r.value.name,c.entityCollection.entityType,void 0,!0))}function C(_){const k=f.value.get(_);k instanceof fe&&k.execute()}function R(){const _=o.value!=null&&!o.value.readOnly,k=new Map;return k.set(ne.ViewEntities,V(ne.ViewEntities,ra.icon(),w)),k.set(ne.ViewSchema,V(ne.ViewSchema,dt.icon(),()=>n.createTab(t.createNew(u,new sa(r.value.name,c.entityCollection.entityType))))),k.set(ne.ModifySubheader,new pe(a("explorer.collection.subheader.modify"))),k.set(ne.RenameCollection,V(ne.RenameCollection,"mdi-pencil-outline",()=>p.value=!0,_)),k.set(ne.DropCollection,V(ne.DropCollection,"mdi-delete-outline",()=>d.value=!0,_)),k}function V(_,k,N,$=!0){return new fe(_,a(`explorer.collection.actions.${_}`),k,N,void 0,!$)}return(_,k)=>(v(),P("div",null,[g(Oe,{"prepend-icon":"mdi-list-box-outline",actions:S.value,onClick:w,"onClick:action":C,class:"text-gray-light"},{default:s(()=>[B(y(_.entityCollection.entityType),1)]),_:1},8,["actions"]),p.value?(v(),x(Co,{key:0,modelValue:p.value,"onUpdate:modelValue":k[0]||(k[0]=N=>p.value=N),connection:h(u),"catalog-name":h(r).name,"entity-type":_.entityCollection.entityType,onRename:k[1]||(k[1]=N=>m("change"))},null,8,["modelValue","connection","catalog-name","entity-type"])):j("",!0),d.value?(v(),x(Vo,{key:1,modelValue:d.value,"onUpdate:modelValue":k[2]||(k[2]=N=>d.value=N),connection:h(u),"catalog-name":h(r).name,"entity-type":_.entityCollection.entityType,onDrop:k[3]||(k[3]=N=>m("change"))},null,8,["modelValue","connection","catalog-name","entity-type"])):j("",!0)]))}}),xo=G({__name:"RenameCatalogDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","rename"],setup(e,{emit:i}){const n=Ve(),l=Z(),{t}=F(),a=e,c=i,m=[r=>r!=null&&r.trim().length>0?!0:t("explorer.catalog.rename.form.newName.validations.required"),async r=>{const f=await n.isCatalogNameValid(a.connection,r);return f==null?!0:t(`explorer.catalog.rename.form.newName.validations.${f}`)},async r=>r===a.catalogName||await n.isCatalogNameAvailable(a.connection,r)?!0:t("explorer.catalog.rename.form.newName.validations.notAvailable")],o=L(a.catalogName),d=E(()=>a.catalogName!==o.value);function p(){o.value=a.catalogName}async function u(){try{return await n.renameCatalog(a.connection,a.catalogName,o.value)?(l.success(t("explorer.catalog.rename.notification.catalogRenamed",{catalogName:a.catalogName,newName:o.value})),c("rename")):l.info(t("explorer.catalog.rename.notification.catalogNotRenamed",{catalogName:a.catalogName})),!0}catch(r){return l.error(t("explorer.catalog.rename.notification.couldNotRenameCatalog",{catalogName:a.catalogName,reason:r.message})),!1}}return(r,f)=>{const S=re("I18nT");return v(),x(ie,{"model-value":r.modelValue,changed:d.value,dangerous:"","confirm-button-icon":"mdi-pencil-outline",confirm:u,reset:p,"onUpdate:modelValue":f[1]||(f[1]=w=>c("update:modelValue",w))},{title:s(()=>[g(S,{keypath:"explorer.catalog.rename.title"},{catalogName:s(()=>[T("strong",null,y(r.catalogName),1)]),_:1})]),default:s(()=>[g(ye,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=w=>o.value=w),label:h(t)("explorer.catalog.rename.form.newName.label"),rules:m,required:""},null,8,["modelValue","label"])]),"confirm-button-body":s(()=>[B(y(h(t)("common.button.rename")),1)]),_:1},8,["model-value","changed"])}}}),No=G({__name:"DropCatalogDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","drop"],setup(e,{emit:i}){const n=Ve(),l=Z(),{t}=F(),a=e,c=i;async function m(){try{return await n.dropCatalog(a.connection,a.catalogName)?(l.success(t("explorer.catalog.drop.notification.catalogDropped",{catalogName:a.catalogName})),c("drop")):l.info(t("explorer.catalog.drop.notification.catalogNotDropped",{catalogName:a.catalogName})),!0}catch(o){return l.error(t("explorer.catalog.drop.notification.couldNotDropCatalog",{catalogName:a.catalogName,reason:o.message})),!1}}return(o,d)=>{const p=re("I18nT");return v(),x(ie,{"model-value":o.modelValue,dangerous:"",changed:"","confirm-button-icon":"mdi-delete-outline",confirm:m,"onUpdate:modelValue":d[0]||(d[0]=u=>c("update:modelValue",u))},{title:s(()=>[g(p,{keypath:"explorer.catalog.drop.title"},{catalogName:s(()=>[T("strong",null,y(o.catalogName),1)]),_:1})]),"prepend-form":s(()=>[B(y(h(t)("explorer.catalog.drop.question")),1)]),"confirm-button-body":s(()=>[B(y(h(t)("common.button.drop")),1)]),_:1},8,["model-value"])}}}),Do=G({__name:"ReplaceCatalogDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","replace"],setup(e,{emit:i}){const n=Ve(),l=Z(),{t}=F(),a=e,c=i,m=[w=>w!=null&&w.trim().length>0?!0:t("explorer.catalog.replace.form.catalogNameToBeReplacedWith.validations.required"),async w=>w===a.catalogName||await n.isCatalogExists(a.connection,w)?!0:t("explorer.catalog.replace.form.catalogNameToBeReplacedWith.validations.notExists")],o=L(),d=E(()=>o.value==null?[]:o.value.map(w=>w.name)),p=L(!1),u=L(),r=E(()=>u.value!=null&&u.value.length>0);n.getCatalogs(a.connection).then(w=>{o.value=w.filter(C=>C.name!==a.catalogName),p.value=!0});function f(){o.value=[],p.value=!1,u.value=""}async function S(){try{return await n.replaceCatalog(a.connection,u.value,a.catalogName)?(l.success(t("explorer.catalog.replace.notification.catalogReplaced",{catalogNameToBeReplaced:a.catalogName,catalogNameToBeReplacedWith:u.value})),c("replace")):l.info(t("explorer.catalog.replace.notification.catalogNotReplaced",{catalogNameToBeReplaced:a.catalogName})),!0}catch(w){return l.error(t("explorer.catalog.replace.notification.couldNotReplaceCatalog",{catalogNameToBeReplaced:a.catalogName,reason:w.message})),!1}}return(w,C)=>{const R=re("I18nT");return v(),x(ie,{"model-value":w.modelValue,dangerous:"",changed:r.value,"confirm-button-icon":"mdi-file-replace-outline",confirm:S,reset:f,"onUpdate:modelValue":C[1]||(C[1]=V=>c("update:modelValue",V))},{title:s(()=>[g(R,{keypath:"explorer.catalog.replace.title"},{catalogNameToBeReplaced:s(()=>[T("strong",null,y(w.catalogName),1)]),_:1})]),default:s(()=>[g(ca,{modelValue:u.value,"onUpdate:modelValue":C[0]||(C[0]=V=>u.value=V),label:h(t)("explorer.catalog.replace.form.catalogNameToBeReplacedWith.label"),items:d.value,rules:m},null,8,["modelValue","label","items"])]),"append-form":s(()=>[g(Ye,{icon:"mdi-information-outline",type:"info"},{default:s(()=>[g(R,{keypath:"explorer.catalog.replace.info"},ua({catalogNameToBeReplaced:s(()=>[T("strong",null,y(w.catalogName),1)]),_:2},[r.value?{name:"catalogNameToBeReplacedWith",fn:s(()=>[T("strong",null,y(u.value),1)]),key:"0"}:{name:"catalogNameToBeReplacedWith",fn:s(()=>[C[2]||(C[2]=T("strong",null,"?",-1))]),key:"1"}]),1024)]),_:1})]),"confirm-button-body":s(()=>[B(y(h(t)("common.button.replace")),1)]),_:1},8,["model-value","changed"])}}}),Eo=G({__name:"CreateCollectionDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","create"],setup(e,{emit:i}){const n=Fe(),l=Z(),{t}=F(),a=e,c=i,m=[r=>r!=null&&r.trim().length>0?!0:t("explorer.collection.create.form.entityType.validations.required"),async r=>{const f=await n.isEntityTypeValid(a.connection,r);return f==null?!0:t(`explorer.collection.create.form.entityType.validations.${f}`)},async r=>await n.isEntityTypeAvailable(a.connection,a.catalogName,r)?!0:t("explorer.collection.create.form.entityType.validations.notAvailable")],o=L(""),d=E(()=>o.value.length>0);function p(){o.value=""}async function u(){try{return await n.createCollection(a.connection,a.catalogName,o.value),l.success(t("explorer.collection.create.notification.collectionCreated",{entityType:o.value})),c("create"),!0}catch(r){return l.error(t("explorer.collection.create.notification.couldNotCreateCollection",{entityType:o.value,reason:r.message})),!1}}return(r,f)=>{const S=re("I18nT");return v(),x(ie,{"model-value":r.modelValue,changed:d.value,"confirm-button-icon":"mdi-plus",confirm:u,reset:p,"onUpdate:modelValue":f[1]||(f[1]=w=>c("update:modelValue",w))},{title:s(()=>[g(S,{keypath:"explorer.collection.create.title"},{catalogName:s(()=>[T("strong",null,y(r.catalogName),1)]),_:1})]),default:s(()=>[g(ye,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=w=>o.value=w),label:h(t)("explorer.collection.create.form.entityType.label"),rules:m,required:""},null,8,["modelValue","label"])]),"confirm-button-body":s(()=>[B(y(h(t)("common.button.create")),1)]),_:1},8,["model-value","changed"])}}}),Bo=G({__name:"SwitchCatalogToAliveStateDialog",props:{modelValue:{type:Boolean},connection:{},catalogName:{}},emits:["update:modelValue","switch"],setup(e,{emit:i}){const n=Ve(),l=Z(),{t}=F(),a=e,c=i;async function m(){try{return await n.switchCatalogToAliveState(a.connection,a.catalogName)?(l.success(t("explorer.catalog.switchToAliveState.notification.catalogSwitched",{catalogName:a.catalogName})),c("switch")):l.info(t("explorer.catalog.switchToAliveState.notification.catalogNotSwitched",{catalogName:a.catalogName})),!0}catch(o){return l.error(t("explorer.catalog.switchToAliveState.notification.couldNotSwitchCatalog",{catalogName:a.catalogName,reason:o.message})),!1}}return(o,d)=>{const p=re("I18nT");return v(),x(ie,{"model-value":o.modelValue,dangerous:"",changed:"","confirm-button-icon":"mdi-toggle-switch-outline",confirm:m,"onUpdate:modelValue":d[0]||(d[0]=u=>c("update:modelValue",u))},{title:s(()=>[g(p,{keypath:"explorer.catalog.switchToAliveState.title"},{catalogName:s(()=>[T("strong",null,y(o.catalogName),1)]),_:1})]),"prepend-form":s(()=>[B(y(h(t)("explorer.catalog.switchToAliveState.description")),1)]),"append-form":s(()=>[g(Ye,{icon:"mdi-alert-outline",type:"warning"},{default:s(()=>[B(y(h(t)("explorer.catalog.switchToAliveState.warning")),1)]),_:1})]),"confirm-button-body":s(()=>[B(y(h(t)("common.button.switch")),1)]),_:1},8,["model-value"])}}});var Te=(e=>(e.Info="info",e.Warning="warning",e.Error="error",e))(Te||{});class ge{constructor(i,n){we(this,"value");we(this,"type");this.value=i,this.type=n}static info(i){return new ge(i,Te.Info)}static warning(i){return new ge(i,Te.Warning)}static error(i){return new ge(i,Te.Error)}}const Ro={key:0},$o=G({__name:"CatalogItem",props:{catalog:{}},emits:["change"],setup(e,{emit:i}){const n=de(),l=Ce(),t=da(),a=mt(),c=ut(),m=Z(),{t:o}=F(),d=e,p=i,u=Vt(),r=L(!1),f=L(!1),S=L(!1),w=L(!1),C=L(!1),R=St(),V=E(()=>{const I=[];return d.catalog.corrupted&&I.push(ge.error(o("explorer.catalog.flag.corrupted"))),d.catalog.isInWarmup&&I.push(ge.warning(o("explorer.catalog.flag.warmingUp"))),I}),_=E(()=>Y()),k=E(()=>Array.from(_.value.values())),N=E(()=>ma.List(d.catalog.entityCollections).sort((I,b)=>I.entityType.localeCompare(b.entityType))),$=L(d.catalog);ho($);const A=L(!1);async function U(){try{await l.closeAllSessions(R,d.catalog.name),m.success(o("explorer.catalog.notification.closedAllSessions",{catalogName:d.catalog.name}))}catch(I){m.error(o("explorer.catalog.notification.couldNotCloseSessions",{catalogName:d.catalog.name,reason:I.message}))}}function H(I){var D;const b=(D=_.value)==null?void 0:D.get(I);b&&b instanceof fe&&b.execute()}function Y(){const I=u.value!=null&&u.value.apiEnabled($e.GraphQL),b=!d.catalog.corrupted,D=u.value!=null&&!u.value.readOnly,M=new Map;return M.set(z.EvitaQLConsole,W(z.EvitaQLConsole,va.icon(),()=>{n.createTab(t.createNew(R,d.catalog.name))},b)),M.set(z.GraphQLDataAPIConsole,W(z.GraphQLDataAPIConsole,Le.icon(),()=>{n.createTab(a.createNew(R,d.catalog.name,Ie.Data))},b&&I)),M.set(z.GraphQLSchemaAPIConsole,W(z.GraphQLSchemaAPIConsole,Le.icon(),()=>{n.createTab(a.createNew(R,d.catalog.name,Ie.Schema))},b&&I)),M.set(z.ViewSchema,W(z.ViewSchema,dt.icon(),()=>{n.createTab(c.createNew(R,new pa(d.catalog.name)))},b)),M.set(z.ManageSubheader,new pe(o("explorer.catalog.subheader.manage"))),M.set(z.CloseAllSessions,W(z.CloseAllSessions,"mdi-lan-disconnect",()=>U())),M.set(z.ModifySubheader,new pe(o("explorer.catalog.subheader.modify"))),M.set(z.RenameCatalog,W(z.RenameCatalog,"mdi-pencil-outline",()=>r.value=!0,b&&D)),M.set(z.ReplaceCatalog,W(z.ReplaceCatalog,"mdi-file-replace-outline",()=>f.value=!0,b&&D)),d.catalog.isInWarmup&&M.set(z.SwitchCatalogToAliveState,W(z.SwitchCatalogToAliveState,"mdi-toggle-switch-outline",()=>S.value=!0,b&&D)),M.set(z.DropCatalog,W(z.DropCatalog,"mdi-delete-outline",()=>w.value=!0,D)),M.set(z.CollectionsSubheader,new pe(o("explorer.catalog.subheader.collections"))),M.set(z.CreateCollection,W(z.CreateCollection,"mdi-plus",()=>C.value=!0,b&&D)),new Map(M)}function W(I,b,D,M=!0){return new fe(I,o(`explorer.catalog.actions.${I}`),b,D,void 0,!M)}return(I,b)=>(v(),x(vt,{value:`${h(R).name}|${I.catalog.name}`},{activator:s(({isOpen:D,props:M})=>[g(Oe,te(M,{openable:!I.catalog.corrupted,"is-open":D,"prepend-icon":"mdi-menu",loading:A.value,flags:V.value,actions:k.value,"onClick:action":H,class:"text-gray-light"}),{default:s(()=>[B(y(I.catalog.name),1)]),_:2},1040,["openable","is-open","loading","flags","actions"])]),default:s(()=>[I.catalog.corrupted?j("",!0):(v(),P("div",Ro,[I.catalog.entityCollections.size>0?(v(!0),P(O,{key:0},le(N.value,D=>(v(),x(To,{key:D.entityType,"entity-collection":D,onChange:b[0]||(b[0]=M=>p("change"))},null,8,["entity-collection"]))),128)):(v(),x(Tt,{key:1}))])),r.value?(v(),x(xo,{key:1,modelValue:r.value,"onUpdate:modelValue":b[1]||(b[1]=D=>r.value=D),connection:h(R),"catalog-name":I.catalog.name,onRename:b[2]||(b[2]=D=>p("change"))},null,8,["modelValue","connection","catalog-name"])):j("",!0),f.value?(v(),x(Do,{key:2,modelValue:f.value,"onUpdate:modelValue":b[3]||(b[3]=D=>f.value=D),connection:h(R),"catalog-name":I.catalog.name,onReplace:b[4]||(b[4]=D=>p("change"))},null,8,["modelValue","connection","catalog-name"])):j("",!0),S.value?(v(),x(Bo,{key:3,modelValue:S.value,"onUpdate:modelValue":b[5]||(b[5]=D=>S.value=D),connection:h(R),"catalog-name":I.catalog.name,onSwitch:b[6]||(b[6]=D=>p("change"))},null,8,["modelValue","connection","catalog-name"])):j("",!0),w.value?(v(),x(No,{key:4,modelValue:w.value,"onUpdate:modelValue":b[7]||(b[7]=D=>w.value=D),connection:h(R),"catalog-name":I.catalog.name,onDrop:b[8]||(b[8]=D=>p("change"))},null,8,["modelValue","connection","catalog-name"])):j("",!0),C.value?(v(),x(Eo,{key:5,modelValue:C.value,"onUpdate:modelValue":b[9]||(b[9]=D=>C.value=D),connection:h(R),"catalog-name":I.catalog.name,onCreate:b[10]||(b[10]=D=>p("change"))},null,8,["modelValue","connection","catalog-name"])):j("",!0)]),_:1},8,["value"]))}}),Io=G({__name:"RemoveConnectionDialog",props:{modelValue:{type:Boolean},connection:{}},emits:["update:modelValue"],setup(e,{emit:i}){const n=Ce(),l=Z(),{t}=F(),a=e,c=i;async function m(){try{return n.removeConnection(a.connection.id),l.success(t("explorer.connection.remove.notification.connectionRemoved",{connectionName:a.connection.name})),!0}catch(o){return l.error(t("explorer.connection.remove.notification.couldNotRemoveConnection",{connectionName:a.connection.name,reason:o.message})),!1}}return(o,d)=>{const p=re("I18nT");return v(),x(ie,{"model-value":o.modelValue,dangerous:"",changed:"","confirm-button-icon":"mdi-delete-outline",confirm:m,"onUpdate:modelValue":d[0]||(d[0]=u=>c("update:modelValue",u))},{activator:s(({props:u})=>[ke(o.$slots,"activator",pt(gt(u)))]),title:s(()=>[g(p,{keypath:"explorer.connection.remove.title"},{connectionName:s(()=>[T("strong",null,y(o.connection.name),1)]),_:1})]),"prepend-form":s(()=>[B(y(h(t)("explorer.connection.remove.question")),1)]),"confirm-button-body":s(()=>[B(y(h(t)("common.button.remove")),1)]),_:3},8,["model-value"])}}}),Lo=G({__name:"CreateCatalogDialog",props:{modelValue:{type:Boolean},connection:{}},emits:["update:modelValue","create"],setup(e,{emit:i}){const n=Ve(),l=Z(),{t}=F(),a=e,c=i,m=[r=>r!=null&&r.trim().length>0?!0:t("explorer.catalog.create.form.catalogName.validations.required"),async r=>{const f=await n.isCatalogNameValid(a.connection,r);return f==null?!0:t(`explorer.catalog.create.form.catalogName.validations.${f}`)},async r=>await n.isCatalogNameAvailable(a.connection,r)?!0:t("explorer.catalog.create.form.catalogName.validations.notAvailable")],o=L(""),d=E(()=>o.value.length>0);function p(){o.value=""}async function u(){try{return await n.createCatalog(a.connection,o.value),l.success(t("explorer.catalog.create.notification.catalogCreated",{catalogName:o.value})),c("create"),!0}catch(r){return l.error(t("explorer.catalog.create.notification.couldNotCreateCatalog",{catalogName:o.value,reason:r.message})),!1}}return(r,f)=>(v(),x(ie,{"model-value":r.modelValue,changed:d.value,"confirm-button-icon":"mdi-plus",confirm:u,reset:p,"onUpdate:modelValue":f[1]||(f[1]=S=>c("update:modelValue",S))},{title:s(()=>[B(y(h(t)("explorer.catalog.create.title")),1)]),default:s(()=>[g(ye,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=S=>o.value=S),label:h(t)("explorer.catalog.create.form.catalogName.label"),rules:m,required:""},null,8,["modelValue","label"])]),"confirm-button-body":s(()=>[B(y(h(t)("common.button.create")),1)]),_:1},8,["model-value","changed"]))}}),Ao={key:0},Po=G({__name:"ConnectionItem",props:{connection:{}},setup(e){const i=ft(),n=de(),l=Ce(),t=mt(),a=ga(),c=fa(),m=ha(),o=ba(),d=Z(),{t:p}=F(),u=e;go(u.connection);const r=L();fo(r);const f=E(()=>{const b=[];return u.connection.preconfigured&&b.push(ge.info(p("explorer.connection.flag.preconfigured"))),b}),S=L();ee([()=>u.connection,r],async()=>S.value=await W(),{immediate:!0});const w=E(()=>S.value==null?[]:Array.from(S.value.values())),C=L(),R=L(!1),V=L(!1),_=L(!1);let k=!1;async function N(){k||(R.value=!0,k=await A().then(b=>b?U():!1),R.value=!1)}async function $(){R.value=!0,await A().then(b=>b?U():!1),R.value=!1}async function A(){try{return r.value=await l.getServerStatus(u.connection),!0}catch(b){return d.error(p("explorer.connection.notification.couldNotLoadServerStatus",{connectionName:u.connection.name,reason:b.message})),!1}}async function U(){try{return C.value=(await l.getCatalogs(u.connection,!0)).sort((b,D)=>b.name.localeCompare(D.name)),!0}catch(b){return d.error(p("explorer.connection.notification.couldNotLoadCatalogs",{connectionName:u.connection.name,reason:b.message})),!1}}async function H(){try{await l.closeAllSessions(u.connection),d.success(p("explorer.connection.notification.closedAllSessions",{connectionName:u.connection.name}))}catch(b){d.error(p("explorer.connection.notification.couldNotCloseSessions",{connectionName:u.connection.name,reason:b.message}))}}function Y(b){if(S.value==null)return;const D=S.value.get(b);D instanceof fe&&D.execute()}async function W(){const b=r.value!=null&&r.value.apiEnabled($e.GraphQL),D=r.value!=null&&r.value.apiEnabled($e.Observability),M=!u.connection.preconfigured,me=!i.readOnly,se=r.value!=null,he=se&&!r.value.readOnly,K=new Map;return K.set(Q.Server,I(Q.Server,ya.icon(),()=>n.createTab(a.createNew(u.connection)),se)),K.set(Q.Tasks,I(Q.Tasks,_a.icon(),()=>{n.createTab(c.createNew(u.connection))},he)),K.set(Q.JfrRecordings,I(Q.JfrRecordings,wa.icon(),()=>{n.createTab(m.createNew(u.connection))},he&&D)),K.set(Q.GraphQLSystemAPIConsole,I(Q.GraphQLSystemAPIConsole,Le.icon(),()=>n.createTab(t.createNew(u.connection,"system",Ie.System)),b)),K.set(Q.ManageSubheader,new pe(p("explorer.connection.subheader.manage"))),K.set(Q.Refresh,I(Q.Refresh,"mdi-refresh",async()=>await $())),K.set(Q.CloseAllSessions,I(Q.CloseAllSessions,"mdi-lan-disconnect",()=>H(),se)),K.set(Q.ModifySubheader,new pe(p("explorer.connection.subheader.modify"))),K.set(Q.Remove,I(Q.Remove,"mdi-delete-outline",()=>V.value=!0,M&&me)),K.set(Q.CatalogsSubheader,new pe(p("explorer.connection.subheader.catalogs"))),K.set(Q.CreateCatalog,I(Q.CreateCatalog,"mdi-plus",()=>_.value=!0,he)),K.set(Q.CatalogBackups,I(Q.CatalogBackups,Sa.icon(),()=>{n.createTab(o.createNew(u.connection))},he)),K}function I(b,D,M,me=!0){return new fe(b,p(`explorer.connection.actions.${b}`),D,M,void 0,!me)}return(b,D)=>(v(),P("div",null,[g(vt,{value:b.connection.name},{activator:s(({isOpen:M,props:me})=>[g(Oe,te(me,{openable:"","is-open":M,"prepend-icon":"mdi-power-plug-outline",loading:R.value,flags:f.value,actions:w.value,onClick:D[0]||(D[0]=se=>N()),"onClick:actionMenu":D[1]||(D[1]=se=>N()),"onClick:action":Y}),{default:s(()=>[B(y(b.connection.name),1)]),_:2},1040,["is-open","loading","flags","actions"])]),default:s(()=>[C.value!==void 0?(v(),P("div",Ao,[C.value.size>0?(v(!0),P(O,{key:0},le(C.value,M=>(v(),x($o,{key:M.name,catalog:M,onChange:U},null,8,["catalog"]))),128)):(v(),x(Tt,{key:1}))])):j("",!0),V.value?(v(),x(Io,{key:1,modelValue:V.value,"onUpdate:modelValue":D[2]||(D[2]=M=>V.value=M),connection:b.connection},null,8,["modelValue","connection"])):j("",!0),_.value?(v(),x(Lo,{key:2,modelValue:_.value,"onUpdate:modelValue":D[3]||(D[3]=M=>_.value=M),connection:b.connection,onCreate:U},null,8,["modelValue","connection"])):j("",!0)]),_:1},8,["value"])]))}}),Mo=G({__name:"ConnectToServerDialog",props:{modelValue:{type:Boolean},connection:{default:void 0}},emits:["update:modelValue"],setup(e,{emit:i}){const n=Ce(),l=Z(),{t}=F(),a=i,c=[C=>C?!0:t("explorer.connection.connect.form.connectionName.validations.required"),C=>n.isConnectionExists(C)?t("explorer.connection.connect.form.connectionName.validations.duplicate"):!0],m=[C=>C?!0:t("explorer.connection.connect.form.serverUrl.validations.required"),C=>{try{return new URL(C),!0}catch{return t("explorer.connection.connect.form.serverUrl.validations.invalidUrl")}},async C=>{const R=await f(C);return R==null?(p.value=1,!0):(p.value=2,R)}],o=L(""),d=L(""),p=L(0),u=E(()=>o.value!=null&&o.value.length>0&&d.value!=null&&d.value.length>0),r=E(()=>{switch(p.value){case 0:return"";case 1:return"mdi-check-circle-outline";case 2:return"mdi-close-circle-outline"}});async function f(C){var R,V;try{const _=C.endsWith("/")?C:C+"/",k=await ka.post(`${_}io.evitadb.externalApi.grpc.generated.EvitaManagementService/ServerStatus`,{headers:{"Content-Type":"application/json",Accept:"application/json"},body:"{}"}).json();return k.readiness!=="API_READY"?t("explorer.connection.connect.form.serverUrl.validations.notReady"):((R=k.api.lab)==null?void 0:R.enabled)!==!0?t("explorer.connection.connect.form.serverUrl.validations.labApiMissing"):((V=k.api.gRPC)==null?void 0:V.enabled)!==!0?t("explorer.connection.connect.form.serverUrl.validations.grpcApiMissing"):void 0}catch{return t("explorer.connection.connect.form.serverUrl.validations.unreachable")}}function S(){o.value="",d.value="",p.value=0}async function w(){try{return n.addConnection(Va.user(void 0,o.value,d.value)),l.success(t("explorer.connection.connect.notification.connectionAdded",{connectionName:o.value})),!0}catch(C){return l.error(t("explorer.connection.connect.notification.couldNotAddConnection",{reason:C.message})),!1}}return(C,R)=>(v(),x(ie,{"model-value":C.modelValue,changed:u.value,"confirm-button-icon":"mdi-power-plug-outline",confirm:w,reset:S,"onUpdate:modelValue":R[2]||(R[2]=V=>a("update:modelValue",V))},{activator:s(({props:V})=>[ke(C.$slots,"activator",pt(gt({props:V})))]),title:s(()=>[B(y(h(t)("explorer.connection.connect.title")),1)]),default:s(()=>[g(ye,{modelValue:o.value,"onUpdate:modelValue":R[0]||(R[0]=V=>o.value=V),label:h(t)("explorer.connection.connect.form.connectionName.label"),placeholder:"evitaDB",rules:c,required:""},null,8,["modelValue","label"]),g(ye,{modelValue:d.value,"onUpdate:modelValue":R[1]||(R[1]=V=>d.value=V),label:h(t)("explorer.connection.connect.form.serverUrl.label"),placeholder:"https://{evitadb-server}:5555",hint:h(t)("explorer.connection.connect.form.serverUrl.hint"),required:"",rules:m,"append-inner-icon":r.value},null,8,["modelValue","label","hint","append-inner-icon"])]),"confirm-button-body":s(()=>[B(y(h(t)("explorer.connection.connect.button.connect")),1)]),_:3},8,["model-value","changed"]))}}),Uo={key:0,class:"pa-2"},Wo=G({__name:"ConnectionExplorerPanel",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:i}){const n=ft(),l=Ce(),{t}=F(),a=L(!1),c=E(()=>l.getConnections().sort((m,o)=>m.preconfigured&&!o.preconfigured?-1:o.preconfigured&&!m.preconfigured?1:m.name.localeCompare(o.name)));return(m,o)=>(v(),x(_t,{permanent:"","model-value":m.modelValue,width:325,"onUpdate:modelValue":o[2]||(o[2]=d=>m.$emit("update:modelValue",d)),class:"bg-primary"},{append:s(()=>[h(n).readOnly?j("",!0):(v(),P("div",Uo,[g(Mo,{modelValue:a.value,"onUpdate:modelValue":o[1]||(o[1]=d=>a.value=d)},{activator:s(({props:d})=>[g(je,te({"prepend-icon":"mdi-power-plug-outline",block:"",variant:"outlined"},d,{onClick:o[0]||(o[0]=p=>a.value=!0)}),{default:s(()=>[B(y(h(t)("explorer.button.connect")),1)]),_:2},1040)]),_:1},8,["modelValue"])]))]),default:s(()=>[g(Ee,{density:"compact",nav:""},{default:s(()=>[g(Ca,{class:"text-gray-light text-sm-body-2 font-weight-medium"},{default:s(()=>[B(y(h(t)("explorer.title")),1)]),_:1}),(v(!0),P(O,null,le(c.value,d=>(v(),x(Po,{key:d.name,connection:d},null,8,["connection"]))),128))]),_:1})]),_:1},8,["model-value"]))}});function Ho(e,i){return e.length<=i?e:e.substring(0,i-3)+"..."}const Go={class:"loading-screen"},jo={class:"loading-screen-info"},qo=G({__name:"TabLoadingScreen",setup(e){const{t:i}=F();return(n,l)=>(v(),P("div",Go,[T("div",jo,[g(ct,{size:48}),T("span",null,y(h(i)("tab.placeholder.loading")),1)])]))}});const zo=oe(qo,[["__scopeId","data-v-b23d11da"]]),Qo=G({__name:"TabWindow",props:{id:{},component:{},componentProps:{}},setup(e){const i=de(),n=e,l=L(!1),t=L();ee(t,()=>{m()});function a(){l.value=!0,m()}function c(o){i.replaceTabData(n.id,o),m()}function m(){if(l.value&&t.value!=null&&t.value.path!=null){const o=t.value.path();o!=null&&i.subjectPathStatus.definePath(n.id,o)}}return(o,d)=>(v(),P(O,null,[(v(),x(Da,null,[Ta((v(),x(Na(o.component),te({ref_key:"componentInstance",ref:t},o.componentProps,{onReady:a,"onUpdate:data":c}),null,16)),[[xa,l.value]])],1024)),l.value?j("",!0):(v(),x(zo,{key:0}))],64))}}),Fo="/lab/logo/evitalab-logo-representative.svg",Yo={class:"editor-welcome-screen"},Oo={class:"editor-welcome-screen-hero"},Ko={class:"editor-welcome-screen-hero__header"},Xo={class:"editor-welcome-screen-hero__title"},Jo={class:"font-weight-bold mb-2",style:{"font-size":"4.375rem"}},Zo={class:"text-white",style:{"font-size":"1rem"}},en={class:"text-primary-lightest text-body-2",href:"https://github.com/lukashornych/evitalab/releases",target:"_blank"},tn={class:"text-gray-light",style:{"font-size":"1rem"}},an={class:"editor-welcome-screen-blog"},on=["href"],nn={class:"editor-welcome-screen-blog-img__wrap"},ln=["src","alt"],rn={class:"editor-welcome-screen-blog-item__title"},sn={class:"editor-welcome-screen-blog-item__perex"},cn={class:"editor-welcome-screen-blog-item__btn"},un={class:"editor-welcome-screen-hero__links"},dn={href:"https://evitadb.io/documentation",target:"_blank"},mn={href:"https://github.com/lukashornych/evitalab/",target:"_blank"},vn={href:"https://discord.gg/VsNBWxgmSw",target:"_blank"},pn={href:"https://github.com/lukashornych/evitalab/issues",target:"_blank"},gn=G({__name:"WelcomeScreen",setup(e){const i=Ea(),{t:n}=F(),l=E(()=>{const a="v2024.4.0";return a.length===0?"?":a.substring(1)}),t=L([]);return i.getBlogPosts().then(a=>{t.value=a}),(a,c)=>{const m=re("I18nT");return v(),P("div",Yo,[T("div",Oo,[T("header",Ko,[g(We,{width:"240",height:"240","max-width":"240","max-height":"240",alt:"evitaLab Logo",src:Fo,class:"evitalab-logo"}),T("div",Xo,[T("h1",Jo,y(h(n)("app.name")),1),T("p",Zo,[B(y(l.value)+" ",1),T("a",en,"("+y(h(n)("welcomeScreen.changelog"))+")",1)]),T("p",tn,y(h(n)("welcomeScreen.description")),1)])]),T("div",an,[(v(!0),P(O,null,le(t.value,o=>(v(),P("a",{key:o.url,href:o.url,target:"_blank"},[T("span",nn,[T("img",{class:"Blog_BlogMotive__72hVr",height:"160",width:"480",src:o.thumbnailUrl,alt:h(n)("welcomeScreen.blog.thumbnail.alt",{title:o.title})},null,8,ln)]),T("span",rn,y(o.title),1),T("span",sn,[g(Ba,{source:o.perex},null,8,["source"])]),T("span",cn,y(h(n)("welcomeScreen.blog.button.read")),1)],8,on))),128))]),c[0]||(c[0]=T("span",{class:"editor-welcome-screen-hr"}," ",-1)),T("ul",un,[g(m,{keypath:"welcomeScreen.link.evitaDBDocumentation.text",tag:"li"},{link:s(()=>[T("a",dn,y(h(n)("welcomeScreen.link.evitaDBDocumentation.link")),1)]),_:1}),g(m,{keypath:"welcomeScreen.link.evitaLabGitHub.text",tag:"li"},{link:s(()=>[T("a",mn,y(h(n)("welcomeScreen.link.evitaLabGitHub.link")),1)]),_:1}),g(m,{keypath:"welcomeScreen.link.discord.text",tag:"li"},{link:s(()=>[T("a",vn,y(h(n)("welcomeScreen.link.discord.link")),1)]),_:1}),T("li",null,[T("a",pn,y(h(n)("welcomeScreen.link.submitIssue")),1)])])])])}}});const fn=oe(gn,[["__scopeId","data-v-70fa2ac3"]]),hn=["innerHTML"],bn=["innerHTML"],yn=["innerHTML"],_n=G({__name:"TabSharedDialog",props:{tabRequest:{}},emits:["resolve"],setup(e,{emit:i}){const n=de(),{t:l}=F(),t=e,a=i;function c(){n.createTab(t.tabRequest),a("resolve")}function m(){a("resolve")}return(o,d)=>(v(),x(Ia,{"model-value":!0,"max-width":"36rem","onUpdate:modelValue":m},{title:s(()=>[B(y(h(l)("tabShare.sharedDialog.title")),1)]),default:s(()=>[o.tabRequest.initialData!=null?(v(),P("span",{key:0,innerHTML:h(l)("tabShare.sharedDialog.text.withoutInitialData")},null,8,hn)):(v(),P("span",{key:1,innerHTML:h(l)("tabShare.sharedDialog.text.withInitialData")},null,8,bn)),o.tabRequest.initialData!=null?(v(),x(Ye,{key:2,icon:"mdi-alert-outline",type:"warning",class:"mt-4"},{default:s(()=>[T("span",{innerHTML:h(l)("tabShare.sharedDialog.warning.potentiallyUnsafe")},null,8,yn)]),_:1})):j("",!0)]),"reject-button":s(()=>[g(Ra,{onReject:m},{default:s(()=>[B(y(h(l)("tabShare.sharedDialog.button.reject")),1)]),_:1})]),"confirm-button":s(()=>[g($a,{icon:"mdi-check",onConfirm:c},{default:s(()=>[B(y(h(l)("tabShare.sharedDialog.button.accept")),1)]),_:1})]),_:1}))}}),wn={key:1,style:{position:"relative"}},Sn=G({__name:"WorkspaceTabWindowList",setup(e){const i=La(),n=Z(),l=He(),{t}=F(),a=de(),c=Aa(),m=Pa(),o=L(!1),d=L(!1),p=L(),u=L(a.getTabDefinitions());ee(u,()=>{const _=a.getTheNewTab();_&&(r.value=_.id,a.markTabAsVisited(_.id))},{deep:!0});const r=L();ee(r,(_,k)=>{_!=null?(l.setContext(_),a.subjectPathStatus.activatePath(_)):k!=null&&(l.resetActivatedContext(),a.subjectPathStatus.deactivatePath())});function f(_){if(r.value==null)return;let N=a.getTabIndex(r.value)+_;N<0?N=u.value.length-1:N>=u.value.length&&(N=0),r.value=u.value[N].id}function S(_){const k=u.value.length,N=u.value.findIndex(A=>A.id===r.value),$=u.value.findIndex(A=>A.id===_);a.destroyTab(_),l.deleteContext(_),a.subjectPathStatus.deletePath(_),u.value.length===0?r.value=null:$===N&&$===k-1?r.value=u.value[$-1].id:$===N&&$<k-1&&(r.value=u.value[$].id)}async function w(){const _=i.query.demoSnippetRequest;if(_!=null)try{return await c.resolve(_)}catch(k){n.error(k)}}async function C(){const _=i.query.sharedTab;if(_!=null)try{return await m.resolve(_)}catch(k){n.error(k)}}function R(){try{let _=!1;a.restoreTabsFromLastSession()&&(_=!0),a.restoreTabHistory()&&(_=!0),_&&n.info("Your last session has been restored.")}catch(_){console.error(_),n.warning("Failed to fully restore your last session.")}}function V(){a.storeOpenedTabs(),a.storeTabHistory()}return w().then(_=>(_!=null&&(o.value=!0,a.createTab(_)),C())).then(_=>{_!=null&&(o.value=!0,p.value=_,d.value=!0),o.value||R()}),_e(()=>{l.bindGlobal(X.System_Editor_PreviousTab,()=>f(-1)),l.bindGlobal(X.System_Editor_NextTab,()=>f(1)),l.bindGlobal(X.System_Editor_CloseTab,()=>{r.value!=null&&S(r.value)}),l.bindGlobal(X.System_Editor_CloseAllTabs,()=>a.destroyAllTabs())}),Ge(()=>{l.unbindGlobal(X.System_Editor_PreviousTab),l.unbindGlobal(X.System_Editor_NextTab),l.unbindGlobal(X.System_Editor_CloseTab),l.unbindGlobal(X.System_Editor_CloseAllTabs)}),window.addEventListener("beforeunload",()=>{o.value||V()}),(_,k)=>(v(),P(O,null,[u.value.length>0?(v(),x(yt,{key:0,density:"compact",elevation:"0"},{default:s(()=>[g(Ma,{modelValue:r.value,"onUpdate:modelValue":k[0]||(k[0]=N=>r.value=N)},{default:s(()=>[(v(!0),P(O,null,le(u.value,N=>(v(),x(Wa,{key:N.id,value:N.id,"prepend-icon":N.icon,onMousedown:Re($=>S(N.id),["middle"]),class:"lab-tab"},{default:s(()=>[T("span",null,[B(y(h(Ho)(N.title,30))+" ",1),N.title.length>30?(v(),x(ue,{key:0,activator:"parent"},{default:s(()=>[B(y(N.title),1)]),_:2},1024)):j("",!0)]),g(je,{icon:"",variant:"plain",density:"compact",class:"ml-3",onClick:Re($=>S(N.id),["stop"])},{default:s(()=>[g(ce,null,{default:s(()=>k[3]||(k[3]=[B("mdi-close")])),_:1}),g(qe,{command:h(X).System_Editor_CloseTab},{default:s(()=>[B(y(h(t)("tab.button.closeTab")),1)]),_:1},8,["command"])]),_:2},1032,["onClick"])]),_:2},1032,["value","prepend-icon","onMousedown"]))),128))]),_:1},8,["modelValue"])]),_:1})):j("",!0),g(Fa,{scrollable:!1,class:"lab-editor"},{default:s(()=>[u.value.length>0?(v(),x(Ua,{key:0,modelValue:r.value,"onUpdate:modelValue":k[1]||(k[1]=N=>r.value=N)},{default:s(()=>[(v(!0),P(O,null,le(u.value,N=>(v(),x(Ha,{key:N.id,value:N.id,transition:!1,"reverse-transition":!1,class:"window-item"},{default:s(()=>[g(Qo,{id:N.id,component:N.component,"component-props":N.componentProps()},null,8,["id","component","component-props"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):(v(),P("div",wn,[g(fn)]))]),_:1}),p.value?(v(),x(_n,{key:1,"tab-request":p.value,onResolve:k[2]||(k[2]=N=>p.value=void 0)},null,8,["tab-request"])):j("",!0)],64))}});const kn=oe(Sn,[["__scopeId","data-v-b8c6aeb8"]]),Vn={key:0,class:"editor-status"},Cn=G({__name:"EditorStatus",props:{status:{}},setup(e){const{t:i}=F(),n=e,l=E(()=>n.status.activatedEditorInfo),t=E(()=>{if(l.value!=null&&l.value.selections.size==1)return l.value.selections.get(0)});return(a,c)=>l.value?(v(),P("div",Vn,[g(ue,null,{activator:s(({props:m})=>[T("span",te({class:"text-no-wrap"},m),[l.value.selections.size!=1?(v(),P(O,{key:0},[B(y(h(i)("common.statusBar.activeEditorStatus.selections.value.multipleSelections",{count:l.value.selections.size})),1)],64)):(v(),P(O,{key:1},[B(y(h(i)("common.statusBar.activeEditorStatus.selections.value.singleSelection.cursorPosition",{line:t.value.line,column:t.value.column}))+" ",1),t.value.selectedCharacterCount>0?(v(),P(O,{key:0},[B(" ("+y(h(i)("common.statusBar.activeEditorStatus.selections.value.singleSelection.selectionRange",{charsCount:t.value.selectedCharacterCount})),1),t.value.lineBreaks>0?(v(),P(O,{key:0},[B(", "+y(h(i)("common.statusBar.activeEditorStatus.selections.value.singleSelection.lineBreaks",{lineBreaks:t.value.lineBreaks})),1)],64)):j("",!0),c[0]||(c[0]=B(") "))],64)):j("",!0)],64))],16)]),default:s(()=>[B(y(h(i)("common.statusBar.activeEditorStatus.selections.label")),1)]),_:1}),g(ue,null,{activator:s(({props:m})=>[T("span",te({class:"text-no-wrap"},m),y(h(i)("common.statusBar.activeEditorStatus.tabSize.value",{tabSize:l.value.tabSize})),17)]),default:s(()=>[B(y(h(i)("common.statusBar.activeEditorStatus.tabSize.label")),1)]),_:1}),g(ue,null,{activator:s(({props:m})=>[T("span",te({class:"text-no-wrap"},m),y(l.value.language),17)]),default:s(()=>[B(y(h(i)("common.statusBar.activeEditorStatus.language.label")),1)]),_:1})])):j("",!0)}});const Tn=oe(Cn,[["__scopeId","data-v-ab91fc98"]]),xn=G({__name:"SubjectPathStatusItem",props:{item:{}},setup(e){const i=e;function n(){i.item.onClick!=null&&i.item.onClick()}return(l,t)=>(v(),P("div",{class:Be(["subject-path-status-item",{"subject-path-status-item--clickable":l.item.onClick!=null}]),onClick:n},[l.item.icon?(v(),x(ce,{key:0,icon:l.item.icon,size:"12"},null,8,["icon"])):j("",!0),T("span",null,y(l.item.value),1)],2))}});const Nn=oe(xn,[["__scopeId","data-v-3925741a"]]);const Dn={};function En(e,i){return v(),x(ce,{icon:"mdi-chevron-right",size:"12",class:"text-disabled subject-path-status-item-delimiter"})}const Bn=oe(Dn,[["render",En],["__scopeId","data-v-a85df1cb"]]),Rn={key:0,class:"subject-path-status"},$n=G({__name:"SubjectPathStatus",props:{status:{}},setup(e){const i=e,n=E(()=>i.status.activatedPath);return(l,t)=>n.value?(v(),P("div",Rn,[(v(!0),P(O,null,le(n.value.items,(a,c)=>(v(),P(O,{key:c},[g(Nn,{item:a},null,8,["item"]),c+1<n.value.items.size?(v(),x(Bn,{key:0})):j("",!0)],64))),128))])):j("",!0)}});const In=oe($n,[["__scopeId","data-v-91b66f15"]]),Ln={class:"left-content"},An={class:"right-content"},Pn=G({__name:"WorkspaceStatusBar",setup(e){const i=de(),n=E(()=>i.subjectPathStatus),l=E(()=>i.editorStatus);return(t,a)=>(v(),x(yt,{height:"28",location:"bottom",flat:"",class:"bg-primary-dark status-bar"},{default:s(()=>[T("div",Ln,[g(In,{status:n.value},null,8,["status"])]),T("div",An,[g(Tn,{status:l.value},null,8,["status"])])]),_:1}))}});const Mn=oe(Pn,[["__scopeId","data-v-18101a46"]]),Gn=G({__name:"MainView",setup(e){const i=L(ve.Explorer);return(n,l)=>(v(),P(O,null,[g(Mn),g(po,{panel:i.value,"onUpdate:panel":l[0]||(l[0]=t=>i.value=t)},null,8,["panel"]),g(Wo,{"model-value":i.value===h(ve).Explorer},null,8,["model-value"]),g(kn)],64))}});export{Gn as default};
